import{j as u,r as I,X as ct,a3 as ke,d as Hr,u as Kr}from"./index-BCjjBYBJ.js";import{M as Vr}from"./MusicControls-BOSgsNzd.js";import{I as wn}from"./info-DYOYTLrT.js";import{aO as Gr,aP as zr,aQ as Yr,an as _n,g as Wr,h as Mt,Q as Jr}from"./Stars-COGUq6Bn.js";import{A as Ze}from"./atom-DMVTdX-g.js";import{I as Xr}from"./image-7IhK0Aa0.js";import{M as Qr,T as Lt}from"./thermometer-CUWA36qW.js";import{S as Ut,C as Zr}from"./scale-sNLfvfOy.js";import{L as ei}from"./lightbulb-DL0r4faX.js";import{A as ti}from"./arrow-left-mt-2HVmN.js";import{S as qt}from"./search-CQsDsD9T.js";import"./volume-x-B-ug1wJo.js";import"./with-selector-DP4t3EUa.js";function ni(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}const Se={"alkali-metal":{color:"#FF6B6B",glow:"#FF6B6B80"},"alkaline-earth":{color:"#FFA94D",glow:"#FFA94D80"},"transition-metal":{color:"#FFD43B",glow:"#FFD43B80"},"post-transition":{color:"#69DB7C",glow:"#69DB7C80"},metalloid:{color:"#38D9A9",glow:"#38D9A980"},nonmetal:{color:"#4DABF7",glow:"#4DABF780"},halogen:{color:"#748FFC",glow:"#748FFC80"},"noble-gas":{color:"#DA77F2",glow:"#DA77F280"},lanthanide:{color:"#F783AC",glow:"#F783AC80"},actinide:{color:"#E599F7",glow:"#E599F780"},unknown:{color:"#868E96",glow:"#868E9680"}},En=[{atomicNumber:1,symbol:"H",name:"Hiđro",nameEn:"Hydrogen",atomicMass:1.008,category:"nonmetal",period:1,group:1,electronConfig:"1s¹",electronShells:[1],color:"#4DABF7",glowColor:"#4DABF780",description:"Hiđro là nguyên tố nhẹ nhất và phổ biến nhất trong vũ trụ, chiếm khoảng 75% khối lượng vật chất thông thường. Nó là thành phần chính của các ngôi sao và khí khổng lồ.",facts:["Hiđro là nguyên tố đầu tiên trong bảng tuần hoàn và nhẹ nhất trong tất cả các nguyên tố.","Mặt Trời chuyển đổi khoảng 600 triệu tấn hiđro thành heli mỗi giây.","Hiđro lỏng được sử dụng làm nhiên liệu tên lửa cho các tàu vũ trụ NASA."],discoveryYear:1766,meltingPoint:-259.16,boilingPoint:-252.87,density:8988e-8,state:"gas",infographicPath:"element/Hydrogen.jpeg"},{atomicNumber:2,symbol:"He",name:"Heli",nameEn:"Helium",atomicMass:4.0026,category:"noble-gas",period:1,group:18,electronConfig:"1s²",electronShells:[2],color:"#DA77F2",glowColor:"#DA77F280",description:"Heli là khí hiếm nhẹ thứ hai, không màu, không mùi, không vị và không độc. Nó có điểm sôi thấp nhất trong tất cả các nguyên tố.",facts:["Heli được phát hiện trên Mặt Trời trước khi tìm thấy trên Trái Đất (tên gọi từ thần Mặt Trời Helios).","Heli là nguyên tố duy nhất không thể đông đặc ở áp suất thường, dù ở nhiệt độ 0 tuyệt đối.","Bóng bay heli bay lên vì heli nhẹ hơn không khí khoảng 7 lần."],discoveryYear:1868,meltingPoint:-272.2,boilingPoint:-268.93,density:1785e-7,state:"gas",infographicPath:"element/Helium.jpeg"},{atomicNumber:3,symbol:"Li",name:"Liti",nameEn:"Lithium",atomicMass:6.94,category:"alkali-metal",period:2,group:1,electronConfig:"[He] 2s¹",electronShells:[2,1],color:"#FF6B6B",glowColor:"#FF6B6B80",description:"Liti là kim loại nhẹ nhất, mềm, màu trắng bạc. Nó phản ứng mạnh với nước và được sử dụng rộng rãi trong pin sạc.",facts:["Liti nhẹ đến mức có thể nổi trên dầu và nước.","Pin lithium-ion trong điện thoại và xe điện sử dụng liti làm thành phần chính.","Liti được sử dụng trong điều trị rối loạn lưỡng cực từ những năm 1970."],discoveryYear:1817,meltingPoint:180.54,boilingPoint:1342,density:.534,state:"solid",infographicPath:"element/Lithium.jpeg"},{atomicNumber:4,symbol:"Be",name:"Berili",nameEn:"Beryllium",atomicMass:9.0122,category:"alkaline-earth",period:2,group:2,electronConfig:"[He] 2s²",electronShells:[2,2],color:"#FFA94D",glowColor:"#FFA94D80",description:"Berili là kim loại kiềm thổ nhẹ, cứng, có màu xám thép. Nó được sử dụng trong hợp kim cho các ứng dụng hàng không vũ trụ.",facts:["Berili cứng như thép nhưng nhẹ hơn 35%.","Gương của Kính viễn vọng Không gian James Webb được làm từ berili mạ vàng.","Berili và hợp chất của nó rất độc, có thể gây bệnh phổi nghiêm trọng."],discoveryYear:1798,meltingPoint:1287,boilingPoint:2469,density:1.85,state:"solid",infographicPath:"element/Beryllium.jpeg"},{atomicNumber:5,symbol:"B",name:"Bo",nameEn:"Boron",atomicMass:10.81,category:"metalloid",period:2,group:13,electronConfig:"[He] 2s² 2p¹",electronShells:[2,3],color:"#38D9A9",glowColor:"#38D9A980",description:"Bo là á kim có độ cứng cao, được sử dụng trong thủy tinh borosilicate (Pyrex) và các vật liệu siêu cứng.",facts:["Bo là một trong những nguyên tố cứng nhất, chỉ sau carbon (kim cương).","Axit boric từ bo được dùng làm thuốc nhỏ mắt và chất bảo quản.","Bo được tạo ra trong các vụ nổ siêu tân tinh, không phải trong các ngôi sao thông thường."],discoveryYear:1808,meltingPoint:2076,boilingPoint:3927,density:2.34,state:"solid",infographicPath:"element/Boron.jpeg"},{atomicNumber:6,symbol:"C",name:"Cacbon",nameEn:"Carbon",atomicMass:12.011,category:"nonmetal",period:2,group:14,electronConfig:"[He] 2s² 2p²",electronShells:[2,4],color:"#4DABF7",glowColor:"#4DABF780",description:"Cacbon là nền tảng của sự sống và hóa học hữu cơ. Nó tồn tại ở nhiều dạng thù hình như kim cương, than chì, và graphene.",facts:["Kim cương và than chì đều là cacbon nguyên chất, chỉ khác nhau về cấu trúc tinh thể.","Cơ thể người chứa khoảng 18% cacbon theo khối lượng.","Graphene (một lớp cacbon) mỏng hơn giấy 1 triệu lần nhưng cứng hơn thép 200 lần."],discoveryYear:-3750,meltingPoint:3550,boilingPoint:4027,density:2.267,state:"solid",infographicPath:"element/Carbon.jpeg"},{atomicNumber:7,symbol:"N",name:"Nitơ",nameEn:"Nitrogen",atomicMass:14.007,category:"nonmetal",period:2,group:15,electronConfig:"[He] 2s² 2p³",electronShells:[2,5],color:"#4DABF7",glowColor:"#4DABF780",description:"Nitơ chiếm 78% khí quyển Trái Đất. Nó là thành phần thiết yếu của protein, DNA và nhiều phân tử sinh học.",facts:["Mỗi hơi thở bạn hít vào chứa khoảng 78% nitơ.","Nitơ lỏng có nhiệt độ -196°C, dùng để bảo quản tế bào và làm kem lạnh tức thì.","Phân bón nitơ giúp cây trồng phát triển, nuôi sống hàng tỷ người."],discoveryYear:1772,meltingPoint:-210.1,boilingPoint:-195.79,density:.0012506,state:"gas",infographicPath:"element/Nitrogen.jpeg"},{atomicNumber:8,symbol:"O",name:"Oxi",nameEn:"Oxygen",atomicMass:15.999,category:"nonmetal",period:2,group:16,electronConfig:"[He] 2s² 2p⁴",electronShells:[2,6],color:"#4DABF7",glowColor:"#4DABF780",description:"Oxi là nguyên tố thiết yếu cho sự sống, chiếm 21% khí quyển và 65% khối lượng cơ thể người (chủ yếu trong nước).",facts:["Oxi lỏng có màu xanh nhạt và có từ tính.","Ozon (O₃) trong tầng bình lưu bảo vệ Trái Đất khỏi tia UV có hại.","Lửa cần oxi để cháy - không có oxi, không thể có ngọn lửa."],discoveryYear:1774,meltingPoint:-218.79,boilingPoint:-182.96,density:.001429,state:"gas",infographicPath:"element/Oxygen.jpeg"},{atomicNumber:9,symbol:"F",name:"Flo",nameEn:"Fluorine",atomicMass:18.998,category:"halogen",period:2,group:17,electronConfig:"[He] 2s² 2p⁵",electronShells:[2,7],color:"#748FFC",glowColor:"#748FFC80",description:"Flo là nguyên tố có tính phản ứng mạnh nhất, có thể phản ứng với hầu hết mọi chất. Nó được thêm vào kem đánh răng để ngăn sâu răng.",facts:["Flo phản ứng mạnh đến mức thậm chí có thể ăn mòn thủy tinh.","Teflon (chống dính) được làm từ hợp chất flo.","Fluoride trong nước uống và kem đánh răng giúp răng chắc khỏe hơn."],discoveryYear:1886,meltingPoint:-219.67,boilingPoint:-188.11,density:.001696,state:"gas",infographicPath:"element/Fluorine.jpeg"},{atomicNumber:10,symbol:"Ne",name:"Neon",nameEn:"Neon",atomicMass:20.18,category:"noble-gas",period:2,group:18,electronConfig:"[He] 2s² 2p⁶",electronShells:[2,8],color:"#DA77F2",glowColor:"#DA77F280",description:"Neon là khí hiếm phát sáng màu đỏ cam rực rỡ khi có dòng điện đi qua. Đèn neon được phát minh năm 1910.",facts:['Đèn "neon" màu khác thực ra dùng các khí khác nhau, chỉ màu đỏ cam là neon thật.',"Neon hiếm trên Trái Đất nhưng là nguyên tố phổ biến thứ 5 trong vũ trụ.","Neon được dùng trong laser helium-neon cho máy quét mã vạch."],discoveryYear:1898,meltingPoint:-248.59,boilingPoint:-246.08,density:8999e-7,state:"gas",infographicPath:"element/Neon.jpeg"},{atomicNumber:11,symbol:"Na",name:"Natri",nameEn:"Sodium",atomicMass:22.99,category:"alkali-metal",period:3,group:1,electronConfig:"[Ne] 3s¹",electronShells:[2,8,1],color:"#FF6B6B",glowColor:"#FF6B6B80",description:"Natri là kim loại kiềm mềm, màu trắng bạc, phản ứng mãnh liệt với nước tạo ngọn lửa vàng. Nó là thành phần của muối ăn (NaCl).",facts:["Natri phản ứng với nước mạnh đến mức có thể nổ.","Đèn đường màu vàng cam sử dụng hơi natri.","Cơ thể người cần natri để dẫn truyền xung thần kinh và co cơ."],discoveryYear:1807,meltingPoint:97.794,boilingPoint:882.94,density:.971,state:"solid",infographicPath:"element/Sodium.jpeg"},{atomicNumber:12,symbol:"Mg",name:"Magie",nameEn:"Magnesium",atomicMass:24.305,category:"alkaline-earth",period:3,group:2,electronConfig:"[Ne] 3s²",electronShells:[2,8,2],color:"#FFA94D",glowColor:"#FFA94D80",description:"Magie là kim loại nhẹ, bền, được sử dụng trong hợp kim máy bay và ô tô. Nó cháy với ngọn lửa trắng chói.",facts:["Pháo sáng và pháo hoa trắng sử dụng magie vì nó cháy rất sáng.","Magie là khoáng chất thiết yếu cho hơn 300 phản ứng enzyme trong cơ thể.","Nước biển chứa khoảng 0.13% magie."],discoveryYear:1755,meltingPoint:650,boilingPoint:1090,density:1.738,state:"solid",infographicPath:"element/Magnesium.jpeg"},{atomicNumber:13,symbol:"Al",name:"Nhôm",nameEn:"Aluminum",atomicMass:26.982,category:"post-transition",period:3,group:13,electronConfig:"[Ne] 3s² 3p¹",electronShells:[2,8,3],color:"#69DB7C",glowColor:"#69DB7C80",description:"Nhôm là kim loại phổ biến nhất trong vỏ Trái Đất, nhẹ, bền, chống ăn mòn. Nó được dùng trong lon nước, máy bay, và nhiều ứng dụng khác.",facts:["Từng có thời nhôm quý hơn vàng - Napoleon III dùng đĩa nhôm trong tiệc hoàng gia.","Tháp Washington được đặt một khối nhôm ở đỉnh vào năm 1884.","Nhôm tái chế tiết kiệm 95% năng lượng so với sản xuất từ quặng."],discoveryYear:1825,meltingPoint:660.32,boilingPoint:2519,density:2.7,state:"solid",infographicPath:"element/Aluminum.jpeg"},{atomicNumber:14,symbol:"Si",name:"Silic",nameEn:"Silicon",atomicMass:28.085,category:"metalloid",period:3,group:14,electronConfig:"[Ne] 3s² 3p²",electronShells:[2,8,4],color:"#38D9A9",glowColor:"#38D9A980",description:"Silic là nền tảng của công nghệ bán dẫn và chip máy tính. Nó là nguyên tố phổ biến thứ hai trong vỏ Trái Đất sau oxi.",facts:["Thung lũng Silicon ở California được đặt tên theo nguyên tố này.","Cát biển chủ yếu là silic dioxide (SiO₂).","Mỗi smartphone chứa hàng tỷ transistor làm từ silic."],discoveryYear:1824,meltingPoint:1414,boilingPoint:3265,density:2.3296,state:"solid",infographicPath:"element/Silicon.jpeg"},{atomicNumber:15,symbol:"P",name:"Photpho",nameEn:"Phosphorus",atomicMass:30.974,category:"nonmetal",period:3,group:15,electronConfig:"[Ne] 3s² 3p³",electronShells:[2,8,5],color:"#4DABF7",glowColor:"#4DABF780",description:"Photpho có nhiều dạng thù hình: trắng (độc, phát sáng), đỏ (an toàn hơn), đen. Nó thiết yếu cho DNA, ATP và xương.",facts:["Photpho trắng phát sáng trong bóng tối và tự bốc cháy trong không khí.","Đầu que diêm chứa photpho đỏ.","Phân lân (photphat) là loại phân bón quan trọng nhất cho nông nghiệp."],discoveryYear:1669,meltingPoint:44.15,boilingPoint:280.5,density:1.82,state:"solid",infographicPath:"element/Phosphorus.jpeg"},{atomicNumber:16,symbol:"S",name:"Lưu huỳnh",nameEn:"Sulfur",atomicMass:32.06,category:"nonmetal",period:3,group:16,electronConfig:"[Ne] 3s² 3p⁴",electronShells:[2,8,6],color:"#4DABF7",glowColor:"#4DABF780",description:"Lưu huỳnh là nguyên tố màu vàng với mùi đặc trưng (trứng thối). Nó được sử dụng trong sản xuất axit sulfuric và lưu hóa cao su.",facts:['Mùi "trứng thối" thực chất là khí hydrogen sulfide (H₂S).',"Núi lửa phun ra lưu huỳnh, tạo ra các cảnh quan vàng rực.","Thuốc súng đen cổ điển chứa lưu huỳnh, than củi và kali nitrat."],discoveryYear:-2e3,meltingPoint:115.21,boilingPoint:444.6,density:2.067,state:"solid",infographicPath:"element/Sulfur.jpeg"},{atomicNumber:17,symbol:"Cl",name:"Clo",nameEn:"Chlorine",atomicMass:35.45,category:"halogen",period:3,group:17,electronConfig:"[Ne] 3s² 3p⁵",electronShells:[2,8,7],color:"#748FFC",glowColor:"#748FFC80",description:"Clo là khí màu vàng lục có mùi hăng, được dùng để khử trùng nước uống và bể bơi. Nó là thành phần của muối ăn.",facts:["Clo được sử dụng làm vũ khí hóa học trong Thế chiến I.",'Mùi "bể bơi" không phải do clo mà do chloramine (clo + mồ hôi/nước tiểu).',"Clo khử trùng nước đã cứu sống hàng triệu người khỏi bệnh tả và thương hàn."],discoveryYear:1774,meltingPoint:-101.5,boilingPoint:-34.04,density:.003214,state:"gas",infographicPath:"element/Chlorine.jpeg"},{atomicNumber:18,symbol:"Ar",name:"Argon",nameEn:"Argon",atomicMass:39.948,category:"noble-gas",period:3,group:18,electronConfig:"[Ne] 3s² 3p⁶",electronShells:[2,8,8],color:"#DA77F2",glowColor:"#DA77F280",description:'Argon là khí hiếm phổ biến nhất trong khí quyển (0.93%). Tên của nó có nghĩa là "lười biếng" vì nó gần như không phản ứng.',facts:["Bóng đèn sợi đốt chứa argon để ngăn dây tóc bị oxy hóa.","Argon được dùng trong hàn MIG/TIG để bảo vệ mối hàn.","Các cửa sổ kính cách nhiệt thường chứa argon giữa hai lớp kính."],discoveryYear:1894,meltingPoint:-189.34,boilingPoint:-185.85,density:.0017837,state:"gas",infographicPath:"element/Argon.jpeg"},{atomicNumber:19,symbol:"K",name:"Kali",nameEn:"Potassium",atomicMass:39.098,category:"alkali-metal",period:4,group:1,electronConfig:"[Ar] 4s¹",electronShells:[2,8,8,1],color:"#FF6B6B",glowColor:"#FF6B6B80",description:"Kali là kim loại kiềm mềm, thiết yếu cho cơ thể sống. Nó phản ứng mãnh liệt với nước, tạo ngọn lửa tím.",facts:["Chuối nổi tiếng giàu kali - nhưng bơ còn chứa nhiều hơn.","Kali rất quan trọng cho nhịp tim đều đặn và chức năng cơ.",'Ký hiệu K đến từ tên Latin "Kalium".'],discoveryYear:1807,meltingPoint:63.5,boilingPoint:759,density:.862,state:"solid",infographicPath:"element/Potassium.jpeg"},{atomicNumber:20,symbol:"Ca",name:"Canxi",nameEn:"Calcium",atomicMass:40.078,category:"alkaline-earth",period:4,group:2,electronConfig:"[Ar] 4s²",electronShells:[2,8,8,2],color:"#FFA94D",glowColor:"#FFA94D80",description:"Canxi là khoáng chất phổ biến nhất trong cơ thể người, chiếm khoảng 2% trọng lượng cơ thể. Nó chủ yếu có trong xương và răng.",facts:["99% canxi trong cơ thể nằm ở xương và răng.","Đá vôi, đá phite cẩm thạch, và vỏ sò đều là canxi carbonat.","Pháo hoa màu cam sử dụng hợp chất canxi."],discoveryYear:1808,meltingPoint:842,boilingPoint:1484,density:1.54,state:"solid",infographicPath:"element/Calcium.jpeg"},{atomicNumber:21,symbol:"Sc",name:"Scandi",nameEn:"Scandium",atomicMass:44.956,category:"transition-metal",period:4,group:3,electronConfig:"[Ar] 3d¹ 4s²",electronShells:[2,8,9,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Scandi là kim loại chuyển tiếp nhẹ, hiếm và đắt đỏ. Nó được dùng trong hợp kim nhôm cao cấp cho máy bay và xe đạp đua.",facts:["Scandi được đặt tên theo Scandinavia, nơi nó được phát hiện trong quặng.","Gậy bóng chày và khung xe đạp cao cấp dùng hợp kim scandi-nhôm.","Đèn hơi thủy ngân cường độ cao (HMI) trong đèn sân vận động dùng scandi."],discoveryYear:1879,meltingPoint:1541,boilingPoint:2836,density:2.989,state:"solid",infographicPath:"element/Scandium.jpeg"},{atomicNumber:22,symbol:"Ti",name:"Titan",nameEn:"Titanium",atomicMass:47.867,category:"transition-metal",period:4,group:4,electronConfig:"[Ar] 3d² 4s²",electronShells:[2,8,10,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Titan là kim loại có tỷ lệ độ bền/trọng lượng cao nhất, chống ăn mòn tuyệt vời. Nó được dùng trong máy bay, tàu vũ trụ, và cấy ghép y tế.",facts:["Titan cứng như thép nhưng nhẹ hơn 45%.","Titan được đặt theo tên các vị thần Titan trong thần thoại Hy Lạp.","Titan dioxide (TiO₂) làm kem chống nắng trắng và sơn trắng."],discoveryYear:1791,meltingPoint:1668,boilingPoint:3287,density:4.54,state:"solid",infographicPath:"element/Titanium.jpeg"},{atomicNumber:23,symbol:"V",name:"Vanadi",nameEn:"Vanadium",atomicMass:50.942,category:"transition-metal",period:4,group:5,electronConfig:"[Ar] 3d³ 4s²",electronShells:[2,8,11,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Vanadi là kim loại chuyển tiếp cứng, màu xám bạc. Nó được thêm vào thép để tăng độ bền và khả năng chịu nhiệt.",facts:["Vanadi được đặt theo tên nữ thần sắc đẹp Vanadis (Freya) của Bắc Âu.","Thép vanadi được dùng trong lò xo, bánh răng và dụng cụ cắt.","Hợp chất vanadi có nhiều màu đẹp: xanh, xanh lá, vàng, tím."],discoveryYear:1801,meltingPoint:1910,boilingPoint:3407,density:6.11,state:"solid",infographicPath:"element/Vanadium.jpeg"},{atomicNumber:24,symbol:"Cr",name:"Crom",nameEn:"Chromium",atomicMass:51.996,category:"transition-metal",period:4,group:6,electronConfig:"[Ar] 3d⁵ 4s¹",electronShells:[2,8,13,1],color:"#FFD43B",glowColor:"#FFD43B80",description:'Crom là kim loại sáng bóng, cứng, được dùng để mạ kim loại và trong thép không gỉ. Tên của nó có nghĩa là "màu sắc".',facts:["Thép không gỉ (inox) chứa ít nhất 10.5% crom.","Ngọc lục bảo có màu xanh là do có crom trong tinh thể.","Mạ crom tạo lớp phủ sáng bóng như gương cho xe hơi và đồ nội thất."],discoveryYear:1797,meltingPoint:1907,boilingPoint:2671,density:7.15,state:"solid",infographicPath:"element/Chromium.jpeg"},{atomicNumber:25,symbol:"Mn",name:"Mangan",nameEn:"Manganese",atomicMass:54.938,category:"transition-metal",period:4,group:7,electronConfig:"[Ar] 3d⁵ 4s²",electronShells:[2,8,13,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Mangan là kim loại cứng, giòn, thiết yếu cho sản xuất thép. Nó cũng là vi chất dinh dưỡng cần thiết cho cơ thể.",facts:["90% mangan khai thác được dùng trong sản xuất thép.","Pin kiềm thông thường chứa mangan dioxide.","Mangan giúp cơ thể chuyển hóa các chất dinh dưỡng và hình thành xương."],discoveryYear:1774,meltingPoint:1246,boilingPoint:2061,density:7.44,state:"solid",infographicPath:"element/Manganese.jpeg"},{atomicNumber:26,symbol:"Fe",name:"Sắt",nameEn:"Iron",atomicMass:55.845,category:"transition-metal",period:4,group:8,electronConfig:"[Ar] 3d⁶ 4s²",electronShells:[2,8,14,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Sắt là kim loại phổ biến nhất trên Trái Đất theo khối lượng. Nó là thành phần chính của lõi Trái Đất và máu người.",facts:["Lõi Trái Đất chứa đủ sắt để tạo 3 hành tinh cỡ Sao Hỏa.","Hemoglobin trong máu chứa sắt, khiến máu có màu đỏ.","Sắt được tạo ra trong các ngôi sao khổng lồ và siêu tân tinh."],discoveryYear:-5e3,meltingPoint:1538,boilingPoint:2862,density:7.874,state:"solid",infographicPath:"element/Iron.jpeg"},{atomicNumber:27,symbol:"Co",name:"Coban",nameEn:"Cobalt",atomicMass:58.933,category:"transition-metal",period:4,group:9,electronConfig:"[Ar] 3d⁷ 4s²",electronShells:[2,8,15,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Coban là kim loại màu xám bạc với ánh xanh. Nó được dùng trong hợp kim chịu nhiệt, pin sạc, và tạo màu xanh cobalt.",facts:["Màu xanh cobalt đã được dùng từ thời Ai Cập cổ đại.","Coban là thành phần quan trọng của vitamin B12.","Pin lithium-ion cho xe điện và điện thoại chứa coban."],discoveryYear:1735,meltingPoint:1495,boilingPoint:2927,density:8.86,state:"solid",infographicPath:"element/Cobalt.jpeg"},{atomicNumber:28,symbol:"Ni",name:"Niken",nameEn:"Nickel",atomicMass:58.693,category:"transition-metal",period:4,group:10,electronConfig:"[Ar] 3d⁸ 4s²",electronShells:[2,8,16,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Niken là kim loại sáng bóng, chống ăn mòn, được dùng trong đồng xu, thép không gỉ, và mạ điện.",facts:['Đồng xu 5 cent Mỹ gọi là "nickel" dù chỉ chứa 25% niken.','Niken từng được gọi là "đồng của quỷ" vì rất khó tinh luyện.',"Thiên thạch sắt thường chứa hợp kim sắt-niken."],discoveryYear:1751,meltingPoint:1455,boilingPoint:2913,density:8.912,state:"solid",infographicPath:"element/Nickel.jpeg"},{atomicNumber:29,symbol:"Cu",name:"Đồng",nameEn:"Copper",atomicMass:63.546,category:"transition-metal",period:4,group:11,electronConfig:"[Ar] 3d¹⁰ 4s¹",electronShells:[2,8,18,1],color:"#FFD43B",glowColor:"#FFD43B80",description:"Đồng là kim loại màu đỏ cam, dẫn điện và dẫn nhiệt xuất sắc. Nó là một trong những kim loại đầu tiên được con người sử dụng.",facts:["Tượng Nữ thần Tự do được bọc 80 tấn đồng.","Đồng có tính kháng khuẩn tự nhiên - vi khuẩn khó sống trên bề mặt đồng.","Dây điện trong nhà bạn hầu hết được làm từ đồng."],discoveryYear:-9e3,meltingPoint:1084.62,boilingPoint:2562,density:8.96,state:"solid",infographicPath:"element/Copper.png"},{atomicNumber:30,symbol:"Zn",name:"Kẽm",nameEn:"Zinc",atomicMass:65.38,category:"transition-metal",period:4,group:12,electronConfig:"[Ar] 3d¹⁰ 4s²",electronShells:[2,8,18,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Kẽm là kim loại màu xám xanh, được dùng phổ biến trong mạ kẽm (galvanize) chống gỉ và trong hợp kim đồng thau.",facts:["Pin kẽm-carbon là loại pin thông thường nhất (pin AA, AAA).","Kẽm rất quan trọng cho hệ miễn dịch và chữa lành vết thương.","Kem chống nắng chứa kẽm oxide tạo lớp chắn vật lý chống UV."],discoveryYear:1746,meltingPoint:419.53,boilingPoint:907,density:7.134,state:"solid",infographicPath:"element/Zinc.png"},{atomicNumber:31,symbol:"Ga",name:"Gali",nameEn:"Gallium",atomicMass:69.723,category:"post-transition",period:4,group:13,electronConfig:"[Ar] 3d¹⁰ 4s² 4p¹",electronShells:[2,8,18,3],color:"#69DB7C",glowColor:"#69DB7C80",description:"Gali là kim loại mềm với điểm nóng chảy thấp (29.76°C), có thể tan chảy trong tay.",facts:["Gali tan chảy khi nắm trong tay vì điểm nóng chảy chỉ 29.76°C.","Chip LED và điện thoại di động sử dụng gali.","Gali không tồn tại tự do trong tự nhiên."],discoveryYear:1875,meltingPoint:29.76,boilingPoint:2204,density:5.907,state:"solid",infographicPath:"element/Gallium.png"},{atomicNumber:32,symbol:"Ge",name:"Gecmani",nameEn:"Germanium",atomicMass:72.63,category:"metalloid",period:4,group:14,electronConfig:"[Ar] 3d¹⁰ 4s² 4p²",electronShells:[2,8,18,4],color:"#38D9A9",glowColor:"#38D9A980",description:"Gecmani là á kim quan trọng trong công nghệ bán dẫn. Transistor đầu tiên được làm từ germanium.",facts:["Transistor đầu tiên (1947) được làm từ germanium.","Gecmani được đặt tên theo nước Đức.","Cáp quang và hệ thống hồng ngoại sử dụng germanium."],discoveryYear:1886,meltingPoint:938.25,boilingPoint:2833,density:5.323,state:"solid",infographicPath:"element/Germanium.png"},{atomicNumber:33,symbol:"As",name:"Asen",nameEn:"Arsenic",atomicMass:74.922,category:"metalloid",period:4,group:15,electronConfig:"[Ar] 3d¹⁰ 4s² 4p³",electronShells:[2,8,18,5],color:"#38D9A9",glowColor:"#38D9A980",description:'Asen là á kim nổi tiếng vì độc tính. Trong lịch sử, nó được gọi là "vua của các chất độc".',facts:["Asen từng được dùng làm thuốc độc vì không màu, không mùi, không vị.","Màu xanh Paris thời Victoria chứa asen độc.","Một lượng nhỏ asen được thêm vào hợp kim chì."],discoveryYear:1250,meltingPoint:817,boilingPoint:614,density:5.776,state:"solid",infographicPath:"element/Arsenic.png"},{atomicNumber:34,symbol:"Se",name:"Selen",nameEn:"Selenium",atomicMass:78.971,category:"nonmetal",period:4,group:16,electronConfig:"[Ar] 3d¹⁰ 4s² 4p⁴",electronShells:[2,8,18,6],color:"#4DABF7",glowColor:"#4DABF780",description:"Selen là phi kim có tính dẫn điện thay đổi theo ánh sáng. Nó là vi chất dinh dưỡng thiết yếu.",facts:["Selen được đặt theo tên Mặt Trăng (Selene).","Tế bào quang điện đầu tiên sử dụng selen.","Dầu gội trị gàu thường chứa selenium sulfide."],discoveryYear:1817,meltingPoint:221,boilingPoint:685,density:4.809,state:"solid",infographicPath:"element/Selenium.png"},{atomicNumber:35,symbol:"Br",name:"Brom",nameEn:"Bromine",atomicMass:79.904,category:"halogen",period:4,group:17,electronConfig:"[Ar] 3d¹⁰ 4s² 4p⁵",electronShells:[2,8,18,7],color:"#748FFC",glowColor:"#748FFC80",description:"Brom là halogen duy nhất tồn tại dạng lỏng ở nhiệt độ phòng. Nó có màu nâu đỏ và mùi hăng.",facts:["Brom là một trong hai nguyên tố lỏng ở nhiệt độ phòng (cùng với thủy ngân).",'Tên brom có nghĩa là "hôi thối" trong tiếng Hy Lạp.',"Chất chống cháy thường chứa brom."],discoveryYear:1826,meltingPoint:-7.2,boilingPoint:58.8,density:3.122,state:"liquid",infographicPath:"element/Bromine.png"},{atomicNumber:36,symbol:"Kr",name:"Kripton",nameEn:"Krypton",atomicMass:83.798,category:"noble-gas",period:4,group:18,electronConfig:"[Ar] 3d¹⁰ 4s² 4p⁶",electronShells:[2,8,18,8],color:"#DA77F2",glowColor:"#DA77F280",description:'Kripton là khí hiếm không màu, phát sáng trắng khi có điện. Tên của nó có nghĩa là "ẩn giấu".',facts:["Superman yếu đuối trước Kryptonite, nhưng kripton thật hoàn toàn vô hại.","Đèn flash máy ảnh tốc độ cao sử dụng khí kripton.","Từ 1960-1983, mét được định nghĩa dựa trên bước sóng ánh sáng kripton."],discoveryYear:1898,meltingPoint:-157.36,boilingPoint:-153.22,density:.003733,state:"gas",infographicPath:"element/Krypton.png"},{atomicNumber:37,symbol:"Rb",name:"Rubidi",nameEn:"Rubidium",atomicMass:85.468,category:"alkali-metal",period:5,group:1,electronConfig:"[Kr] 5s¹",electronShells:[2,8,18,8,1],color:"#FF6B6B",glowColor:"#FF6B6B80",description:"Rubidi là kim loại kiềm mềm nhất và phản ứng mạnh nhất. Đồng hồ nguyên tử rubidi cực kỳ chính xác.",facts:["Rubidi được đặt tên theo màu đỏ đậm của vạch quang phổ.","Đồng hồ nguyên tử rubidi dùng trong GPS.","Rubidi bốc cháy ngay khi tiếp xúc không khí ẩm."],discoveryYear:1861,meltingPoint:39.31,boilingPoint:688,density:1.532,state:"solid",infographicPath:"element/Rubidium.png"},{atomicNumber:38,symbol:"Sr",name:"Stronti",nameEn:"Strontium",atomicMass:87.62,category:"alkaline-earth",period:5,group:2,electronConfig:"[Kr] 5s²",electronShells:[2,8,18,8,2],color:"#FFA94D",glowColor:"#FFA94D80",description:"Stronti là kim loại kiềm thổ mềm. Hợp chất của nó tạo màu đỏ tươi trong pháo hoa.",facts:["Pháo hoa màu đỏ sáng sử dụng hợp chất stronti.","Strontium-90 là sản phẩm phóng xạ nguy hiểm.","Stronti được đặt tên theo làng Strontian ở Scotland."],discoveryYear:1790,meltingPoint:777,boilingPoint:1382,density:2.64,state:"solid",infographicPath:"element/Strontium.png"},{atomicNumber:39,symbol:"Y",name:"Ytri",nameEn:"Yttrium",atomicMass:88.906,category:"transition-metal",period:5,group:3,electronConfig:"[Kr] 4d¹ 5s²",electronShells:[2,8,18,9,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Ytri là kim loại chuyển tiếp màu bạc, được dùng trong LED trắng và laser YAG.",facts:["Ytri được đặt tên theo làng Ytterby ở Thụy Điển.","TV màn hình CRT sử dụng ytri để tạo màu đỏ.","Laser YAG dùng trong phẫu thuật mắt."],discoveryYear:1794,meltingPoint:1526,boilingPoint:3345,density:4.469,state:"solid",infographicPath:"element/Yttrium.png"},{atomicNumber:40,symbol:"Zr",name:"Zirconi",nameEn:"Zirconium",atomicMass:91.224,category:"transition-metal",period:5,group:4,electronConfig:"[Kr] 4d² 5s²",electronShells:[2,8,18,10,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Zirconi là kim loại sáng bóng, chống ăn mòn, được dùng trong lò phản ứng hạt nhân.",facts:["Cubic zirconia (CZ) là zirconi dioxide - kim cương nhân tạo phổ biến.","Vỏ thanh nhiên liệu hạt nhân làm từ hợp kim zirconi.","Răng sứ zirconia ngày càng phổ biến."],discoveryYear:1789,meltingPoint:1855,boilingPoint:4409,density:6.506,state:"solid",infographicPath:"element/Zirconium.png"},{atomicNumber:41,symbol:"Nb",name:"Niobi",nameEn:"Niobium",atomicMass:92.906,category:"transition-metal",period:5,group:5,electronConfig:"[Kr] 4d⁴ 5s¹",electronShells:[2,8,18,12,1],color:"#FFD43B",glowColor:"#FFD43B80",description:"Niobi là kim loại mềm, dẻo, được dùng trong hợp kim siêu dẫn và thép đặc biệt.",facts:["Niobi được đặt theo Niobe trong thần thoại Hy Lạp.","Nam châm MRI chứa hợp kim niobi-titan.","Brazil sản xuất khoảng 90% niobi thế giới."],discoveryYear:1801,meltingPoint:2477,boilingPoint:4744,density:8.57,state:"solid",infographicPath:"element/Niobium.png"},{atomicNumber:42,symbol:"Mo",name:"Molypden",nameEn:"Molybdenum",atomicMass:95.95,category:"transition-metal",period:5,group:6,electronConfig:"[Kr] 4d⁵ 5s¹",electronShells:[2,8,18,13,1],color:"#FFD43B",glowColor:"#FFD43B80",description:"Molypden là kim loại có điểm nóng chảy rất cao, được dùng trong thép hợp kim.",facts:["Molypden từng bị nhầm với chì.","Thép molypden được dùng trong vũ khí và xe bọc thép.","Molypden là vi chất quan trọng cho enzyme."],discoveryYear:1781,meltingPoint:2623,boilingPoint:4639,density:10.22,state:"solid",infographicPath:"element/Molybdenum.png"},{atomicNumber:43,symbol:"Tc",name:"Tecneti",nameEn:"Technetium",atomicMass:98,category:"transition-metal",period:5,group:7,electronConfig:"[Kr] 4d⁵ 5s²",electronShells:[2,8,18,13,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Tecneti là nguyên tố nhân tạo đầu tiên. Tất cả các đồng vị đều phóng xạ.",facts:['Tecneti có nghĩa là "nhân tạo" trong tiếng Hy Lạp.',"Tecneti-99m dùng phổ biến trong chẩn đoán y khoa.","Không có tecneti ổn định trong tự nhiên."],discoveryYear:1937,meltingPoint:2157,boilingPoint:4265,density:11.5,state:"solid",infographicPath:"element/Technetium.png"},{atomicNumber:44,symbol:"Ru",name:"Rutheni",nameEn:"Ruthenium",atomicMass:101.07,category:"transition-metal",period:5,group:8,electronConfig:"[Kr] 4d⁷ 5s¹",electronShells:[2,8,18,15,1],color:"#FFD43B",glowColor:"#FFD43B80",description:"Rutheni là kim loại nhóm platin, cứng, chống ăn mòn.",facts:["Rutheni được đặt tên theo Ruthenia (tên Latin của Nga).","Rutheni được thêm vào platin để tăng độ cứng.",'Bút Parker "51" sử dụng ngòi bút rutheni.'],discoveryYear:1844,meltingPoint:2334,boilingPoint:4150,density:12.37,state:"solid",infographicPath:"element/Ruthenium.png"},{atomicNumber:45,symbol:"Rh",name:"Rhodi",nameEn:"Rhodium",atomicMass:102.91,category:"transition-metal",period:5,group:9,electronConfig:"[Kr] 4d⁸ 5s¹",electronShells:[2,8,18,16,1],color:"#FFD43B",glowColor:"#FFD43B80",description:"Rhodi là một trong những kim loại quý hiếm và đắt nhất thế giới.",facts:["Rhodi có thể đắt hơn vàng 5-10 lần.","Bộ chuyển đổi xúc tác trong xe hơi chứa rhodi.","Rhodi được mạ lên đồ trang sức để tăng độ sáng."],discoveryYear:1803,meltingPoint:1964,boilingPoint:3695,density:12.41,state:"solid",infographicPath:"element/Rhodium.png"},{atomicNumber:46,symbol:"Pd",name:"Paladi",nameEn:"Palladium",atomicMass:106.42,category:"transition-metal",period:5,group:10,electronConfig:"[Kr] 4d¹⁰",electronShells:[2,8,18,18],color:"#FFD43B",glowColor:"#FFD43B80",description:"Paladi là kim loại nhóm platin, có thể hấp thụ hydro gấp 900 lần thể tích.",facts:["Paladi hấp thụ hydro gấp 900 lần thể tích.","Paladi được đặt tên theo tiểu hành tinh Pallas.","Nhiều bộ chuyển đổi xúc tác dùng paladi."],discoveryYear:1803,meltingPoint:1554.9,boilingPoint:2963,density:12.02,state:"solid",infographicPath:"element/Palladium.png"},{atomicNumber:47,symbol:"Ag",name:"Bạc",nameEn:"Silver",atomicMass:107.87,category:"transition-metal",period:5,group:11,electronConfig:"[Kr] 4d¹⁰ 5s¹",electronShells:[2,8,18,18,1],color:"#FFD43B",glowColor:"#FFD43B80",description:"Bạc là kim loại quý có độ dẫn điện và dẫn nhiệt cao nhất trong tất cả các kim loại.",facts:["Bạc dẫn điện tốt nhất trong tất cả các kim loại.","Bạc có tính kháng khuẩn tự nhiên.","Phim ảnh truyền thống sử dụng bạc halide."],discoveryYear:-5e3,meltingPoint:961.78,boilingPoint:2162,density:10.501,state:"solid",infographicPath:"element/Silver.png"},{atomicNumber:48,symbol:"Cd",name:"Cadimi",nameEn:"Cadmium",atomicMass:112.41,category:"transition-metal",period:5,group:12,electronConfig:"[Kr] 4d¹⁰ 5s²",electronShells:[2,8,18,18,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Cadimi là kim loại mềm, màu bạc xanh, độc hại. Nó được dùng trong pin NiCd.",facts:["Pin NiCd từng phổ biến trước pin lithium-ion.","Cadimi rất độc và gây bệnh Itai-itai ở Nhật Bản.","Màu vàng cadmium được Van Gogh sử dụng."],discoveryYear:1817,meltingPoint:321.07,boilingPoint:767,density:8.69,state:"solid",infographicPath:"element/Cadmium.png"},{atomicNumber:49,symbol:"In",name:"Indi",nameEn:"Indium",atomicMass:114.82,category:"post-transition",period:5,group:13,electronConfig:"[Kr] 4d¹⁰ 5s² 5p¹",electronShells:[2,8,18,18,3],color:"#69DB7C",glowColor:"#69DB7C80",description:"Indi là kim loại mềm, dẻo, được dùng trong màn hình cảm ứng và LCD.",facts:["Indi được đặt tên theo màu chàm (indigo).","Màn hình cảm ứng sử dụng indi tin oxide (ITO).","Indi mềm có thể để lại vết trên giấy như bút chì."],discoveryYear:1863,meltingPoint:156.6,boilingPoint:2072,density:7.31,state:"solid",infographicPath:"element/Indium.png"},{atomicNumber:50,symbol:"Sn",name:"Thiếc",nameEn:"Tin",atomicMass:118.71,category:"post-transition",period:5,group:14,electronConfig:"[Kr] 4d¹⁰ 5s² 5p²",electronShells:[2,8,18,18,4],color:"#69DB7C",glowColor:"#69DB7C80",description:"Thiếc là kim loại mềm, màu bạc, được dùng từ thời đồ đồng trong hàn và đồ hộp.",facts:["Lon đồ hộp được phủ thiếc để chống gỉ.","Hợp kim đồng-thiếc mở ra Thời đại Đồ Đồng.",'Thiếc tạo "tiếng kêu thiếc" khi bẻ cong.'],discoveryYear:-3500,meltingPoint:231.93,boilingPoint:2602,density:7.287,state:"solid",infographicPath:"element/Tin.png"},{atomicNumber:51,symbol:"Sb",name:"Antimon",nameEn:"Antimony",atomicMass:121.76,category:"metalloid",period:5,group:15,electronConfig:"[Kr] 4d¹⁰ 5s² 5p³",electronShells:[2,8,18,18,5],color:"#38D9A9",glowColor:"#38D9A980",description:"Antimon là á kim màu bạc, giòn. Nó được dùng trong hợp kim chì và chất chống cháy.",facts:["Phụ nữ Ai Cập cổ đại dùng antimon làm kẻ mắt.","Pin axit chì chứa hợp kim chì-antimon.","Ký hiệu Sb từ tên Latin Stibium."],discoveryYear:-3e3,meltingPoint:630.63,boilingPoint:1587,density:6.685,state:"solid",infographicPath:"element/Antimony.png"},{atomicNumber:52,symbol:"Te",name:"Telu",nameEn:"Tellurium",atomicMass:127.6,category:"metalloid",period:5,group:16,electronConfig:"[Kr] 4d¹⁰ 5s² 5p⁴",electronShells:[2,8,18,18,6],color:"#38D9A9",glowColor:"#38D9A980",description:"Telu là á kim hiếm, được đặt tên theo Trái Đất (Tellus). Nó được dùng trong pin mặt trời.",facts:["Telu hiếm hơn vàng trong vỏ Trái Đất.","Người tiếp xúc telu thường có hơi thở mùi tỏi.","Pin mặt trời cadmium telluride rất phổ biến."],discoveryYear:1782,meltingPoint:449.51,boilingPoint:988,density:6.232,state:"solid",infographicPath:"element/Tellurium.png"},{atomicNumber:53,symbol:"I",name:"Iot",nameEn:"Iodine",atomicMass:126.9,category:"halogen",period:5,group:17,electronConfig:"[Kr] 4d¹⁰ 5s² 5p⁵",electronShells:[2,8,18,18,7],color:"#748FFC",glowColor:"#748FFC80",description:"Iot là halogen rắn, màu tím đen, bốc hơi thành khí tím. Nó thiết yếu cho tuyến giáp.",facts:["Iot được thêm vào muối ăn để ngăn bệnh bướu cổ.","Dung dịch iot (thuốc đỏ) là chất khử trùng phổ biến.",'Tên iot có nghĩa là "màu tím" trong tiếng Hy Lạp.'],discoveryYear:1811,meltingPoint:113.7,boilingPoint:184.3,density:4.93,state:"solid",infographicPath:"element/Iodine.png"},{atomicNumber:54,symbol:"Xe",name:"Xenon",nameEn:"Xenon",atomicMass:131.29,category:"noble-gas",period:5,group:18,electronConfig:"[Kr] 4d¹⁰ 5s² 5p⁶",electronShells:[2,8,18,18,8],color:"#DA77F2",glowColor:"#DA77F280",description:"Xenon là khí hiếm nặng, phát sáng xanh dương khi có điện. Nó được dùng trong đèn pha xe hơi.",facts:['Xenon có nghĩa là "xa lạ" trong tiếng Hy Lạp.',"Đèn pha HID (xenon) sáng hơn đèn halogen.","Xenon được dùng làm thuốc gây mê an toàn."],discoveryYear:1898,meltingPoint:-111.75,boilingPoint:-108.12,density:.005887,state:"gas",infographicPath:"element/Xenon.png"},{atomicNumber:55,symbol:"Cs",name:"Xesi",nameEn:"Cesium",atomicMass:132.91,category:"alkali-metal",period:6,group:1,electronConfig:"[Xe] 6s¹",electronShells:[2,8,18,18,8,1],color:"#FF6B6B",glowColor:"#FF6B6B80",description:"Xesi là kim loại kiềm mềm nhất, phản ứng mãnh liệt. Đồng hồ nguyên tử xesi định nghĩa giây.",facts:["Giây được định nghĩa dựa trên dao động của nguyên tử xesi-133.","Xesi phản ứng mãnh liệt với nước, thậm chí với băng đá.","Xesi có điểm nóng chảy 28°C, gần tan trong tay."],discoveryYear:1860,meltingPoint:28.44,boilingPoint:671,density:1.873,state:"solid",infographicPath:"element/Cesium.png"},{atomicNumber:56,symbol:"Ba",name:"Bari",nameEn:"Barium",atomicMass:137.33,category:"alkaline-earth",period:6,group:2,electronConfig:"[Xe] 6s²",electronShells:[2,8,18,18,8,2],color:"#FFA94D",glowColor:"#FFA94D80",description:"Bari là kim loại kiềm thổ mềm. Bari sulfat dùng trong chụp X-quang đường tiêu hóa.",facts:['Tên bari có nghĩa là "nặng" trong tiếng Hy Lạp.','Bệnh nhân phải uống "bữa ăn bari" để chụp X-quang dạ dày.',"Pháo hoa màu xanh lá sáng sử dụng hợp chất bari."],discoveryYear:1808,meltingPoint:727,boilingPoint:1845,density:3.594,state:"solid",infographicPath:"element/Barium.png"},{atomicNumber:57,symbol:"La",name:"Lantan",nameEn:"Lanthanum",atomicMass:138.91,category:"lanthanide",period:6,group:0,electronConfig:"[Xe] 5d¹ 6s²",electronShells:[2,8,18,18,9,2],color:"#F783AC",glowColor:"#F783AC80",description:"Lantan là nguyên tố đầu tiên của nhóm đất hiếm. Nó được dùng trong pin NiMH và thấu kính máy ảnh.",facts:['Tên lantan có nghĩa là "ẩn giấu" vì khó tách biệt.',"Pin NiMH trong xe hybrid chứa hợp kim lantan.","Thấu kính máy ảnh cao cấp sử dụng thủy tinh lantan."],discoveryYear:1839,meltingPoint:920,boilingPoint:3464,density:6.145,state:"solid",infographicPath:"element/Lanthanum.png"},{atomicNumber:58,symbol:"Ce",name:"Xeri",nameEn:"Cerium",atomicMass:140.12,category:"lanthanide",period:6,group:0,electronConfig:"[Xe] 4f¹ 5d¹ 6s²",electronShells:[2,8,18,19,9,2],color:"#F783AC",glowColor:"#F783AC80",description:"Xeri là nguyên tố đất hiếm phổ biến nhất, dùng trong bộ chuyển đổi xúc tác và đá lửa bật lửa.",facts:["Xeri được đặt tên theo tiểu hành tinh Ceres.","Đá lửa bật lửa (ferrocerium) chứa xeri.","Xeri oxide được dùng để đánh bóng thủy tinh và gương."],discoveryYear:1803,meltingPoint:799,boilingPoint:3443,density:6.77,state:"solid",infographicPath:"element/Cerium.png"},{atomicNumber:59,symbol:"Pr",name:"Praseodymi",nameEn:"Praseodymium",atomicMass:140.91,category:"lanthanide",period:6,group:0,electronConfig:"[Xe] 4f³ 6s²",electronShells:[2,8,18,21,8,2],color:"#F783AC",glowColor:"#F783AC80",description:"Praseodymi là nguyên tố đất hiếm màu vàng lục, dùng trong nam châm và kính thợ hàn.",facts:['Tên có nghĩa là "sinh đôi xanh lá" trong tiếng Hy Lạp.',"Nam châm neodymium-praseodymium là nam châm vĩnh cửu mạnh nhất.","Kính thợ hàn sử dụng praseodymi để lọc tia UV."],discoveryYear:1885,meltingPoint:931,boilingPoint:3520,density:6.773,state:"solid",infographicPath:"element/Praseodymium.png"},{atomicNumber:60,symbol:"Nd",name:"Neodymi",nameEn:"Neodymium",atomicMass:144.24,category:"lanthanide",period:6,group:0,electronConfig:"[Xe] 4f⁴ 6s²",electronShells:[2,8,18,22,8,2],color:"#F783AC",glowColor:"#F783AC80",description:"Neodymi tạo ra nam châm vĩnh cửu mạnh nhất thế giới, có trong ổ cứng, tai nghe và động cơ điện.",facts:["Nam châm neodymium mạnh có thể gây thương tích nếu bất cẩn.","Mỗi động cơ xe điện Tesla chứa 1-2 kg neodymium.","Laser neodymium được dùng trong phẫu thuật và công nghiệp."],discoveryYear:1885,meltingPoint:1024,boilingPoint:3074,density:7.007,state:"solid",infographicPath:"element/Neodymium.jpeg"},{atomicNumber:61,symbol:"Pm",name:"Prometi",nameEn:"Promethium",atomicMass:145,category:"lanthanide",period:6,group:0,electronConfig:"[Xe] 4f⁵ 6s²",electronShells:[2,8,18,23,8,2],color:"#F783AC",glowColor:"#F783AC80",description:"Prometi là nguyên tố đất hiếm duy nhất không có đồng vị ổn định. Nó phóng xạ và hiếm.",facts:["Prometi được đặt theo thần Prometheus đã mang lửa cho loài người.","Prometi từng dùng trong sơn phát sáng của kim đồng hồ.","Tất cả prometi đều phóng xạ, chỉ được tạo trong lò phản ứng."],discoveryYear:1945,meltingPoint:1042,boilingPoint:3e3,density:7.26,state:"solid",infographicPath:"element/Promethium.jpeg"},{atomicNumber:62,symbol:"Sm",name:"Samari",nameEn:"Samarium",atomicMass:150.36,category:"lanthanide",period:6,group:0,electronConfig:"[Xe] 4f⁶ 6s²",electronShells:[2,8,18,24,8,2],color:"#F783AC",glowColor:"#F783AC80",description:"Samari được dùng trong nam châm samaria-coban chịu nhiệt cao, dùng trong hàng không vũ trụ.",facts:["Samari được đặt tên theo khoáng vật samarskite.","Nam châm samari-coban chịu được nhiệt độ cao hơn neodymium.","Samari-153 được dùng điều trị đau xương do ung thư."],discoveryYear:1879,meltingPoint:1072,boilingPoint:1900,density:7.52,state:"solid",infographicPath:"element/Samarium.jpeg"},{atomicNumber:63,symbol:"Eu",name:"Europi",nameEn:"Europium",atomicMass:151.96,category:"lanthanide",period:6,group:0,electronConfig:"[Xe] 4f⁷ 6s²",electronShells:[2,8,18,25,8,2],color:"#F783AC",glowColor:"#F783AC80",description:"Europi là nguyên tố đất hiếm phản ứng mạnh nhất, dùng tạo màu đỏ trong TV và tiền giấy chống giả.",facts:["Europi được đặt tên theo châu Âu.","Tiền Euro và USD có sợi phát sáng chứa europi.","TV CRT và LED sử dụng europi để tạo màu đỏ."],discoveryYear:1901,meltingPoint:822,boilingPoint:1529,density:5.243,state:"solid",infographicPath:"element/Europium.jpeg"},{atomicNumber:64,symbol:"Gd",name:"Gadolini",nameEn:"Gadolinium",atomicMass:157.25,category:"lanthanide",period:6,group:0,electronConfig:"[Xe] 4f⁷ 5d¹ 6s²",electronShells:[2,8,18,25,9,2],color:"#F783AC",glowColor:"#F783AC80",description:"Gadolini có từ tính mạnh, được dùng làm chất cản quang MRI và trong lò phản ứng hạt nhân.",facts:["Gadolini được đặt theo nhà hóa học Johan Gadolin.","Chất cản quang MRI thường chứa gadolini.","Gadolini có khả năng hấp thụ neutron cao, dùng trong lò phản ứng."],discoveryYear:1880,meltingPoint:1313,boilingPoint:3273,density:7.895,state:"solid",infographicPath:"element/Gadolinium.jpeg"},{atomicNumber:65,symbol:"Tb",name:"Terbi",nameEn:"Terbium",atomicMass:158.93,category:"lanthanide",period:6,group:0,electronConfig:"[Xe] 4f⁹ 6s²",electronShells:[2,8,18,27,8,2],color:"#F783AC",glowColor:"#F783AC80",description:"Terbi được dùng trong phosphor xanh lá cho đèn huỳnh quang và màn hình.",facts:["Terbi được đặt tên theo làng Ytterby ở Thụy Điển.","Terbi tạo màu xanh lá trong đèn huỳnh quang compact.","Hợp kim terbi-sắt co giãn mạnh trong từ trường."],discoveryYear:1843,meltingPoint:1356,boilingPoint:3230,density:8.229,state:"solid",infographicPath:"element/Terbium.jpeg"},{atomicNumber:66,symbol:"Dy",name:"Dysprosi",nameEn:"Dysprosium",atomicMass:162.5,category:"lanthanide",period:6,group:0,electronConfig:"[Xe] 4f¹⁰ 6s²",electronShells:[2,8,18,28,8,2],color:"#F783AC",glowColor:"#F783AC80",description:"Dysprosi được thêm vào nam châm neodymium để hoạt động ở nhiệt độ cao hơn.",facts:['Tên có nghĩa là "khó tiếp cận" trong tiếng Hy Lạp.',"Dysprosi giúp nam châm neodymium chịu nhiệt tốt hơn.","Đèn halogen kim loại-halide sử dụng dysprosi."],discoveryYear:1886,meltingPoint:1412,boilingPoint:2567,density:8.55,state:"solid",infographicPath:"element/Dysprosium.jpeg"},{atomicNumber:67,symbol:"Ho",name:"Holmi",nameEn:"Holmium",atomicMass:164.93,category:"lanthanide",period:6,group:0,electronConfig:"[Xe] 4f¹¹ 6s²",electronShells:[2,8,18,29,8,2],color:"#F783AC",glowColor:"#F783AC80",description:"Holmi có từ tính mạnh nhất trong các nguyên tố tự nhiên, dùng trong nam châm và laser y tế.",facts:["Holmi được đặt tên theo Stockholm (Holmia).","Holmi có mômen từ cao nhất trong các nguyên tố.","Laser holmi dùng trong phẫu thuật mắt và tán sỏi."],discoveryYear:1878,meltingPoint:1474,boilingPoint:2700,density:8.795,state:"solid",infographicPath:"element/Holmium.jpeg"},{atomicNumber:68,symbol:"Er",name:"Erbi",nameEn:"Erbium",atomicMass:167.26,category:"lanthanide",period:6,group:0,electronConfig:"[Xe] 4f¹² 6s²",electronShells:[2,8,18,30,8,2],color:"#F783AC",glowColor:"#F783AC80",description:"Erbi được dùng trong bộ khuếch đại cáp quang và laser thẩm mỹ.",facts:["Erbi được đặt tên theo làng Ytterby.","Bộ khuếch đại cáp quang internet dùng erbi.","Laser erbi dùng trong điều trị da liễu và nha khoa."],discoveryYear:1843,meltingPoint:1529,boilingPoint:2868,density:9.066,state:"solid",infographicPath:"element/Erbium.jpeg"},{atomicNumber:69,symbol:"Tm",name:"Tuli",nameEn:"Thulium",atomicMass:168.93,category:"lanthanide",period:6,group:0,electronConfig:"[Xe] 4f¹³ 6s²",electronShells:[2,8,18,31,8,2],color:"#F783AC",glowColor:"#F783AC80",description:"Tuli là một trong những nguyên tố đất hiếm hiếm nhất, dùng trong thiết bị X-quang di động.",facts:["Tuli được đặt theo Thule, tên cổ của Scandinavia.","Tuli-170 dùng trong thiết bị X-quang di động.","Tuli là nguyên tố đất hiếm ít phổ biến thứ hai."],discoveryYear:1879,meltingPoint:1545,boilingPoint:1950,density:9.321,state:"solid",infographicPath:"element/Thulium.jpeg"},{atomicNumber:70,symbol:"Yb",name:"Ytterbi",nameEn:"Ytterbium",atomicMass:173.05,category:"lanthanide",period:6,group:0,electronConfig:"[Xe] 4f¹⁴ 6s²",electronShells:[2,8,18,32,8,2],color:"#F783AC",glowColor:"#F783AC80",description:"Ytterbi được dùng trong thép không gỉ, laser và đồng hồ nguyên tử.",facts:["Ytterbi là nguyên tố thứ tư được đặt tên theo làng Ytterby.","Đồng hồ nguyên tử ytterbi chính xác gấp 100 lần đồng hồ xesi.","Ytterbi được thêm vào thép không gỉ để tăng độ bền."],discoveryYear:1878,meltingPoint:824,boilingPoint:1196,density:6.965,state:"solid",infographicPath:"element/Ytterbium.jpeg"},{atomicNumber:71,symbol:"Lu",name:"Luteti",nameEn:"Lutetium",atomicMass:174.97,category:"lanthanide",period:6,group:0,electronConfig:"[Xe] 4f¹⁴ 5d¹ 6s²",electronShells:[2,8,18,32,9,2],color:"#F783AC",glowColor:"#F783AC80",description:"Luteti là nguyên tố đất hiếm cuối cùng, đắt nhất và cứng nhất, dùng trong PET scan.",facts:["Luteti được đặt theo Lutetia, tên Latin của Paris.","Luteti-177 được dùng điều trị ung thư tuyến tiền liệt.","Luteti được dùng trong máy quét PET."],discoveryYear:1907,meltingPoint:1663,boilingPoint:3402,density:9.84,state:"solid",infographicPath:"element/Lutetium.jpeg"},{atomicNumber:72,symbol:"Hf",name:"Hafni",nameEn:"Hafnium",atomicMass:178.49,category:"transition-metal",period:6,group:4,electronConfig:"[Xe] 4f¹⁴ 5d² 6s²",electronShells:[2,8,18,32,10,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Hafni là kim loại chuyển tiếp chịu nhiệt cao, dùng trong thanh điều khiển lò hạt nhân và chip.",facts:["Hafni được đặt tên theo Copenhagen (Hafnia).","Thanh điều khiển lò hạt nhân dùng hafni vì hấp thụ neutron tốt.","Chip Intel 45nm sử dụng hafni dioxide."],discoveryYear:1923,meltingPoint:2233,boilingPoint:4603,density:13.31,state:"solid",infographicPath:"element/Hafnium.png"},{atomicNumber:73,symbol:"Ta",name:"Tantali",nameEn:"Tantalum",atomicMass:180.95,category:"transition-metal",period:6,group:5,electronConfig:"[Xe] 4f¹⁴ 5d³ 6s²",electronShells:[2,8,18,32,11,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Tantali là kim loại rất cứng, chống ăn mòn, dùng trong tụ điện và cấy ghép y tế.",facts:["Tantali được đặt theo vua Tantalus trong thần thoại.","Điện thoại thông minh chứa tụ tantali.","Tantali không gây dị ứng, lý tưởng cho cấy ghép."],discoveryYear:1802,meltingPoint:3017,boilingPoint:5458,density:16.654,state:"solid",infographicPath:"element/Tantalum.png"},{atomicNumber:74,symbol:"W",name:"Vonfram",nameEn:"Tungsten",atomicMass:183.84,category:"transition-metal",period:6,group:6,electronConfig:"[Xe] 4f¹⁴ 5d⁴ 6s²",electronShells:[2,8,18,32,12,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Vonfram (Wolfram) có điểm nóng chảy cao nhất (3422°C) trong tất cả kim loại.",facts:["Dây tóc bóng đèn sợi đốt làm từ vonfram.","Ký hiệu W từ tên Wolfram trong tiếng Đức.","Mũi khoan cứng nhất dùng hợp kim vonfram carbide."],discoveryYear:1783,meltingPoint:3422,boilingPoint:5555,density:19.25,state:"solid",infographicPath:"element/Tungsten.png"},{atomicNumber:75,symbol:"Re",name:"Rheni",nameEn:"Rhenium",atomicMass:186.21,category:"transition-metal",period:6,group:7,electronConfig:"[Xe] 4f¹⁴ 5d⁵ 6s²",electronShells:[2,8,18,32,13,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Rheni là một trong những nguyên tố hiếm nhất, dùng trong động cơ phản lực siêu nhiệt.",facts:["Rheni được đặt tên theo sông Rhine.","Rheni là nguyên tố ổn định cuối cùng được phát hiện (1925).","Cánh tuabin động cơ phản lực dùng hợp kim rheni-niken."],discoveryYear:1925,meltingPoint:3186,boilingPoint:5596,density:21.02,state:"solid",infographicPath:"element/Rhenium.png"},{atomicNumber:76,symbol:"Os",name:"Osmi",nameEn:"Osmium",atomicMass:190.23,category:"transition-metal",period:6,group:8,electronConfig:"[Xe] 4f¹⁴ 5d⁶ 6s²",electronShells:[2,8,18,32,14,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Osmi là nguyên tố đặc nhất trong tự nhiên (22.59 g/cm³), dùng trong đầu bút máy.",facts:["Osmi đặc hơn mọi nguyên tố khác.",'Tên osmi có nghĩa là "mùi" vì oxide của nó có mùi hăng.',"Ngòi bút máy cao cấp sử dụng hợp kim osmi-iridi."],discoveryYear:1803,meltingPoint:3033,boilingPoint:5012,density:22.59,state:"solid",infographicPath:"element/Osmium.png"},{atomicNumber:77,symbol:"Ir",name:"Iridi",nameEn:"Iridium",atomicMass:192.22,category:"transition-metal",period:6,group:9,electronConfig:"[Xe] 4f¹⁴ 5d⁷ 6s²",electronShells:[2,8,18,32,15,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Iridi là kim loại chống ăn mòn nhất, dùng trong bugi và bằng chứng tiểu hành tinh hủy diệt khủng long.",facts:["Lớp iridi 66 triệu năm tuổi là bằng chứng tiểu hành tinh diệt khủng long.","Bugi iridi bền hơn bugi platin.","Kilogram nguyên bản được làm từ hợp kim platin-iridi."],discoveryYear:1803,meltingPoint:2446,boilingPoint:4428,density:22.56,state:"solid",infographicPath:"element/Iridium.png"},{atomicNumber:78,symbol:"Pt",name:"Platin",nameEn:"Platinum",atomicMass:195.08,category:"transition-metal",period:6,group:10,electronConfig:"[Xe] 4f¹⁴ 5d⁹ 6s¹",electronShells:[2,8,18,32,17,1],color:"#FFD43B",glowColor:"#FFD43B80",description:"Platin là kim loại quý đắt tiền, dùng trong trang sức, xúc tác và điều trị ung thư.",facts:["Platin hiếm gấp 30 lần vàng.","Bộ chuyển đổi xúc tác ô tô chứa platin, paladi hoặc rhodi.","Cisplatin (hợp chất platin) là thuốc hóa trị liệu ung thư."],discoveryYear:1735,meltingPoint:1768.3,boilingPoint:3825,density:21.45,state:"solid",infographicPath:"element/Platinum.png"},{atomicNumber:79,symbol:"Au",name:"Vàng",nameEn:"Gold",atomicMass:196.97,category:"transition-metal",period:6,group:11,electronConfig:"[Xe] 4f¹⁴ 5d¹⁰ 6s¹",electronShells:[2,8,18,32,18,1],color:"#FFD43B",glowColor:"#FFD43B80",description:"Vàng là kim loại quý không bị oxy hóa, màu vàng đặc trưng, dùng trong trang sức và điện tử.",facts:["Tất cả vàng trên Trái Đất đến từ va chạm sao neutron.","Vàng dẻo đến mức 1 gram có thể dát thành 1 m².","iPhone chứa khoảng 0.034 gram vàng."],discoveryYear:-6e3,meltingPoint:1064.18,boilingPoint:2856,density:19.282,state:"solid",infographicPath:"element/Gold.png"},{atomicNumber:80,symbol:"Hg",name:"Thủy ngân",nameEn:"Mercury",atomicMass:200.59,category:"transition-metal",period:6,group:12,electronConfig:"[Xe] 4f¹⁴ 5d¹⁰ 6s²",electronShells:[2,8,18,32,18,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Thủy ngân là kim loại duy nhất ở thể lỏng ở nhiệt độ phòng. Nó độc nhưng từng dùng rộng rãi.",facts:["Thủy ngân là kim loại duy nhất lỏng ở nhiệt độ phòng.","Nhiệt kế thủy ngân đang bị loại bỏ vì độc hại.",'Tên Mercury đặt theo thần Hermes vì nó "chạy" nhanh.'],discoveryYear:-1500,meltingPoint:-38.83,boilingPoint:356.73,density:13.534,state:"liquid",infographicPath:"element/Mercury.png"},{atomicNumber:81,symbol:"Tl",name:"Tali",nameEn:"Thallium",atomicMass:204.38,category:"post-transition",period:6,group:13,electronConfig:"[Xe] 4f¹⁴ 5d¹⁰ 6s² 6p¹",electronShells:[2,8,18,32,18,3],color:"#69DB7C",glowColor:"#69DB7C80",description:"Tali là kim loại mềm, độc, từng được dùng làm thuốc chuột và thuốc độc hoàn hảo.",facts:['Tali từng được gọi là "thuốc độc hoàn hảo" vì không mùi vị.',"Tali được đặt tên theo vạch xanh lá (thallos) trong quang phổ.","Tali-201 dùng trong chẩn đoán tim mạch."],discoveryYear:1861,meltingPoint:304,boilingPoint:1473,density:11.85,state:"solid",infographicPath:"element/Thallium.png"},{atomicNumber:82,symbol:"Pb",name:"Chì",nameEn:"Lead",atomicMass:207.2,category:"post-transition",period:6,group:14,electronConfig:"[Xe] 4f¹⁴ 5d¹⁰ 6s² 6p²",electronShells:[2,8,18,32,18,4],color:"#69DB7C",glowColor:"#69DB7C80",description:"Chì là kim loại nặng, mềm, độc, từng dùng rộng rãi nhưng nay bị hạn chế vì gây hại.",facts:["Người La Mã dùng ống nước chì, có thể góp phần suy yếu đế chế.","Xăng pha chì bị cấm vì gây ngộ độc não.","Chì vẫn dùng trong tấm chắn X-quang và pin axit."],discoveryYear:-7e3,meltingPoint:327.46,boilingPoint:1749,density:11.342,state:"solid",infographicPath:"element/Lead.png"},{atomicNumber:83,symbol:"Bi",name:"Bitmut",nameEn:"Bismuth",atomicMass:208.98,category:"post-transition",period:6,group:15,electronConfig:"[Xe] 4f¹⁴ 5d¹⁰ 6s² 6p³",electronShells:[2,8,18,32,18,5],color:"#69DB7C",glowColor:"#69DB7C80",description:"Bitmut tạo tinh thể cầu vồng tuyệt đẹp và là nguyên tố nặng nhất không phóng xạ đáng kể.",facts:["Tinh thể bitmut có màu cầu vồng do lớp oxide bề mặt.","Pepto-Bismol (thuốc dạ dày) chứa bismuth subsalicylate.","Bitmut nở ra khi đông đặc, giống nước."],discoveryYear:1753,meltingPoint:271.5,boilingPoint:1564,density:9.807,state:"solid",infographicPath:"element/Bismuth.png"},{atomicNumber:84,symbol:"Po",name:"Poloni",nameEn:"Polonium",atomicMass:209,category:"metalloid",period:6,group:16,electronConfig:"[Xe] 4f¹⁴ 5d¹⁰ 6s² 6p⁴",electronShells:[2,8,18,32,18,6],color:"#38D9A9",glowColor:"#38D9A980",description:"Poloni là nguyên tố phóng xạ cực độc do Marie Curie phát hiện, đặt tên theo quê hương Ba Lan.",facts:["Marie Curie đặt tên poloni theo quê hương Ba Lan.","Poloni-210 được dùng đầu độc cựu điệp viên Litvinenko 2006.","Poloni phát ra nhiệt lượng lớn, từng nghiên cứu cho vệ tinh."],discoveryYear:1898,meltingPoint:254,boilingPoint:962,density:9.32,state:"solid",infographicPath:"element/Polonium.png"},{atomicNumber:85,symbol:"At",name:"Astatin",nameEn:"Astatine",atomicMass:210,category:"halogen",period:6,group:17,electronConfig:"[Xe] 4f¹⁴ 5d¹⁰ 6s² 6p⁵",electronShells:[2,8,18,32,18,7],color:"#748FFC",glowColor:"#748FFC80",description:"Astatin là nguyên tố tự nhiên hiếm nhất trên Trái Đất, tại một thời điểm chỉ có < 1 gram.",facts:['Tên astatin có nghĩa là "không ổn định".',"Chỉ có dưới 30 gram astatin trong toàn bộ vỏ Trái Đất.","Astatin-211 đang được nghiên cứu điều trị ung thư."],discoveryYear:1940,meltingPoint:302,boilingPoint:337,density:7,state:"solid",infographicPath:"element/Astatine.png"},{atomicNumber:86,symbol:"Rn",name:"Radon",nameEn:"Radon",atomicMass:222,category:"noble-gas",period:6,group:18,electronConfig:"[Xe] 4f¹⁴ 5d¹⁰ 6s² 6p⁶",electronShells:[2,8,18,32,18,8],color:"#DA77F2",glowColor:"#DA77F280",description:"Radon là khí hiếm phóng xạ không màu, không mùi, nguyên nhân số 2 gây ung thư phổi sau hút thuốc.",facts:["Radon là nguyên nhân ung thư phổi thứ hai sau hút thuốc.","Radon tích tụ trong tầng hầm nhà ở.",'Radon từng dùng trong spa "chữa bệnh" thời xưa.'],discoveryYear:1900,meltingPoint:-71,boilingPoint:-61.7,density:.00973,state:"gas",infographicPath:"element/Radon.png"},{atomicNumber:87,symbol:"Fr",name:"Franxi",nameEn:"Francium",atomicMass:223,category:"alkali-metal",period:7,group:1,electronConfig:"[Rn] 7s¹",electronShells:[2,8,18,32,18,8,1],color:"#FF6B6B",glowColor:"#FF6B6B80",description:"Franxi là kim loại kiềm hiếm và phóng xạ nhất, chỉ tồn tại vài giây trước khi phân rã.",facts:["Franxi được đặt tên theo nước Pháp.","Tại bất kỳ thời điểm nào chỉ có khoảng 30 gram franxi trên Trái Đất.","Franxi-223 có chu kỳ bán rã chỉ 22 phút."],discoveryYear:1939,meltingPoint:27,boilingPoint:677,density:1.87,state:"solid",infographicPath:"element/Francium.png"},{atomicNumber:88,symbol:"Ra",name:"Radi",nameEn:"Radium",atomicMass:226,category:"alkaline-earth",period:7,group:2,electronConfig:"[Rn] 7s²",electronShells:[2,8,18,32,18,8,2],color:"#FFA94D",glowColor:"#FFA94D80",description:"Radi là nguyên tố phóng xạ phát sáng xanh, do vợ chồng Curie phát hiện.",facts:["Radi phát sáng xanh nhạt trong bóng tối.","Marie Curie chết vì phơi nhiễm radi.","Radi từng dùng trong sơn phát sáng đồng hồ, gây chết nhiều công nhân."],discoveryYear:1898,meltingPoint:696,boilingPoint:1737,density:5.5,state:"solid",infographicPath:"element/Radium.png"},{atomicNumber:89,symbol:"Ac",name:"Actini",nameEn:"Actinium",atomicMass:227,category:"actinide",period:7,group:0,electronConfig:"[Rn] 6d¹ 7s²",electronShells:[2,8,18,32,18,9,2],color:"#E599F7",glowColor:"#E599F780",description:"Actini là nguyên tố đầu tiên của nhóm actinide, phát sáng xanh do phóng xạ.",facts:["Actini phát sáng xanh trong bóng tối.","Actini-225 đang được nghiên cứu điều trị ung thư.","Actini hiếm đến mức 1 tấn quặng uranium chỉ chứa 0.2 mg."],discoveryYear:1899,meltingPoint:1050,boilingPoint:3200,density:10.07,state:"solid",infographicPath:"element/Actinium.jpeg"},{atomicNumber:90,symbol:"Th",name:"Thori",nameEn:"Thorium",atomicMass:232.04,category:"actinide",period:7,group:0,electronConfig:"[Rn] 6d² 7s²",electronShells:[2,8,18,32,18,10,2],color:"#E599F7",glowColor:"#E599F780",description:"Thori là nguyên tố phóng xạ phổ biến, đang được nghiên cứu làm nhiên liệu hạt nhân thay thế uranium.",facts:["Thori được đặt theo thần Thor của Bắc Âu.","Lò phản ứng thori an toàn hơn và ít chất thải hơn uranium.","Thori phổ biến hơn uranium 3-4 lần trong vỏ Trái Đất."],discoveryYear:1829,meltingPoint:1750,boilingPoint:4788,density:11.72,state:"solid",infographicPath:"element/Thorium.jpeg"},{atomicNumber:91,symbol:"Pa",name:"Protactini",nameEn:"Protactinium",atomicMass:231.04,category:"actinide",period:7,group:0,electronConfig:"[Rn] 5f² 6d¹ 7s²",electronShells:[2,8,18,32,20,9,2],color:"#E599F7",glowColor:"#E599F780",description:"Protactini là nguyên tố actinide hiếm, độc và phóng xạ cao.",facts:['Tên có nghĩa là "cha của actini" vì phân rã thành actini.',"Protactini là một trong những nguyên tố độc nhất.","Rất ít protactini tồn tại - khoảng 1-2 kg được tách ra từ trước đến nay."],discoveryYear:1913,meltingPoint:1572,boilingPoint:4e3,density:15.37,state:"solid",infographicPath:"element/Protactinium.jpeg"},{atomicNumber:92,symbol:"U",name:"Urani",nameEn:"Uranium",atomicMass:238.03,category:"actinide",period:7,group:0,electronConfig:"[Rn] 5f³ 6d¹ 7s²",electronShells:[2,8,18,32,21,9,2],color:"#E599F7",glowColor:"#E599F780",description:"Urani là nhiên liệu chính cho lò phản ứng hạt nhân và bom nguyên tử.",facts:["Uranium-235 là đồng vị dùng trong lò phản ứng và bom hạt nhân.","Urani được đặt tên theo hành tinh Uranus.","1 kg uranium chứa năng lượng tương đương 3 triệu kg than."],discoveryYear:1789,meltingPoint:1135,boilingPoint:4131,density:18.95,state:"solid",infographicPath:"element/Uranium.jpeg"},{atomicNumber:93,symbol:"Np",name:"Neptuni",nameEn:"Neptunium",atomicMass:237,category:"actinide",period:7,group:0,electronConfig:"[Rn] 5f⁴ 6d¹ 7s²",electronShells:[2,8,18,32,22,9,2],color:"#E599F7",glowColor:"#E599F780",description:"Neptuni là nguyên tố siêu urani đầu tiên được tổng hợp, đặt tên theo sao Hải Vương.",facts:["Neptuni được đặt tên theo sao Hải Vương (Neptune).","Neptuni là sản phẩm phụ trong lò phản ứng hạt nhân.","Neptuni-237 có chu kỳ bán rã 2.14 triệu năm."],discoveryYear:1940,meltingPoint:644,boilingPoint:3902,density:20.25,state:"solid",infographicPath:"element/Neptunium.jpeg"},{atomicNumber:94,symbol:"Pu",name:"Plutoni",nameEn:"Plutonium",atomicMass:244,category:"actinide",period:7,group:0,electronConfig:"[Rn] 5f⁶ 7s²",electronShells:[2,8,18,32,24,8,2],color:"#E599F7",glowColor:"#E599F780",description:"Plutoni là nguyên tố dùng trong bom nguyên tử và lò phản ứng, cực kỳ độc.",facts:["Bom nguyên tử thả xuống Nagasaki dùng plutoni.","Plutoni-238 cấp năng lượng cho tàu Voyager đã bay 40+ năm.","Plutoni tự nóng lên vì phóng xạ - 1 kg plutoni ấm khi cầm."],discoveryYear:1940,meltingPoint:640,boilingPoint:3228,density:19.84,state:"solid",infographicPath:"element/Plutonium.jpeg"},{atomicNumber:95,symbol:"Am",name:"Americi",nameEn:"Americium",atomicMass:243,category:"actinide",period:7,group:0,electronConfig:"[Rn] 5f⁷ 7s²",electronShells:[2,8,18,32,25,8,2],color:"#E599F7",glowColor:"#E599F780",description:"Americi được dùng trong đầu báo khói gia đình, là nguyên tố nhân tạo phổ biến nhất.",facts:["Hầu hết đầu báo khói chứa americi-241.","Americi được đặt tên theo châu Mỹ.","Americi được tạo ra trong Manhattan Project thời WWII."],discoveryYear:1944,meltingPoint:1176,boilingPoint:2011,density:13.69,state:"solid",infographicPath:"element/Americium.jpeg"},{atomicNumber:96,symbol:"Cm",name:"Curi",nameEn:"Curium",atomicMass:247,category:"actinide",period:7,group:0,electronConfig:"[Rn] 5f⁷ 6d¹ 7s²",electronShells:[2,8,18,32,25,9,2],color:"#E599F7",glowColor:"#E599F780",description:"Curi được đặt tên theo vợ chồng Marie và Pierre Curie, phát sáng đỏ trong bóng tối.",facts:["Curi được đặt tên vinh danh vợ chồng Curie.","Curi phát sáng đỏ trong bóng tối do phóng xạ.","Curi-244 được dùng trong máy phân tích hạt alpha trên Sao Hỏa."],discoveryYear:1944,meltingPoint:1345,boilingPoint:3110,density:13.51,state:"solid",infographicPath:"element/Curium.jpeg"},{atomicNumber:97,symbol:"Bk",name:"Berkeli",nameEn:"Berkelium",atomicMass:247,category:"actinide",period:7,group:0,electronConfig:"[Rn] 5f⁹ 7s²",electronShells:[2,8,18,32,27,8,2],color:"#E599F7",glowColor:"#E599F780",description:"Berkeli được đặt tên theo Berkeley, California, nơi nó được tạo ra.",facts:["Berkeli được đặt tên theo thành phố Berkeley.","Chỉ vài gram berkeli được tạo ra từ trước đến nay.","Berkeli là bước đệm để tạo ra các nguyên tố nặng hơn."],discoveryYear:1949,meltingPoint:986,boilingPoint:2627,density:14.79,state:"solid",infographicPath:"element/Berkelium.jpeg"},{atomicNumber:98,symbol:"Cf",name:"Californi",nameEn:"Californium",atomicMass:251,category:"actinide",period:7,group:0,electronConfig:"[Rn] 5f¹⁰ 7s²",electronShells:[2,8,18,32,28,8,2],color:"#E599F7",glowColor:"#E599F780",description:"Californi là nguyên tố actinide đắt nhất, phát neutron mạnh, dùng khởi động lò phản ứng.",facts:["1 gram californi có giá khoảng 27 triệu USD.","Californi dùng để khởi động lò phản ứng hạt nhân.","Californi dùng phát hiện vàng và dầu mỏ qua quét neutron."],discoveryYear:1950,meltingPoint:900,boilingPoint:1470,density:15.1,state:"solid",infographicPath:"element/Californium.jpeg"},{atomicNumber:99,symbol:"Es",name:"Einsteini",nameEn:"Einsteinium",atomicMass:252,category:"actinide",period:7,group:0,electronConfig:"[Rn] 5f¹¹ 7s²",electronShells:[2,8,18,32,29,8,2],color:"#E599F7",glowColor:"#E599F780",description:"Einsteini được phát hiện trong vụ thử bom nhiệt hạch đầu tiên, đặt tên theo Albert Einstein.",facts:["Einsteini được phát hiện trong tàn tích bom nhiệt hạch 1952.","Einsteini được đặt tên vinh danh Albert Einstein.","Einsteini phát sáng xanh do phóng xạ mạnh."],discoveryYear:1952,meltingPoint:860,boilingPoint:996,density:8.84,state:"solid",infographicPath:"element/Einsteinium.jpeg"},{atomicNumber:100,symbol:"Fm",name:"Fermi",nameEn:"Fermium",atomicMass:257,category:"actinide",period:7,group:0,electronConfig:"[Rn] 5f¹² 7s²",electronShells:[2,8,18,32,30,8,2],color:"#E599F7",glowColor:"#E599F780",description:"Fermi được đặt tên theo Enrico Fermi, nhà vật lý hạt nhân tiên phong.",facts:["Fermi được đặt tên theo Enrico Fermi.","Fermi cũng được phát hiện trong tàn tích bom nhiệt hạch.","Fermium-257 có chu kỳ bán rã 100 ngày."],discoveryYear:1952,meltingPoint:1527,boilingPoint:void 0,density:9.7,state:"solid",infographicPath:"element/Fermium.jpeg"},{atomicNumber:101,symbol:"Md",name:"Mendelevi",nameEn:"Mendelevium",atomicMass:258,category:"actinide",period:7,group:0,electronConfig:"[Rn] 5f¹³ 7s²",electronShells:[2,8,18,32,31,8,2],color:"#E599F7",glowColor:"#E599F780",description:"Mendelevi được đặt tên theo Dmitri Mendeleev, cha đẻ của bảng tuần hoàn.",facts:["Mendelevi được đặt tên vinh danh Dmitri Mendeleev.","Chỉ khoảng 17 nguyên tử mendelevi được tạo ra lần đầu.","Mendelevi là actinide cuối cùng có thể nghiên cứu hóa học."],discoveryYear:1955,meltingPoint:827,boilingPoint:void 0,density:10.3,state:"solid",infographicPath:"element/Mendelevium.jpeg"},{atomicNumber:102,symbol:"No",name:"Nobeli",nameEn:"Nobelium",atomicMass:259,category:"actinide",period:7,group:0,electronConfig:"[Rn] 5f¹⁴ 7s²",electronShells:[2,8,18,32,32,8,2],color:"#E599F7",glowColor:"#E599F780",description:"Nobeli được đặt tên theo Alfred Nobel, người sáng lập giải Nobel.",facts:["Nobeli được đặt tên theo Alfred Nobel.","Nobeli-259 có chu kỳ bán rã 58 phút.","Nobeli là một trong những nguyên tố ít được biết đến nhất."],discoveryYear:1958,meltingPoint:827,boilingPoint:void 0,density:9.9,state:"solid",infographicPath:"element/Nobelium.jpeg"},{atomicNumber:103,symbol:"Lr",name:"Lawrenci",nameEn:"Lawrencium",atomicMass:266,category:"actinide",period:7,group:0,electronConfig:"[Rn] 5f¹⁴ 7s² 7p¹",electronShells:[2,8,18,32,32,8,3],color:"#E599F7",glowColor:"#E599F780",description:"Lawrenci là actinide cuối cùng, đặt tên theo Ernest Lawrence, phát minh máy gia tốc.",facts:["Lawrenci được đặt tên theo Ernest O. Lawrence.","Lawrenci là nguyên tố actinide cuối cùng.","Lawrenci-266 có chu kỳ bán rã 11 giờ."],discoveryYear:1961,meltingPoint:1627,boilingPoint:void 0,density:14.4,state:"solid",infographicPath:"element/Lawrencium.jpeg"},{atomicNumber:104,symbol:"Rf",name:"Rutherfordi",nameEn:"Rutherfordium",atomicMass:267,category:"transition-metal",period:7,group:4,electronConfig:"[Rn] 5f¹⁴ 6d² 7s²",electronShells:[2,8,18,32,32,10,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Rutherfordi được đặt tên theo Ernest Rutherford, cha đẻ của vật lý hạt nhân.",facts:["Rutherfordi được đặt tên theo Ernest Rutherford.","Đồng vị bền nhất có chu kỳ bán rã 1.3 giờ.","Rutherfordi được tạo ra bằng cách bắn phá plutoni."],discoveryYear:1969,meltingPoint:2100,boilingPoint:5500,density:23.2,state:"solid",infographicPath:"element/Rutherfordium.png"},{atomicNumber:105,symbol:"Db",name:"Dubni",nameEn:"Dubnium",atomicMass:268,category:"transition-metal",period:7,group:5,electronConfig:"[Rn] 5f¹⁴ 6d³ 7s²",electronShells:[2,8,18,32,32,11,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Dubni được đặt tên theo thành phố Dubna, Nga, nơi đặt phòng thí nghiệm hạt nhân.",facts:["Dubni được đặt tên theo Dubna, Nga.","Dubni từng gây tranh cãi giữa Mỹ và Liên Xô về quyền phát hiện.","Đồng vị bền nhất có chu kỳ bán rã 28 giờ."],discoveryYear:1970,meltingPoint:void 0,boilingPoint:void 0,density:29.3,state:"solid",infographicPath:"element/Dubnium.png"},{atomicNumber:106,symbol:"Sg",name:"Seaborgi",nameEn:"Seaborgium",atomicMass:269,category:"transition-metal",period:7,group:6,electronConfig:"[Rn] 5f¹⁴ 6d⁴ 7s²",electronShells:[2,8,18,32,32,12,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Seaborgi được đặt tên theo Glenn Seaborg, người phát hiện nhiều nguyên tố siêu urani.",facts:["Seaborgi được đặt tên khi Glenn Seaborg còn sống.","Seaborg là người duy nhất có nguyên tố mang tên khi còn sống.","Đồng vị bền nhất có chu kỳ bán rã 14 phút."],discoveryYear:1974,meltingPoint:void 0,boilingPoint:void 0,density:35,state:"solid",infographicPath:"element/Seaborgium.png"},{atomicNumber:107,symbol:"Bh",name:"Bohri",nameEn:"Bohrium",atomicMass:270,category:"transition-metal",period:7,group:7,electronConfig:"[Rn] 5f¹⁴ 6d⁵ 7s²",electronShells:[2,8,18,32,32,13,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Bohri được đặt tên theo Niels Bohr, nhà vật lý lượng tử tiên phong.",facts:["Bohri được đặt tên theo Niels Bohr.","Đồng vị bền nhất có chu kỳ bán rã 61 giây.","Bohri được tạo ra bằng cách bắn phá bismuth."],discoveryYear:1981,meltingPoint:void 0,boilingPoint:void 0,density:37.1,state:"solid",infographicPath:"element/Bohrium.png"},{atomicNumber:108,symbol:"Hs",name:"Hassi",nameEn:"Hassium",atomicMass:277,category:"transition-metal",period:7,group:8,electronConfig:"[Rn] 5f¹⁴ 6d⁶ 7s²",electronShells:[2,8,18,32,32,14,2],color:"#FFD43B",glowColor:"#FFD43B80",description:"Hassi được đặt tên theo bang Hesse, Đức, nơi đặt GSI Helmholtz.",facts:["Hassi được đặt tên theo bang Hesse, Đức.","Đồng vị bền nhất có chu kỳ bán rã 10 giây.","Hassi được dự đoán có tính chất tương tự osmi."],discoveryYear:1984,meltingPoint:void 0,boilingPoint:void 0,density:40.7,state:"solid",infographicPath:"element/Hassium.png"},{atomicNumber:109,symbol:"Mt",name:"Meitneri",nameEn:"Meitnerium",atomicMass:278,category:"unknown",period:7,group:9,electronConfig:"[Rn] 5f¹⁴ 6d⁷ 7s²",electronShells:[2,8,18,32,32,15,2],color:"#868E96",glowColor:"#868E9680",description:"Meitneri được đặt tên theo Lise Meitner, nhà vật lý đồng phát hiện phân hạch hạt nhân.",facts:["Meitneri được đặt tên theo Lise Meitner.","Đồng vị bền nhất có chu kỳ bán rã 7.6 giây.","Meitner bị bỏ qua khi trao giải Nobel cho phân hạch hạt nhân."],discoveryYear:1982,meltingPoint:void 0,boilingPoint:void 0,density:37.4,state:"solid",infographicPath:"element/Meitnerium.png"},{atomicNumber:110,symbol:"Ds",name:"Darmstadti",nameEn:"Darmstadtium",atomicMass:281,category:"unknown",period:7,group:10,electronConfig:"[Rn] 5f¹⁴ 6d⁸ 7s²",electronShells:[2,8,18,32,32,16,2],color:"#868E96",glowColor:"#868E9680",description:"Darmstadti được đặt tên theo thành phố Darmstadt, Đức.",facts:["Darmstadti được đặt tên theo Darmstadt, Đức.","Đồng vị bền nhất có chu kỳ bán rã 14 giây.","Darmstadti được dự đoán có màu giống platin."],discoveryYear:1994,meltingPoint:void 0,boilingPoint:void 0,density:34.8,state:"solid",infographicPath:"element/Darmstadtium.png"},{atomicNumber:111,symbol:"Rg",name:"Roentgeni",nameEn:"Roentgenium",atomicMass:282,category:"unknown",period:7,group:11,electronConfig:"[Rn] 5f¹⁴ 6d⁹ 7s²",electronShells:[2,8,18,32,32,17,2],color:"#868E96",glowColor:"#868E9680",description:"Roentgeni được đặt tên theo Wilhelm Röntgen, người phát hiện tia X.",facts:["Roentgeni được đặt tên theo Wilhelm Röntgen.","Đồng vị bền nhất có chu kỳ bán rã 26 giây.","Roentgeni được dự đoán có màu vàng như vàng."],discoveryYear:1994,meltingPoint:void 0,boilingPoint:void 0,density:28.7,state:"solid",infographicPath:"element/Roentgenium.png"},{atomicNumber:112,symbol:"Cn",name:"Copernici",nameEn:"Copernicium",atomicMass:285,category:"unknown",period:7,group:12,electronConfig:"[Rn] 5f¹⁴ 6d¹⁰ 7s²",electronShells:[2,8,18,32,32,18,2],color:"#868E96",glowColor:"#868E9680",description:"Copernici được đặt tên theo Nicolaus Copernicus, nhà thiên văn học.",facts:["Copernici được đặt tên theo Copernicus.","Copernici có thể là chất khí ở nhiệt độ phòng.","Đồng vị bền nhất có chu kỳ bán rã 29 giây."],discoveryYear:1996,meltingPoint:void 0,boilingPoint:void 0,density:23.7,state:"unknown",infographicPath:"element/Copernicium.png"},{atomicNumber:113,symbol:"Nh",name:"Nihoni",nameEn:"Nihonium",atomicMass:286,category:"unknown",period:7,group:13,electronConfig:"[Rn] 5f¹⁴ 6d¹⁰ 7s² 7p¹",electronShells:[2,8,18,32,32,18,3],color:"#868E96",glowColor:"#868E9680",description:"Nihoni được đặt tên theo Nhật Bản (Nihon), nguyên tố đầu tiên phát hiện ở châu Á.",facts:["Nihoni là nguyên tố đầu tiên được phát hiện ở châu Á.","Nihon có nghĩa là Nhật Bản trong tiếng Nhật.","Đồng vị bền nhất có chu kỳ bán rã 20 giây."],discoveryYear:2004,meltingPoint:void 0,boilingPoint:void 0,density:16,state:"solid",infographicPath:"element/Nihonium.png"},{atomicNumber:114,symbol:"Fl",name:"Flerovi",nameEn:"Flerovium",atomicMass:289,category:"unknown",period:7,group:14,electronConfig:"[Rn] 5f¹⁴ 6d¹⁰ 7s² 7p²",electronShells:[2,8,18,32,32,18,4],color:"#868E96",glowColor:"#868E9680",description:"Flerovi được đặt tên theo Georgy Flyorov và phòng thí nghiệm Flerov.",facts:["Flerovi được đặt tên theo Georgy Flyorov.","Flerovi có thể là chất khí hoặc lỏng ở nhiệt độ phòng.","Đồng vị bền nhất có chu kỳ bán rã 2.6 giây."],discoveryYear:1999,meltingPoint:void 0,boilingPoint:void 0,density:14,state:"unknown",infographicPath:"element/Flerovium.png"},{atomicNumber:115,symbol:"Mc",name:"Moscovi",nameEn:"Moscovium",atomicMass:290,category:"unknown",period:7,group:15,electronConfig:"[Rn] 5f¹⁴ 6d¹⁰ 7s² 7p³",electronShells:[2,8,18,32,32,18,5],color:"#868E96",glowColor:"#868E9680",description:"Moscovi được đặt tên theo vùng Moscow, Nga.",facts:["Moscovi được đặt tên theo vùng Moscow.","Đồng vị bền nhất có chu kỳ bán rã 0.65 giây.","Moscovi nổi tiếng trong thuyết âm mưu về UFO (không có cơ sở)."],discoveryYear:2003,meltingPoint:void 0,boilingPoint:void 0,density:13.5,state:"solid",infographicPath:"element/Moscovium.png"},{atomicNumber:116,symbol:"Lv",name:"Livermori",nameEn:"Livermorium",atomicMass:293,category:"unknown",period:7,group:16,electronConfig:"[Rn] 5f¹⁴ 6d¹⁰ 7s² 7p⁴",electronShells:[2,8,18,32,32,18,6],color:"#868E96",glowColor:"#868E9680",description:"Livermori được đặt tên theo phòng thí nghiệm Lawrence Livermore.",facts:["Livermori được đặt tên theo Livermore National Lab.","Đồng vị bền nhất có chu kỳ bán rã 60 ms.","Livermori là nguyên tố nặng nhất trong nhóm 16."],discoveryYear:2e3,meltingPoint:void 0,boilingPoint:void 0,density:12.9,state:"solid",infographicPath:"element/Livermorium.png"},{atomicNumber:117,symbol:"Ts",name:"Tennessine",nameEn:"Tennessine",atomicMass:294,category:"unknown",period:7,group:17,electronConfig:"[Rn] 5f¹⁴ 6d¹⁰ 7s² 7p⁵",electronShells:[2,8,18,32,32,18,7],color:"#868E96",glowColor:"#868E9680",description:"Tennessine được đặt tên theo bang Tennessee, Mỹ.",facts:["Tennessine được đặt tên theo bang Tennessee.","Tennessine là halogen nặng nhất.","Đồng vị bền nhất có chu kỳ bán rã 51 ms."],discoveryYear:2010,meltingPoint:void 0,boilingPoint:void 0,density:7.2,state:"solid",infographicPath:"element/Tennessine.png"},{atomicNumber:118,symbol:"Og",name:"Oganesson",nameEn:"Oganesson",atomicMass:294,category:"noble-gas",period:7,group:18,electronConfig:"[Rn] 5f¹⁴ 6d¹⁰ 7s² 7p⁶",electronShells:[2,8,18,32,32,18,8],color:"#DA77F2",glowColor:"#DA77F280",description:"Oganesson là nguyên tố nặng nhất, đặt tên theo nhà vật lý Yuri Oganessian còn sống.",facts:["Oganesson được đặt tên khi Yuri Oganessian còn sống.","Oganesson có thể là chất rắn, không phải khí như các khí hiếm khác.","Chỉ khoảng 5 nguyên tử oganesson từng được tạo ra."],discoveryYear:2006,meltingPoint:void 0,boilingPoint:void 0,density:4.9,state:"unknown",infographicPath:"element/Oganesson.png"}],et=({element:r,onClick:e,size:t="md"})=>{const n=Se[r.category],i={sm:"w-10 h-10 text-xs",md:"w-14 h-14 sm:w-16 sm:h-16 text-sm",lg:"w-20 h-20 text-base"};return u.jsxs("button",{onClick:()=>e(r),className:`
                ${i[t]}
                relative rounded-lg
                flex flex-col items-center justify-center
                transition-all duration-300
                hover:scale-110 hover:z-10
                focus:outline-none focus:ring-2 focus:ring-white/50
                group cursor-pointer
            `,style:{backgroundColor:`${n.color}20`,border:`2px solid ${n.color}`,boxShadow:`0 0 10px ${n.glow}, inset 0 0 10px ${n.glow}`},title:`${r.name} (${r.nameEn})`,children:[u.jsx("span",{className:"absolute top-0.5 left-1 text-[8px] sm:text-[10px] font-medium opacity-70",style:{color:n.color},children:r.atomicNumber}),u.jsx("span",{className:"font-bold text-base sm:text-lg leading-none",style:{color:n.color,textShadow:`0 0 10px ${n.glow}`},children:r.symbol}),t!=="sm"&&u.jsx("span",{className:"text-[8px] sm:text-[10px] opacity-80 truncate w-full text-center px-1",style:{color:n.color},children:r.name}),u.jsx("div",{className:"absolute inset-0 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{boxShadow:`0 0 20px ${n.color}, 0 0 40px ${n.glow}`}})]})},ri={"alkali-metal":{name:"Kim loại kiềm",description:"Nhóm 1 (trừ Hydrogen). Kim loại mềm, phản ứng mạnh với nước tạo dung dịch kiềm. Ví dụ: Natri (Na), Kali (K)."},"alkaline-earth":{name:"Kim loại kiềm thổ",description:"Nhóm 2. Kim loại nhẹ, phản ứng với nước (chậm hơn kiềm). Ví dụ: Canxi (Ca), Magiê (Mg)."},"transition-metal":{name:"Kim loại chuyển tiếp",description:"Nhóm 3-12. Kim loại cứng, dẫn điện tốt, có nhiều trạng thái oxi hóa. Ví dụ: Sắt (Fe), Đồng (Cu), Vàng (Au)."},"post-transition":{name:"Kim loại sau chuyển tiếp",description:"Kim loại mềm hơn kim loại chuyển tiếp, điểm nóng chảy thấp. Ví dụ: Nhôm (Al), Chì (Pb), Thiếc (Sn)."},metalloid:{name:"Á kim (bán kim loại)",description:"Có tính chất trung gian giữa kim loại và phi kim. Thường dùng làm chất bán dẫn. Ví dụ: Silic (Si), Germani (Ge)."},nonmetal:{name:"Phi kim",description:"Không dẫn điện, không có ánh kim. Rất quan trọng cho sự sống. Ví dụ: Carbon (C), Oxy (O), Nitơ (N)."},halogen:{name:"Halogen",description:'Nhóm 17. Phi kim phản ứng mạnh, tạo muối với kim loại. "Halogen" nghĩa là "tạo muối". Ví dụ: Clo (Cl), Flo (F).'},"noble-gas":{name:"Khí hiếm (khí trơ)",description:"Nhóm 18. Khí không màu, rất ít phản ứng vì lớp electron ngoài đã đầy. Ví dụ: Heli (He), Neon (Ne), Argon (Ar)."},lanthanide:{name:"Lanthanide (đất hiếm)",description:"Nguyên tố 57-71. Kim loại đất hiếm, dùng trong nam châm, pin, màn hình. Ví dụ: Neodymi (Nd), Europi (Eu)."},actinide:{name:"Actinide",description:"Nguyên tố 89-103. Tất cả đều phóng xạ. Bao gồm nhiên liệu hạt nhân. Ví dụ: Urani (U), Plutoni (Pu)."}},ii=[{symbol:"u",name:"Đơn vị khối lượng nguyên tử",description:"1 u ≈ 1.66 × 10⁻²⁷ kg (khối lượng 1 proton)"},{symbol:"°C",name:"Độ Celsius",description:"Đơn vị nhiệt độ. Nước đóng băng ở 0°C, sôi ở 100°C"},{symbol:"g/cm³",name:"Gram trên centimet khối",description:"Đơn vị mật độ. Nước có mật độ 1 g/cm³"}],si=({onClose:r})=>u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",onClick:r,children:u.jsxs("div",{className:"w-full max-w-2xl max-h-[85vh] overflow-y-auto bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-2xl shadow-2xl border border-white/20",onClick:e=>e.stopPropagation(),children:[u.jsxs("div",{className:"sticky top-0 flex items-center justify-between p-4 bg-slate-900/90 backdrop-blur-md border-b border-white/10",children:[u.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[u.jsx(wn,{size:22,className:"text-cyan-400"}),"Hướng dẫn Bảng Tuần Hoàn"]}),u.jsx("button",{onClick:r,className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors text-white",children:u.jsx(ct,{size:20})})]}),u.jsxs("div",{className:"p-4 space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-3",children:"📚 Các nhóm nguyên tố"}),u.jsx("div",{className:"space-y-2",children:Object.entries(ri).map(([e,t])=>{const n=Se[e];return u.jsxs("div",{className:"p-3 rounded-xl border",style:{backgroundColor:`${(n==null?void 0:n.color)||"#666"}10`,borderColor:`${(n==null?void 0:n.color)||"#666"}40`},children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:(n==null?void 0:n.color)||"#666",boxShadow:`0 0 6px ${(n==null?void 0:n.glow)||"#66666680"}`}}),u.jsx("span",{className:"font-semibold text-sm",style:{color:(n==null?void 0:n.color)||"#fff"},children:t.name})]}),u.jsx("p",{className:"text-white/70 text-sm pl-5",children:t.description})]},e)})})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-emerald-400 mb-3",children:"📏 Đơn vị đo lường"}),u.jsx("div",{className:"bg-slate-800/50 rounded-xl p-3 space-y-3",children:ii.map((e,t)=>u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"px-2 py-1 bg-emerald-500/20 text-emerald-400 rounded font-mono text-sm font-bold",children:e.symbol}),u.jsxs("div",{children:[u.jsx("p",{className:"text-white font-medium text-sm",children:e.name}),u.jsx("p",{className:"text-white/60 text-xs",children:e.description})]})]},t))})]}),u.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-xl p-3",children:[u.jsx("h3",{className:"text-purple-400 font-semibold mb-2",children:"💡 Mẹo"}),u.jsxs("ul",{className:"text-white/70 text-sm space-y-1",children:[u.jsx("li",{children:"• Nhấn vào nguyên tố để xem mô hình nguyên tử 3D"}),u.jsx("li",{children:"• Dùng nút tìm kiếm để tìm nhanh nguyên tố"}),u.jsx("li",{children:"• Kéo để xoay mô hình 3D, cuộn để zoom"})]})]})]})]})}),oi=r=>{const{atomicNumber:e,period:t,group:n}=r;return e>=57&&e<=71?{row:8,col:e-54}:e>=89&&e<=103?{row:9,col:e-86}:n===0?null:{row:t,col:n}},ai=({onSelectElement:r})=>{const[e,t]=I.useState(!1),n=I.useMemo(()=>{const a=new Map;return En.forEach(l=>{const c=oi(l);c&&a.set(`${c.row}-${c.col}`,l)}),a},[]),i=()=>{const a=[];for(let h=1;h<=7;h++){const d=[];for(let g=1;g<=18;g++){const m=n.get(`${h}-${g}`);m?d.push(u.jsx("div",{className:"flex items-center justify-center",children:u.jsx(et,{element:m,onClick:r,size:"md"})},`${h}-${g}`)):d.push(u.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16"},`${h}-${g}`))}a.push(u.jsx("div",{className:"flex gap-0.5 sm:gap-1 justify-center",children:d},`row-${h}`))}a.push(u.jsx("div",{className:"h-4 sm:h-6"},"separator"));const l=[];l.push(u.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16"},"spacer-left")),l.push(u.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16"},"spacer-left-2"));for(let h=3;h<=17;h++){const d=n.get(`8-${h}`);d?l.push(u.jsx("div",{className:"flex items-center justify-center",children:u.jsx(et,{element:d,onClick:r,size:"md"})},`8-${h}`)):l.push(u.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16"},`8-${h}`))}l.push(u.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16"},"spacer-right")),a.push(u.jsx("div",{className:"flex gap-0.5 sm:gap-1 justify-center",children:l},"lanthanides"));const c=[];c.push(u.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16"},"spacer-left")),c.push(u.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16"},"spacer-left-2"));for(let h=3;h<=17;h++){const d=n.get(`9-${h}`);d?c.push(u.jsx("div",{className:"flex items-center justify-center",children:u.jsx(et,{element:d,onClick:r,size:"md"})},`9-${h}`)):c.push(u.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16"},`9-${h}`))}return c.push(u.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16"},"spacer-right")),a.push(u.jsx("div",{className:"flex gap-0.5 sm:gap-1 justify-center",children:c},"actinides")),a},s=Object.entries(Se).filter(([a])=>a!=="unknown"),o={"alkali-metal":"Kim loại kiềm","alkaline-earth":"Kim loại kiềm thổ","transition-metal":"Kim loại chuyển tiếp","post-transition":"Kim loại sau chuyển tiếp",metalloid:"Á kim",nonmetal:"Phi kim",halogen:"Halogen","noble-gas":"Khí hiếm",lanthanide:"Lanthanide",actinide:"Actinide"};return u.jsxs("div",{className:"w-full overflow-x-auto",children:[u.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 justify-center mb-6 px-2",children:[s.map(([a,l])=>u.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-full text-xs sm:text-sm transition-all",style:{backgroundColor:`${l.color}20`,border:`1px solid ${l.color}`,color:l.color},children:[u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full",style:{backgroundColor:l.color,boxShadow:`0 0 6px ${l.glow}`}}),u.jsx("span",{className:"hidden sm:inline",children:o[a]||a})]},a)),u.jsx("button",{onClick:()=>t(!0),className:"relative z-20 flex items-center justify-center w-8 h-8 rounded-full bg-cyan-500/20 border border-cyan-500/50 text-cyan-400 hover:bg-cyan-500/30 hover:border-cyan-400 transition-all",title:"Xem hướng dẫn",children:u.jsx(wn,{size:18})})]}),u.jsx("div",{className:"flex flex-col gap-0.5 sm:gap-1 min-w-fit px-2",children:i()}),e&&u.jsx(si,{onClose:()=>t(!1)})]})},li=({element:r})=>{const e=I.useRef(null);_n(n=>{e.current&&(e.current.rotation.x=n.clock.getElapsedTime()*.15,e.current.rotation.y=n.clock.getElapsedTime()*.2)});const t=I.useMemo(()=>{const n=r.atomicNumber,i=Math.round(r.atomicMass-n),s=Math.min(n+i,50),o=[],a=.12;for(let l=0;l<s;l++){const c=l<n,h=Math.acos(1-2*(l+.5)/s),d=Math.PI*(1+Math.sqrt(5))*l,g=a*2*Math.pow(s/8,.4)*(.9+Math.random()*.2);o.push({pos:[g*Math.sin(h)*Math.cos(d),g*Math.sin(h)*Math.sin(d),g*Math.cos(h)],isProton:c})}return o},[r.atomicNumber,r.atomicMass]);return u.jsx("group",{ref:e,children:t.map((n,i)=>u.jsxs("mesh",{position:n.pos,children:[u.jsx("sphereGeometry",{args:[.12,24,24]}),u.jsx("meshStandardMaterial",{color:n.isProton?"#FF4444":"#4488FF",emissive:n.isProton?"#FF2222":"#2266FF",emissiveIntensity:.3,metalness:.4,roughness:.3})]},i))})},ci=({element:r})=>{const e=I.useRef(null),t=I.useRef(null),n=Se[r.category],{totalElectrons:i,shellRadii:s,electronsPerShell:o,orbitTilts:a}=I.useMemo(()=>{const l=r.electronShells,c=l.reduce((g,m)=>g+m,0),h=l.map((g,m)=>1.2+m*.7),d=l.map((g,m)=>({x:(Math.random()-.5)*Math.PI*.5+m*.2,y:(Math.random()-.5)*Math.PI*.3,z:m*.3}));return{totalElectrons:c,shellRadii:h,electronsPerShell:l,orbitTilts:d}},[r.electronShells]);return _n(l=>{if(!e.current)return;const c=l.clock.getElapsedTime(),h=new Wr,d=new Mt,g=new Jr,m=new Mt(1,1,1);let f=0;o.forEach((y,p)=>{const v=s[p],_=2/(p+1),b=a[p];for(let k=0;k<y;k++){const C=k/y*Math.PI*2+c*_,P=Math.cos(C)*v,A=Math.sin(C)*v;d.set(P,A,0);const M=Math.cos(b.x),$t=Math.sin(b.x),Lr=d.y*M-d.z*$t,Ur=d.y*$t+d.z*M;d.y=Lr,d.z=Ur;const Dt=Math.cos(b.y),Bt=Math.sin(b.y),qr=d.x*Dt+d.z*Bt;d.z=-d.x*Bt+d.z*Dt,d.x=qr,h.compose(d,g,m),e.current.setMatrixAt(f,h),f++}}),e.current.instanceMatrix.needsUpdate=!0}),u.jsxs(u.Fragment,{children:[u.jsx("group",{ref:t,children:s.map((l,c)=>u.jsxs("mesh",{rotation:[a[c].x,a[c].y,0],children:[u.jsx("torusGeometry",{args:[l,.015,8,100]}),u.jsx("meshStandardMaterial",{color:n.color,transparent:!0,opacity:.25,emissive:n.color,emissiveIntensity:.15})]},`ring-${c}`))}),u.jsxs("instancedMesh",{ref:e,args:[void 0,void 0,i],children:[u.jsx("sphereGeometry",{args:[.08,20,20]}),u.jsx("meshStandardMaterial",{color:"#00FFFF",emissive:"#00CCFF",emissiveIntensity:.8,metalness:.6,roughness:.2})]}),u.jsxs("instancedMesh",{args:[void 0,void 0,i],children:[u.jsx("sphereGeometry",{args:[.12,8,8]}),u.jsx("meshBasicMaterial",{color:"#00FFFF",transparent:!0,opacity:.3})]})]})},hi=({element:r})=>u.jsxs(u.Fragment,{children:[u.jsx("ambientLight",{intensity:.4}),u.jsx("pointLight",{position:[10,10,10],intensity:1.2,color:"#ffffff"}),u.jsx("pointLight",{position:[-10,-5,-10],intensity:.6,color:"#4488FF"}),u.jsx("pointLight",{position:[0,-10,5],intensity:.4,color:"#FF4444"}),u.jsx("directionalLight",{position:[5,5,5],intensity:.5}),u.jsx(li,{element:r}),u.jsx(ci,{element:r}),u.jsx(Yr,{radius:100,depth:50,count:800,factor:2,fade:!0,speed:.5})]}),ui=({element:r})=>{const e=I.useMemo(()=>4+r.electronShells.length*.9,[r.electronShells.length]);return u.jsx("div",{className:"w-full h-full min-h-[300px]",children:u.jsxs(Gr,{camera:{position:[e*.7,e*.5,e],fov:50},dpr:[1,2],children:[u.jsx(hi,{element:r}),u.jsx(zr,{enablePan:!1,minDistance:2,maxDistance:20,autoRotate:!0,autoRotateSpeed:.3})]})})};var V={},xe={},ht=function(r,e){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},ht(r,e)};function kn(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ht(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Le=function(){return Le=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Le.apply(this,arguments)};function me(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function Sn(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function Pn(r,e){return function(t,n){e(t,n,r)}}function Cn(r,e,t,n,i,s){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var a=n.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&r?n.static?r:r.prototype:null,h=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),d,g=!1,m=t.length-1;m>=0;m--){var f={};for(var y in n)f[y]=y==="access"?{}:n[y];for(var y in n.access)f.access[y]=n.access[y];f.addInitializer=function(v){if(g)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(v||null))};var p=(0,t[m])(a==="accessor"?{get:h.get,set:h.set}:h[l],f);if(a==="accessor"){if(p===void 0)continue;if(p===null||typeof p!="object")throw new TypeError("Object expected");(d=o(p.get))&&(h.get=d),(d=o(p.set))&&(h.set=d),(d=o(p.init))&&i.unshift(d)}else(d=o(p))&&(a==="field"?i.unshift(d):h[l]=d)}c&&Object.defineProperty(c,n.name,h),g=!0}function xn(r,e,t){for(var n=arguments.length>2,i=0;i<e.length;i++)t=n?e[i].call(r,t):e[i].call(r);return n?t:void 0}function Tn(r){return typeof r=="symbol"?r:"".concat(r)}function An(r,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function jn(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function w(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{c(n.next(h))}catch(d){o(d)}}function l(h){try{c(n.throw(h))}catch(d){o(d)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((n=n.apply(r,e||[])).next())})}function On(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(h){return l([c,h])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(h){c=[6,h],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var We=Object.create?(function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}):(function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]});function Nn(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&We(e,r,t)}function Ue(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xt(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function Rn(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(xt(arguments[e]));return r}function Fn(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function In(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}function de(r){return this instanceof de?(this.v=r,this):new de(r)}function $n(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(f){return Promise.resolve(f).then(m,d)}}function a(m,f){n[m]&&(i[m]=function(y){return new Promise(function(p,v){s.push([m,y,p,v])>1||l(m,y)})},f&&(i[m]=f(i[m])))}function l(m,f){try{c(n[m](f))}catch(y){g(s[0][3],y)}}function c(m){m.value instanceof de?Promise.resolve(m.value.v).then(h,d):g(s[0][2],m)}function h(m){l("next",m)}function d(m){l("throw",m)}function g(m,f){m(f),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Dn(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=r[i]?function(o){return(t=!t)?{value:de(r[i](o)),done:!1}:s?s(o):o}:s}}function Bn(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Ue=="function"?Ue(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,l){o=r[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}function Mn(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}var di=Object.create?(function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}):function(r,e){r.default=e},ut=function(r){return ut=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},ut(r)};function Ln(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t=ut(r),n=0;n<t.length;n++)t[n]!=="default"&&We(e,r,t[n]);return di(e,r),e}function Un(r){return r&&r.__esModule?r:{default:r}}function qn(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function Hn(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}function Kn(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function Vn(r,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],t&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),r.stack.push({value:e,dispose:n,async:t})}else t&&r.stack.push({async:!0});return e}var gi=typeof SuppressedError=="function"?SuppressedError:function(r,e,t){var n=new Error(t);return n.name="SuppressedError",n.error=r,n.suppressed=e,n};function Gn(r){function e(s){r.error=r.hasError?new gi(s,r.error,"An error was suppressed during disposal."):s,r.hasError=!0}var t,n=0;function i(){for(;t=r.stack.pop();)try{if(!t.async&&n===1)return n=0,r.stack.push(t),Promise.resolve().then(i);if(t.dispose){var s=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else n|=1}catch(o){e(o)}if(n===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return i()}function zn(r,e){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,n,i,s,o){return n?e?".jsx":".js":i&&(!s||!o)?t:i+s+"."+o.toLowerCase()+"js"}):r}const mi={__extends:kn,__assign:Le,__rest:me,__decorate:Sn,__param:Pn,__esDecorate:Cn,__runInitializers:xn,__propKey:Tn,__setFunctionName:An,__metadata:jn,__awaiter:w,__generator:On,__createBinding:We,__exportStar:Nn,__values:Ue,__read:xt,__spread:Rn,__spreadArrays:Fn,__spreadArray:In,__await:de,__asyncGenerator:$n,__asyncDelegator:Dn,__asyncValues:Bn,__makeTemplateObject:Mn,__importStar:Ln,__importDefault:Un,__classPrivateFieldGet:qn,__classPrivateFieldSet:Hn,__classPrivateFieldIn:Kn,__addDisposableResource:Vn,__disposeResources:Gn,__rewriteRelativeImportExtension:zn},fi=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Vn,get __assign(){return Le},__asyncDelegator:Dn,__asyncGenerator:$n,__asyncValues:Bn,__await:de,__awaiter:w,__classPrivateFieldGet:qn,__classPrivateFieldIn:Kn,__classPrivateFieldSet:Hn,__createBinding:We,__decorate:Sn,__disposeResources:Gn,__esDecorate:Cn,__exportStar:Nn,__extends:kn,__generator:On,__importDefault:Un,__importStar:Ln,__makeTemplateObject:Mn,__metadata:jn,__param:Pn,__propKey:Tn,__read:xt,__rest:me,__rewriteRelativeImportExtension:zn,__runInitializers:xn,__setFunctionName:An,__spread:Rn,__spreadArray:In,__spreadArrays:Fn,__values:Ue,default:mi},Symbol.toStringTag,{value:"Module"})),pi=r=>r?(...e)=>r(...e):(...e)=>fetch(...e);let Je=class extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}},Yn=class extends Je{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},dt=class extends Je{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},gt=class extends Je{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var qe;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(qe||(qe={}));class yi{constructor(e,{headers:t={},customFetch:n,region:i=qe.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=pi(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return w(this,arguments,void 0,function*(t,n={}){var i;let s,o;try{const{headers:a,method:l,body:c,signal:h,timeout:d}=n;let g={},{region:m}=n;m||(m=this.region);const f=new URL(`${this.url}/${t}`);m&&m!=="any"&&(g["x-region"]=m,f.searchParams.set("forceFunctionRegion",m));let y;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",y=c):typeof c=="string"?(g["Content-Type"]="text/plain",y=c):typeof FormData<"u"&&c instanceof FormData?y=c:(g["Content-Type"]="application/json",y=JSON.stringify(c)):y=c;let p=h;d&&(o=new AbortController,s=setTimeout(()=>o.abort(),d),h?(p=o.signal,h.addEventListener("abort",()=>o.abort())):p=o.signal);const v=yield this.fetch(f.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),a),body:y,signal:p}).catch(C=>{throw new Yn(C)}),_=v.headers.get("x-relay-error");if(_&&_==="true")throw new dt(v);if(!v.ok)throw new gt(v);let b=((i=v.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),k;return b==="application/json"?k=yield v.json():b==="application/octet-stream"||b==="application/pdf"?k=yield v.blob():b==="text/event-stream"?k=v:b==="multipart/form-data"?k=yield v.formData():k=yield v.text(),{data:k,error:null,response:v}}catch(a){return{data:null,error:a,response:a instanceof gt||a instanceof dt?a.context:void 0}}finally{s&&clearTimeout(s)}})}}const bi=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return qe},FunctionsClient:yi,FunctionsError:Je,FunctionsFetchError:Yn,FunctionsHttpError:gt,FunctionsRelayError:dt},Symbol.toStringTag,{value:"Module"})),Wn=ke(bi);var F={};const fe=ke(fi);var Te={},Ae={},je={},Oe={},Ne={},Re={},Ht;function Jn(){if(Ht)return Re;Ht=1,Object.defineProperty(Re,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Re.default=r,Re}var Kt;function Xn(){if(Kt)return Ne;Kt=1,Object.defineProperty(Ne,"__esModule",{value:!0});const e=fe.__importDefault(Jn());let t=class{constructor(i){var s,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(s=i.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=new Headers(this.headers),this.headers.set(i,s),this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,h,d,g;let m=null,f=null,y=null,p=l.status,v=l.statusText;if(l.ok){if(this.method!=="HEAD"){const C=await l.text();C===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?f=C:f=JSON.parse(C))}const b=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),k=(d=l.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");b&&k&&k.length>1&&(y=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(m={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,y=null,p=406,v="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const b=await l.text();try{m=JSON.parse(b),Array.isArray(m)&&l.status===404&&(f=[],m=null,p=200,v="OK")}catch{l.status===404&&b===""?(p=204,v="No Content"):m={message:b}}if(m&&this.isMaybeSingle&&(!((g=m==null?void 0:m.details)===null||g===void 0)&&g.includes("0 rows"))&&(m=null,p=200,v="OK"),m&&this.shouldThrowOnError)throw new e.default(m)}return{error:m,data:f,count:y,status:p,statusText:v}});return this.shouldThrowOnError||(a=a.catch(l=>{var c,h,d,g,m,f;let y="";const p=l==null?void 0:l.cause;if(p){const v=(c=p==null?void 0:p.message)!==null&&c!==void 0?c:"",_=(h=p==null?void 0:p.code)!==null&&h!==void 0?h:"";y=`${(d=l==null?void 0:l.name)!==null&&d!==void 0?d:"FetchError"}: ${l==null?void 0:l.message}`,y+=`

Caused by: ${(g=p==null?void 0:p.name)!==null&&g!==void 0?g:"Error"}: ${v}`,_&&(y+=` (${_})`),p!=null&&p.stack&&(y+=`
${p.stack}`)}else y=(m=l==null?void 0:l.stack)!==null&&m!==void 0?m:"";return{error:{message:`${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"FetchError"}: ${l==null?void 0:l.message}`,details:y,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(i,s)}returns(){return this}overrideTypes(){return this}};return Ne.default=t,Ne}var Vt;function Qn(){if(Vt)return Oe;Vt=1,Object.defineProperty(Oe,"__esModule",{value:!0});const e=fe.__importDefault(Xn());let t=class extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",h=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${h?`${h},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var h;const d=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),g=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${g}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};return Oe.default=t,Oe}var Gt;function Tt(){if(Gt)return je;Gt=1,Object.defineProperty(je,"__esModule",{value:!0});const e=fe.__importDefault(Qn()),t=new RegExp("[,()]");let n=class extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}regexMatch(s,o){return this.url.searchParams.append(s,`match.${o}`),this}regexIMatch(s,o){return this.url.searchParams.append(s,`imatch.${o}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}isDistinct(s,o){return this.url.searchParams.append(s,`isdistinct.${o}`),this}in(s,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&t.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:a,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const h=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${c}fts${h}.${o}`),this}match(s){return Object.entries(s).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(s,o,a){return this.url.searchParams.append(s,`not.${o}.${a}`),this}or(s,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,o,a){return this.url.searchParams.append(s,`${o}.${a}`),this}};return je.default=n,je}var zt;function Zn(){if(zt)return Ae;zt=1,Object.defineProperty(Ae,"__esModule",{value:!0});const e=fe.__importDefault(Tt());let t=class{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=new Headers(s),this.schema=o,this.fetch=a}select(i,s){const{head:o=!1,count:a}=s??{},l=o?"HEAD":"GET";let c=!1;const h=(i??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",h),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:o=!0}={}){var a;const l="POST";if(s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const c=i.reduce((h,d)=>h.concat(Object.keys(d)),[]);if(c.length>0){const h=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const h="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((g,m)=>g.concat(Object.keys(m)),[]);if(d.length>0){const g=[...new Set(d)].map(m=>`"${m}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(i,{count:s}={}){var o;const a="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var s;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};return Ae.default=t,Ae}var Yt;function vi(){if(Yt)return Te;Yt=1,Object.defineProperty(Te,"__esModule",{value:!0});const r=fe,e=r.__importDefault(Zn()),t=r.__importDefault(Tt());let n=class er{constructor(s,{headers:o={},schema:a,fetch:l}={}){this.url=s,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(s){if(!s||typeof s!="string"||s.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${s}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new er(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,o={},{head:a=!1,get:l=!1,count:c}={}){var h;let d;const g=new URL(`${this.url}/rpc/${s}`);let m;a||l?(d=a?"HEAD":"GET",Object.entries(o).filter(([y,p])=>p!==void 0).map(([y,p])=>[y,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([y,p])=>{g.searchParams.append(y,p)})):(d="POST",m=o);const f=new Headers(this.headers);return c&&f.set("Prefer",`count=${c}`),new t.default({method:d,url:g,headers:f,schema:this.schemaName,body:m,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};return Te.default=n,Te}var Wt;function tr(){if(Wt)return F;Wt=1,Object.defineProperty(F,"__esModule",{value:!0}),F.PostgrestError=F.PostgrestBuilder=F.PostgrestTransformBuilder=F.PostgrestFilterBuilder=F.PostgrestQueryBuilder=F.PostgrestClient=void 0;const r=fe,e=r.__importDefault(vi());F.PostgrestClient=e.default;const t=r.__importDefault(Zn());F.PostgrestQueryBuilder=t.default;const n=r.__importDefault(Tt());F.PostgrestFilterBuilder=n.default;const i=r.__importDefault(Qn());F.PostgrestTransformBuilder=i.default;const s=r.__importDefault(Xn());F.PostgrestBuilder=s.default;const o=r.__importDefault(Jn());return F.PostgrestError=o.default,F.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:o.default},F}class nr{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const n=t.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const wi="2.87.1",_i=`realtime-js/${wi}`,rr="1.0.0",Ei="2.0.0",Jt=rr,mt=1e4,ki=1e3,Si=100;var te;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(te||(te={}));var j;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(j||(j={}));var q;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(q||(q={}));var ft;(function(r){r.websocket="websocket"})(ft||(ft={}));var ne;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(ne||(ne={}));class Pi{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,n;const i=(n=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var t,n;const i=(n=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,t,n){var i,s;const o=e.topic,a=(i=e.ref)!==null&&i!==void 0?i:"",l=(s=e.join_ref)!==null&&s!==void 0?s:"",c=e.payload.event,h=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(h).length===0?"":JSON.stringify(h);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const g=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+d.length,m=new ArrayBuffer(this.HEADER_LENGTH+g);let f=new DataView(m),y=0;f.setUint8(y++,this.KINDS.userBroadcastPush),f.setUint8(y++,l.length),f.setUint8(y++,a.length),f.setUint8(y++,o.length),f.setUint8(y++,c.length),f.setUint8(y++,d.length),f.setUint8(y++,t),Array.from(l,v=>f.setUint8(y++,v.charCodeAt(0))),Array.from(a,v=>f.setUint8(y++,v.charCodeAt(0))),Array.from(o,v=>f.setUint8(y++,v.charCodeAt(0))),Array.from(c,v=>f.setUint8(y++,v.charCodeAt(0))),Array.from(d,v=>f.setUint8(y++,v.charCodeAt(0)));var p=new Uint8Array(m.byteLength+n.byteLength);return p.set(new Uint8Array(m),0),p.set(new Uint8Array(n),m.byteLength),p.buffer}decode(e,t){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return t(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,s,o,a,l]=n;return t({join_ref:i,ref:s,topic:o,event:a,payload:l})}return t({})}_binaryDecode(e){const t=new DataView(e),n=t.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,i)}}_decodeUserBroadcast(e,t,n){const i=t.getUint8(1),s=t.getUint8(2),o=t.getUint8(3),a=t.getUint8(4);let l=this.HEADER_LENGTH+4;const c=n.decode(e.slice(l,l+i));l=l+i;const h=n.decode(e.slice(l,l+s));l=l+s;const d=n.decode(e.slice(l,l+o));l=l+o;const g=e.slice(l,e.byteLength),m=a===this.JSON_ENCODING?JSON.parse(n.decode(g)):g,f={type:this.BROADCAST_EVENT,event:h,payload:m};return o>0&&(f.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:f}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>t.includes(n)))}}class ir{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var x;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(x||(x={}));const Xt=(r,e,t={})=>{var n;const i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=Ci(o,r,e,i),s),{}):{}},Ci=(r,e,t,n)=>{const i=e.find(a=>a.name===r),s=i==null?void 0:i.type,o=t[r];return s&&!n.includes(s)?sr(s,o):pt(o)},sr=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return ji(e,t)}switch(r){case x.bool:return xi(e);case x.float4:case x.float8:case x.int2:case x.int4:case x.int8:case x.numeric:case x.oid:return Ti(e);case x.json:case x.jsonb:return Ai(e);case x.timestamp:return Oi(e);case x.abstime:case x.date:case x.daterange:case x.int4range:case x.int8range:case x.money:case x.reltime:case x.text:case x.time:case x.timestamptz:case x.timetz:case x.tsrange:case x.tstzrange:return pt(e);default:return pt(e)}},pt=r=>r,xi=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Ti=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Ai=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},ji=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let s;const o=r.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>sr(e,a))}return r},Oi=r=>typeof r=="string"?r.replace(" ","T"):r,or=r=>{const e=new URL(r);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class tt{constructor(e,t,n={},i=mt){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var yt;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(yt||(yt={}));let ar=class $e{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$e.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=$e.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=$e.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(c,h)=>{o[c]||(l[c]=h)}),this.map(o,(c,h)=>{const d=s[c];if(d){const g=h.map(p=>p.presence_ref),m=d.map(p=>p.presence_ref),f=h.filter(p=>m.indexOf(p.presence_ref)<0),y=d.filter(p=>g.indexOf(p.presence_ref)<0);f.length>0&&(a[c]=f),y.length>0&&(l[c]=y)}else a[c]=h}),this.syncDiff(s,{joins:a,leaves:l},n,i)}static syncDiff(e,t,n,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const h=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),h.length>0){const d=e[a].map(m=>m.presence_ref),g=h.filter(m=>d.indexOf(m.presence_ref)<0);e[a].unshift(...g)}n(a,h,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const h=l.map(d=>d.presence_ref);c=c.filter(d=>h.indexOf(d.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return"metas"in i?t[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[n]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var bt;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(bt||(bt={}));var he;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(he||(he={}));var H;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(H||(H={}));const Ni=j;let lr=class be{constructor(e,t={config:{}},n){var i,s;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=j.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new tt(this,q.join,this.params,this.timeout),this.rejoinTimer=new ir(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=j.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=j.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=j.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=j.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=j.errored,this.rejoinTimer.scheduleTimeout())}),this._on(q.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new ar(this),this.broadcastEndpointURL=or(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==j.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[he.PRESENCE]&&this.bindings[he.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,d={},g={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:h}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(H.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(H.CLOSED)),this.updateJoinPayload(Object.assign({config:g},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var f;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){e==null||e(H.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,p=(f=y==null?void 0:y.length)!==null&&f!==void 0?f:0,v=[];for(let _=0;_<p;_++){const b=y[_],{filter:{event:k,schema:C,table:P,filter:A}}=b,K=m&&m[_];if(K&&K.event===k&&be.isFilterValueEqual(K.schema,C)&&be.isFilterValueEqual(K.table,P)&&be.isFilterValueEqual(K.filter,A))v.push(Object.assign(Object.assign({},b),{id:K.id}));else{this.unsubscribe(),this.state=j.errored,e==null||e(H.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(H.SUBSCRIBED);return}}).receive("error",m=>{this.state=j.errored,e==null||e(H.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(H.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===j.joined&&e===he.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,t={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=j.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(q.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new tt(this,q.leave,{},e),n.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=j.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new tt(this,e,t,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Si){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:h}=q;if(n&&[a,l,c,h].indexOf(o)>=0&&n!==this._joinRef())return;let g=this._onMessage(o,t,n);if(t&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var f,y,p;return((f=m.filter)===null||f===void 0?void 0:f.event)==="*"||((p=(y=m.filter)===null||y===void 0?void 0:y.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===o}).map(m=>m.callback(g,n)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var f,y,p,v,_,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const k=m.id,C=(f=m.filter)===null||f===void 0?void 0:f.event;return k&&((y=t.ids)===null||y===void 0?void 0:y.includes(k))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((p=t.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const k=(_=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return k==="*"||k===((b=t==null?void 0:t.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof g=="object"&&"ids"in g){const f=g.data,{schema:y,table:p,commit_timestamp:v,type:_,errors:b}=f;g=Object.assign(Object.assign({},{schema:y,table:p,commit_timestamp:v,eventType:_,new:{},old:{},errors:b}),this._getPayloadRecords(f))}m.callback(g,n)})}_isClosed(){return this.state===j.closed}_isJoined(){return this.state===j.joined}_isJoining(){return this.state===j.joining}_isLeaving(){return this.state===j.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&be.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(q.close,{},e)}_onError(e){this._on(q.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=j.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Xt(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Xt(e.columns,e.old_record)),t}};const nt=()=>{},Fe={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ri=[1e3,2e3,5e3,1e4],Fi=1e4,Ii=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let $i=class{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mt,this.transport=null,this.heartbeatIntervalMs=Fe.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=nt,this.ref=0,this.reconnectTimer=null,this.vsn=Jt,this.logger=nt,this.conn=null,this.sendBuffer=[],this.serializer=new Pi,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((n=t==null?void 0:t.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${ft.websocket}`,this.httpEndpoint=or(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=nr.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case te.connecting:return ne.Connecting;case te.open:return ne.Open;case te.closing:return ne.Closing;default:return ne.Closed}}isConnected(){return this.connectionState()===ne.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new lr(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:n,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ki,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Fe.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:s,ref:o}=t,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${n} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===te.open||this.conn.readyState===te.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(q.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([Ii],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,n=!1;if(e)t=e,n=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),t=this.accessTokenValue}else t=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(i=>{const s={access_token:t,version:_i};t&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(q.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new ir(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fe.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,i,s,o,a,l,c,h,d,g,m;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:mt,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Fe.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:nt,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Jt,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:(f=>Ri[f-1]||Fi),this.vsn){case rr:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:((f,y)=>y(JSON.stringify(f))),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:((f,y)=>y(JSON.parse(f)));break;case Ei:this.encode=(g=e==null?void 0:e.encode)!==null&&g!==void 0?g:this.serializer.encode.bind(this.serializer),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const Di=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:Ni,get REALTIME_LISTEN_TYPES(){return he},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return bt},get REALTIME_PRESENCE_LISTEN_EVENTS(){return yt},get REALTIME_SUBSCRIBE_STATES(){return H},RealtimeChannel:lr,RealtimeClient:$i,RealtimePresence:ar,WebSocketFactory:nr},Symbol.toStringTag,{value:"Module"})),cr=ke(Di);class Pe extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function T(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class hr extends Pe{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class He extends Pe{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const At=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Bi=()=>Response,vt=r=>{if(Array.isArray(r))return r.map(t=>vt(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=vt(n)}),e},Mi=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Li=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r),rt=r=>{var e;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(e=r.error)===null||e===void 0?void 0:e.message)||JSON.stringify(r)},Ui=(r,e,t)=>w(void 0,void 0,void 0,function*(){const n=yield Bi();r instanceof n&&!(t!=null&&t.noResolveJson)?r.json().then(i=>{const s=r.status||500,o=(i==null?void 0:i.statusCode)||s+"";e(new hr(rt(i),s,o))}).catch(i=>{e(new He(rt(i),i))}):e(new He(rt(r),r))}),qi=(r,e,t,n)=>{const i={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!n?i:(Mi(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function Ce(r,e,t,n,i,s){return w(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,qi(e,n,i,s)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Ui(l,a,n))})})}function _e(r,e,t,n){return w(this,void 0,void 0,function*(){return Ce(r,"GET",e,t,n)})}function U(r,e,t,n,i){return w(this,void 0,void 0,function*(){return Ce(r,"POST",e,n,i,t)})}function wt(r,e,t,n,i){return w(this,void 0,void 0,function*(){return Ce(r,"PUT",e,n,i,t)})}function Hi(r,e,t,n){return w(this,void 0,void 0,function*(){return Ce(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function jt(r,e,t,n,i){return w(this,void 0,void 0,function*(){return Ce(r,"DELETE",e,n,i,t)})}class Ki{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return w(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(T(e))return{data:null,error:e};throw e}})}}var ur;class Vi{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[ur]="BlobDownloadBuilder",this.promise=null}asStream(){return new Ki(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return w(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(T(e))return{data:null,error:e};throw e}})}}ur=Symbol.toStringTag;const Gi={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Qt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class zi{constructor(e,t={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=At(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,i){return w(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},Qt),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(t),h=this._getFinalPath(c),d=yield(e=="PUT"?wt:U)(this.fetch,`${this.url}/object/${h}`,s,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(T(s))return{data:null,error:s};throw s}})}upload(e,t,n){return w(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,i){return w(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:Qt.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType);const d=yield wt(this.fetch,a.toString(),l,{headers:h});return{data:{path:s,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(T(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return w(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield U(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new Pe("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(T(n))return{data:null,error:n};throw n}})}update(e,t,n){return w(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return w(this,void 0,void 0,function*(){try{return{data:yield U(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(T(i))return{data:null,error:i};throw i}})}copy(e,t,n){return w(this,void 0,void 0,function*(){try{return{data:{path:(yield U(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(T(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,n){return w(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield U(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(T(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,n){return w(this,void 0,void 0,function*(){try{const i=yield U(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(T(i))return{data:null,error:i};throw i}})}download(e,t){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"",a=this._getFinalPath(e),l=()=>_e(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new Vi(l,this.shouldThrowOnError)}info(e){return w(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield _e(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:vt(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(T(n))return{data:null,error:n};throw n}})}exists(e){return w(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Hi(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(T(n)&&n instanceof He){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(e){return w(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(T(t))return{data:null,error:t};throw t}})}list(e,t,n){return w(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Gi),t),{prefix:e||""});return{data:yield U(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(T(i))return{data:null,error:i};throw i}})}listV2(e,t){return w(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield U(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(T(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const dr="2.87.1",gr={"X-Client-Info":`storage-js/${dr}`};class Yi{constructor(e,t={},n,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gr),t),this.fetch=At(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return w(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield _e(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(T(t))return{data:null,error:t};throw t}})}getBucket(e){return w(this,void 0,void 0,function*(){try{return{data:yield _e(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(T(t))return{data:null,error:t};throw t}})}createBucket(e){return w(this,arguments,void 0,function*(t,n={public:!1}){try{return{data:yield U(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(T(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return w(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(T(n))return{data:null,error:n};throw n}})}emptyBucket(e){return w(this,void 0,void 0,function*(){try{return{data:yield U(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(T(t))return{data:null,error:t};throw t}})}deleteBucket(e){return w(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(T(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var Ee=class extends Error{constructor(r,e){var t;super(r),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Wi(r,e,t){const n=new URL(e,r);if(t)for(const[i,s]of Object.entries(t))s!==void 0&&n.searchParams.set(i,s);return n.toString()}async function Ji(r){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?await r.getHeaders():{}}function Xi(r){const e=r.fetchImpl??globalThis.fetch;return{async request({method:t,path:n,query:i,body:s,headers:o}){const a=Wi(r.baseUrl,n,i),l=await Ji(r.auth),c=await e(a,{method:t,headers:{...s?{"Content-Type":"application/json"}:{},...l,...o},body:s?JSON.stringify(s):void 0}),h=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),g=d&&h?JSON.parse(h):h;if(!c.ok){const m=d?g:void 0,f=m==null?void 0:m.error;throw new Ee((f==null?void 0:f.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:f==null?void 0:f.type,icebergCode:f==null?void 0:f.code,details:m})}return{status:c.status,headers:c.headers,data:g}}}}function Ie(r){return r.join("")}var Qi=class{constructor(r,e=""){this.client=r,this.prefix=e}async listNamespaces(r){const e=r?{parent:Ie(r.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(r,e){const t={namespace:r.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ie(r.namespace)}`})}async loadNamespaceMetadata(r){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ie(r.namespace)}`})).data.properties}}async namespaceExists(r){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ie(r.namespace)}`}),!0}catch(e){if(e instanceof Ee&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(r,e){try{return await this.createNamespace(r,e)}catch(t){if(t instanceof Ee&&t.status===409)return;throw t}}};function ie(r){return r.join("")}var Zi=class{constructor(r,e="",t){this.client=r,this.prefix=e,this.accessDelegation=t}async listTables(r){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ie(r.namespace)}/tables`})).data.identifiers}async createTable(r,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ie(r.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(r,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ie(r.namespace)}/tables/${r.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(r,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ie(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(r){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ie(r.namespace)}/tables/${r.name}`,headers:e})).data.metadata}async tableExists(r){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ie(r.namespace)}/tables/${r.name}`,headers:e}),!0}catch(t){if(t instanceof Ee&&t.status===404)return!1;throw t}}async createTableIfNotExists(r,e){try{return await this.createTable(r,e)}catch(t){if(t instanceof Ee&&t.status===409)return await this.loadTable({namespace:r.namespace,name:e.name});throw t}}},es=class{constructor(r){var n;let e="v1";r.catalogName&&(e+=`/${r.catalogName}`);const t=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=Xi({baseUrl:t,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=(n=r.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new Qi(this.client,e),this.tableOps=new Zi(this.client,e,this.accessDelegation)}async listNamespaces(r){return this.namespaceOps.listNamespaces(r)}async createNamespace(r,e){return this.namespaceOps.createNamespace(r,e)}async dropNamespace(r){await this.namespaceOps.dropNamespace(r)}async loadNamespaceMetadata(r){return this.namespaceOps.loadNamespaceMetadata(r)}async listTables(r){return this.tableOps.listTables(r)}async createTable(r,e){return this.tableOps.createTable(r,e)}async updateTable(r,e){return this.tableOps.updateTable(r,e)}async dropTable(r,e){await this.tableOps.dropTable(r,e)}async loadTable(r){return this.tableOps.loadTable(r)}async namespaceExists(r){return this.namespaceOps.namespaceExists(r)}async tableExists(r){return this.tableOps.tableExists(r)}async createNamespaceIfNotExists(r,e){return this.namespaceOps.createNamespaceIfNotExists(r,e)}async createTableIfNotExists(r,e){return this.tableOps.createTableIfNotExists(r,e)}};class mr{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gr),t),this.fetch=At(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return w(this,void 0,void 0,function*(){try{return{data:yield U(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(T(t))return{data:null,error:t};throw t}})}listBuckets(e){return w(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const n=t.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield _e(this.fetch,i,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(T(t))return{data:null,error:t};throw t}})}deleteBucket(e){return w(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(T(t))return{data:null,error:t};throw t}})}from(e){if(!Li(e))throw new Pe("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new es({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>w(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(t,{get(s,o){const a=s[o];return typeof a!="function"?a:(...l)=>w(this,void 0,void 0,function*(){try{return{data:yield a.apply(s,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}})}})}}const Ot={"X-Client-Info":`storage-js/${dr}`,"Content-Type":"application/json"};class Nt extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function D(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class De extends Nt{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class fr extends Nt{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var _t;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(_t||(_t={}));const Xe=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),ts=()=>Response,pr=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},ns=r=>Array.from(new Float32Array(r)),rs=(r,e)=>{if(e!==void 0&&r.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${r.float32.length}`)},Zt=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),is=(r,e,t)=>w(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(t!=null&&t.noResolveJson)){const i=r.status||500,s=r;if(typeof s.json=="function")s.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new De(Zt(o),i,a))}).catch(()=>{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new De(a,i,o))});else{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new De(a,i,o))}}else e(new fr(Zt(r),r))}),ss=(r,e,t,n)=>{const i={method:r,headers:(e==null?void 0:e.headers)||{}};return n?(pr(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),t)):i};function os(r,e,t,n,i,s){return w(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,ss(e,n,i,s)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>is(l,a,n))})})}function B(r,e,t,n,i){return w(this,void 0,void 0,function*(){return os(r,"POST",e,n,i,t)})}class yr{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ot),t),this.fetch=Xe(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return w(this,void 0,void 0,function*(){try{return{data:(yield B(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(D(t))return{data:null,error:t};throw t}})}getIndex(e,t){return w(this,void 0,void 0,function*(){try{return{data:yield B(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(D(n))return{data:null,error:n};throw n}})}listIndexes(e){return w(this,void 0,void 0,function*(){try{return{data:yield B(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(D(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return w(this,void 0,void 0,function*(){try{return{data:(yield B(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(D(n))return{data:null,error:n};throw n}})}}class br{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ot),t),this.fetch=Xe(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return w(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield B(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(D(t))return{data:null,error:t};throw t}})}getVectors(e){return w(this,void 0,void 0,function*(){try{return{data:yield B(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(D(t))return{data:null,error:t};throw t}})}listVectors(e){return w(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield B(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(D(t))return{data:null,error:t};throw t}})}queryVectors(e){return w(this,void 0,void 0,function*(){try{return{data:yield B(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(D(t))return{data:null,error:t};throw t}})}deleteVectors(e){return w(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield B(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(D(t))return{data:null,error:t};throw t}})}}class vr{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ot),t),this.fetch=Xe(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return w(this,void 0,void 0,function*(){try{return{data:(yield B(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(D(t))return{data:null,error:t};throw t}})}getBucket(e){return w(this,void 0,void 0,function*(){try{return{data:yield B(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(D(t))return{data:null,error:t};throw t}})}listBuckets(){return w(this,arguments,void 0,function*(e={}){try{return{data:yield B(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(D(t))return{data:null,error:t};throw t}})}deleteBucket(e){return w(this,void 0,void 0,function*(){try{return{data:(yield B(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(D(t))return{data:null,error:t};throw t}})}}class wr extends vr{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new _r(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return w(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return w(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return w(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return w(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class _r extends yr{constructor(e,t,n,i){super(e,t,i),this.vectorBucketName=n}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return w(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return w(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return w(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return w(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Er(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Er extends br{constructor(e,t,n,i,s){super(e,t,s),this.vectorBucketName=n,this.indexName=i}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return w(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return w(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return w(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return w(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return w(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class as extends Yi{constructor(e,t={},n,i){super(e,t,n,i)}from(e){return new zi(this.url,this.headers,e,this.fetch)}get vectors(){return new wr(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new mr(this.url+"/iceberg",this.headers,this.fetch)}}const ls=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:mr,StorageApiError:hr,StorageClient:as,StorageError:Pe,StorageUnknownError:He,StorageVectorsApiError:De,StorageVectorsClient:wr,StorageVectorsError:Nt,get StorageVectorsErrorCode(){return _t},StorageVectorsUnknownError:fr,VectorBucketApi:vr,VectorBucketScope:_r,VectorDataApi:br,VectorIndexApi:yr,VectorIndexScope:Er,isPlainObject:pr,isStorageError:T,isStorageVectorsError:D,normalizeToFloat32:ns,resolveFetch:Xe,resolveResponse:ts,validateVectorDimension:rs},Symbol.toStringTag,{value:"Module"})),cs=ke(ls);var it={},pe={},en;function hs(){return en||(en=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.version=void 0,pe.version="2.87.1"),pe}var tn;function us(){return tn||(tn=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_REALTIME_OPTIONS=r.DEFAULT_AUTH_OPTIONS=r.DEFAULT_DB_OPTIONS=r.DEFAULT_GLOBAL_OPTIONS=r.DEFAULT_HEADERS=void 0;const e=hs();let t="";typeof Deno<"u"?t="deno":typeof document<"u"?t="web":typeof navigator<"u"&&navigator.product==="ReactNative"?t="react-native":t="node",r.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${t}/${e.version}`},r.DEFAULT_GLOBAL_OPTIONS={headers:r.DEFAULT_HEADERS},r.DEFAULT_DB_OPTIONS={schema:"public"},r.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},r.DEFAULT_REALTIME_OPTIONS={}})(it)),it}var st={},nn;function ds(){return nn||(nn=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.fetchWithAuth=r.resolveHeadersConstructor=r.resolveFetch=void 0;const e=i=>i?(...s)=>i(...s):(...s)=>fetch(...s);r.resolveFetch=e;const t=()=>Headers;r.resolveHeadersConstructor=t;const n=(i,s,o)=>{const a=(0,r.resolveFetch)(o),l=(0,r.resolveHeadersConstructor)();return async(c,h)=>{var d;const g=(d=await s())!==null&&d!==void 0?d:i;let m=new l(h==null?void 0:h.headers);return m.has("apikey")||m.set("apikey",i),m.has("Authorization")||m.set("Authorization",`Bearer ${g}`),a(c,Object.assign(Object.assign({},h),{headers:m}))}};r.fetchWithAuth=n})(st)),st}var G={},rn;function gs(){if(rn)return G;rn=1,Object.defineProperty(G,"__esModule",{value:!0}),G.isBrowser=void 0,G.uuid=r,G.ensureTrailingSlash=e,G.applySettingDefaults=n,G.validateSupabaseUrl=i;function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var o=Math.random()*16|0,a=s=="x"?o:o&3|8;return a.toString(16)})}function e(s){return s.endsWith("/")?s:s+"/"}const t=()=>typeof window<"u";G.isBrowser=t;function n(s,o){var a,l;const{db:c,auth:h,realtime:d,global:g}=s,{db:m,auth:f,realtime:y,global:p}=o,v={db:Object.assign(Object.assign({},m),c),auth:Object.assign(Object.assign({},f),h),realtime:Object.assign(Object.assign({},y),d),storage:{},global:Object.assign(Object.assign(Object.assign({},p),g),{headers:Object.assign(Object.assign({},(a=p==null?void 0:p.headers)!==null&&a!==void 0?a:{}),(l=g==null?void 0:g.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return s.accessToken?v.accessToken=s.accessToken:delete v.accessToken,v}function i(s){const o=s==null?void 0:s.trim();if(!o)throw new Error("supabaseUrl is required.");if(!o.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(e(o))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return G}var ye={};const kr="2.87.1",le=30*1e3,Et=3,ot=Et*le,ms="http://localhost:9999",fs="supabase.auth.token",ps={"X-Client-Info":`gotrue-js/${kr}`},kt="X-Supabase-Api-Version",Sr={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ys=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bs=600*1e3;let ge=class extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}};function E(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}let Pr=class extends ge{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}};function Cr(r){return E(r)&&r.name==="AuthApiError"}let Y=class extends ge{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},z=class extends ge{constructor(e,t,n,i){super(e,n,i),this.name=t,this.status=n}},$=class extends z{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function xr(r){return E(r)&&r.name==="AuthSessionMissingError"}let Q=class extends z{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},ve=class extends z{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},we=class extends z{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Tr(r){return E(r)&&r.name==="AuthImplicitGrantRedirectError"}let St=class extends z{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Ke=class extends z{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}};function Be(r){return E(r)&&r.name==="AuthRetryableFetchError"}let Pt=class extends z{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}};function vs(r){return E(r)&&r.name==="AuthWeakPasswordError"}let Ve=class extends z{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const Ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sn=` 	
\r=`.split(""),ws=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<sn.length;e+=1)r[sn[e].charCodeAt(0)]=-2;for(let e=0;e<Ge.length;e+=1)r[Ge[e].charCodeAt(0)]=e;return r})();function on(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(Ge[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(Ge[n]),e.queuedBits-=6}}function Ar(r,e,t){const n=ws[r];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function an(r){const e=[],t=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{ks(o,n,t)};for(let o=0;o<r.length;o+=1)Ar(r.charCodeAt(o),i,s);return e.join("")}function _s(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Es(r,e){for(let t=0;t<r.length;t+=1){let n=r.charCodeAt(t);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(r.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}_s(n,e)}}function ks(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let n=1;n<6;n+=1)if((r>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function ue(r){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<r.length;i+=1)Ar(r.charCodeAt(i),t,n);return new Uint8Array(e)}function Ss(r){const e=[];return Es(r,t=>e.push(t)),new Uint8Array(e)}function re(r){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};return r.forEach(i=>on(i,t,n)),on(null,t,n),e.join("")}function Ps(r){return Math.round(Date.now()/1e3)+r}function Cs(){return Symbol("auth-callback")}const R=()=>typeof window<"u"&&typeof document<"u",J={tested:!1,writable:!1},jr=()=>{if(!R())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(J.tested)return J.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),J.tested=!0,J.writable=!0}catch{J.tested=!0,J.writable=!1}return J.writable};function xs(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((n,i)=>{e[i]=n}),e}const Or=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Ts=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",ce=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},X=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},N=async(r,e)=>{await r.removeItem(e)};class Qe{constructor(){this.promise=new Qe.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Qe.promiseConstructor=Promise;function at(r){const e=r.split(".");if(e.length!==3)throw new Ve("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!ys.test(e[n]))throw new Ve("JWT not in base64url format");return{header:JSON.parse(an(e[0])),payload:JSON.parse(an(e[1])),signature:ue(e[2]),raw:{header:e[0],payload:e[1]}}}async function As(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function js(r,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await r(s);if(!e(s,null,o)){n(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function Os(r){return("0"+r.toString(16)).substr(-2)}function Ns(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,Os).join("")}async function Rs(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Fs(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Rs(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function se(r,e,t=!1){const n=Ns();let i=n;t&&(i+="/PASSWORD_RECOVERY"),await ce(r,`${e}-code-verifier`,i);const s=await Fs(n);return[s,n===s?"plain":"s256"]}const Is=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $s(r){const e=r.headers.get(kt);if(!e||!e.match(Is))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Ds(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function Bs(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ms=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function oe(r){if(!Ms.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function lt(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ls(r,e){return new Proxy(r,{get:(t,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,n,i)}})}function ln(r){return JSON.parse(JSON.stringify(r))}const Z=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Us=[502,503,504];async function cn(r){var e;if(!Ts(r))throw new Ke(Z(r),0);if(Us.includes(r.status))throw new Ke(Z(r),r.status);let t;try{t=await r.json()}catch(s){throw new Y(Z(s),s)}let n;const i=$s(r);if(i&&i.getTime()>=Sr["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new Pt(Z(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new $}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Pt(Z(t),r.status,t.weak_password.reasons);throw new Pr(Z(t),r.status||500,n)}const qs=(r,e,t,n)=>{const i={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};async function S(r,e,t,n){var i;const s=Object.assign({},n==null?void 0:n.headers);s[kt]||(s[kt]=Sr["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Hs(r,e,t+a,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function Hs(r,e,t,n,i,s){const o=qs(e,n,i,s);let a;try{a=await r(t,Object.assign({},o))}catch(l){throw console.error(l),new Ke(Z(l),0)}if(a.ok||await cn(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await cn(l)}}function L(r){var e;let t=null;Gs(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Ps(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function hn(r){const e=L(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function W(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Ks(r){return{data:r,error:null}}function Vs(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:s}=r,o=me(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function un(r){return r}function Gs(r){return r.access_token&&r.refresh_token&&r.expires_in}const Me=["global","local","others"];let Rt=class{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Or(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Me[0]){if(Me.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Me.join(", ")}`);try{return await S(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(E(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await S(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:W})}catch(n){if(E(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=me(e,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await S(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Vs,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(E(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await S(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:W})}catch(t){if(E(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},h=await S(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:un});if(h.error)throw h.error;const d=await h.json(),g=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(f=>{const y=parseInt(f.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(f.split(";")[1].split("=")[1]);c[`${p}Page`]=y}),c.total=parseInt(g)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(E(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){oe(e);try{return await S(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:W})}catch(t){if(E(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){oe(e);try{return await S(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:W})}catch(n){if(E(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){oe(e);try{return await S(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:W})}catch(n){if(E(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){oe(e.userId);try{const{data:t,error:n}=await S(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:n}}catch(t){if(E(t))return{data:null,error:t};throw t}}async _deleteFactor(e){oe(e.userId),oe(e.id);try{return{data:await S(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(E(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},h=await S(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:un});if(h.error)throw h.error;const d=await h.json(),g=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(f=>{const y=parseInt(f.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(f.split(";")[1].split("=")[1]);c[`${p}Page`]=y}),c.total=parseInt(g)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(E(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await S(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(E(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await S(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(E(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await S(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(E(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await S(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(E(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await S(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(E(t))return{data:null,error:t};throw t}}};function dn(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}const ee={debug:!!(globalThis&&jr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ft extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let Nr=class extends Ft{};class zs extends Ft{}async function Rr(r,e,t){ee.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),ee.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){ee.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,i.name);try{return await t()}finally{ee.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,i.name)}}else{if(e===0)throw ee.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Nr(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(ee.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}const gn={};async function Ys(r,e,t){var n;const i=(n=gn[r])!==null&&n!==void 0?n:Promise.resolve(),s=Promise.race([i.catch(()=>null),e>=0?new Promise((o,a)=>{setTimeout(()=>{a(new zs(`Acquring process lock with name "${r}" timed out`))},e)}):null].filter(o=>o)).catch(o=>{if(o&&o.isAcquireTimeout)throw o;return null}).then(async()=>await t());return gn[r]=s.catch(async o=>{if(o&&o.isAcquireTimeout)return await i,null;throw o}),await s}function Ws(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Fr(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function Js(r){return parseInt(r,16)}function Xs(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function Qs(r){var e;const{chainId:t,domain:n,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:h,uri:d,version:g}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(g!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${g}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const m=Fr(r.address),f=h?`${h}://${n}`:n,y=r.statement?`${r.statement}
`:"",p=`${f} wants you to sign in with your Ethereum account:
${m}

${y}`;let v=`URI: ${d}
Version: ${g}
Chain ID: ${t}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(v+=`
Expiration Time: ${i.toISOString()}`),a&&(v+=`
Not Before: ${a.toISOString()}`),l&&(v+=`
Request ID: ${l}`),c){let _=`
Resources:`;for(const b of c){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);_+=`
- ${b}`}v+=_}return`${p}
${v}`}class O extends Error{constructor({message:e,code:t,cause:n,name:i}){var s;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=i??(n instanceof Error?n.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=t}}class ze extends O{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Zs({error:r,options:e}){var t,n,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new O({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((t=s.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new O({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new O({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new O({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new O({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new O({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new O({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new O({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const o=window.location.hostname;if(Ir(o)){if(s.rp.id!==o)return new O({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new O({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new O({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new O({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new O({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function eo({error:r,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new O({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new O({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const n=window.location.hostname;if(Ir(n)){if(t.rpId!==n)return new O({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new O({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new O({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new O({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class to{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const no=new to;function ro(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:t,excludeCredentials:n}=r,i=me(r,["challenge","user","excludeCredentials"]),s=ue(e).buffer,o=Object.assign(Object.assign({},t),{id:ue(t.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:ue(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function io(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:t}=r,n=me(r,["challenge","allowCredentials"]),i=ue(e).buffer,s=Object.assign(Object.assign({},n),{challenge:i});if(t&&t.length>0){s.allowCredentials=new Array(t.length);for(let o=0;o<t.length;o++){const a=t[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:ue(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function so(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r;return{id:r.id,rawId:r.id,response:{attestationObject:re(new Uint8Array(r.response.attestationObject)),clientDataJSON:re(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function oo(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r,n=r.getClientExtensionResults(),i=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:re(new Uint8Array(i.authenticatorData)),clientDataJSON:re(new Uint8Array(i.clientDataJSON)),signature:re(new Uint8Array(i.signature)),userHandle:i.userHandle?re(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Ir(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function mn(){var r,e;return!!(R()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function ao(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ze("Browser returned unexpected credential type",e)}:{data:null,error:new ze("Empty credential response",e)}}catch(e){return{data:null,error:Zs({error:e,options:r})}}}async function lo(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ze("Browser returned unexpected credential type",e)}:{data:null,error:new ze("Empty credential response",e)}}catch(e){return{data:null,error:eo({error:e,options:r})}}}const co={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ho={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ye(...r){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of r)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))n[s]=o;else if(t(o))n[s]=o;else if(e(o)){const a=n[s];e(a)?n[s]=Ye(a,o):n[s]=Ye(o)}else n[s]=o}return n}function uo(r,e){return Ye(co,r,e||{})}function go(r,e){return Ye(ho,r,e||{})}class mo{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!o)return{data:null,error:a};const l=i??no.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=uo(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:h,error:d}=await ao({publicKey:c,signal:l});return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}case"request":{const c=go(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:h,error:d}=await lo(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}}}catch(o){return E(o)?{data:null,error:o}:{data:null,error:new Y("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!t)return{data:null,error:new ge("rpId is required for WebAuthn authentication")};try{if(!mn())return{data:null,error:new Y("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:t,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return E(o)?{data:null,error:o}:{data:null,error:new Y("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!t)return{data:null,error:new ge("rpId is required for WebAuthn registration")};try{if(!mn())return{data:null,error:new Y("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(h=>{var d;return(d=h.data)===null||d===void 0?void 0:d.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===e&&g.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:t,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return E(o)?{data:null,error:o}:{data:null,error:new Y("Unexpected error in register",o)}}}}Ws();const fo={url:ms,storageKey:fs,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ps,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function fn(r,e,t){return await t()}const ae={};let It=class Ct{get jwks(){var e,t;return(t=(e=ae[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){ae[this.storageKey]=Object.assign(Object.assign({},ae[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=ae[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ae[this.storageKey]=Object.assign(Object.assign({},ae[this.storageKey]),{cachedAt:e})}constructor(e){var t,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},fo),e);if(this.storageKey=s.storageKey,this.instanceID=(t=Ct.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Ct.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&R()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Rt({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Or(s.fetch),this.lock=s.lock||fn,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:this.persistSession&&R()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Rr:this.lock=fn,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new mo(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:jr()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=dn(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=dn(this.memoryStorage)),R()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${kr}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},n="none";if(R()&&(t=xs(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),R()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Tr(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return E(t)?this._returnResult({error:t}):this._returnResult({error:new Y("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,i;try{const s=await S(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:L}),{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(E(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var t,n,i;try{let s;if("email"in e){const{email:h,password:d,options:g}=e;let m=null,f=null;this.flowType==="pkce"&&([m,f]=await se(this.storage,this.storageKey)),s=await S(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:h,password:d,data:(t=g==null?void 0:g.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:m,code_challenge_method:f},xform:L})}else if("phone"in e){const{phone:h,password:d,options:g}=e;s=await S(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},channel:(i=g==null?void 0:g.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:L})}else throw new ve("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return await N(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(await N(this.storage,`${this.storageKey}-code-verifier`),E(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await S(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:hn})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await S(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:hn})}else throw new ve("You must provide either an email or phone number and a password");const{data:n,error:i}=t;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const s=new Q;return this._returnResult({data:{user:null,session:null},error:s})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(t){if(E(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,i,s,o,a,l,c,h,d,g;let m,f;if("message"in e)m=e.message,f=e.signature;else{const{chain:y,wallet:p,statement:v,options:_}=e;let b;if(R())if(typeof p=="object")b=p;else{const M=window;if("ethereum"in M&&typeof M.ethereum=="object"&&"request"in M.ethereum&&typeof M.ethereum.request=="function")b=M.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=p}const k=new URL((t=_==null?void 0:_.url)!==null&&t!==void 0?t:window.location.href),C=await b.request({method:"eth_requestAccounts"}).then(M=>M).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!C||C.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=Fr(C[0]);let A=(n=_==null?void 0:_.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!A){const M=await b.request({method:"eth_chainId"});A=Js(M)}const K={domain:k.host,address:P,statement:v,uri:k.href,version:"1",chainId:A,nonce:(i=_==null?void 0:_.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=_==null?void 0:_.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=_==null?void 0:_.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=_==null?void 0:_.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=_==null?void 0:_.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(h=_==null?void 0:_.signInWithEthereum)===null||h===void 0?void 0:h.resources};m=Qs(K),f=await b.request({method:"personal_sign",params:[Xs(m),P]})}try{const{data:y,error:p}=await S(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:f},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:L});if(p)throw p;if(!y||!y.session||!y.user){const v=new Q;return this._returnResult({data:{user:null,session:null},error:v})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:p})}catch(y){if(E(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var t,n,i,s,o,a,l,c,h,d,g,m;let f,y;if("message"in e)f=e.message,y=e.signature;else{const{chain:p,wallet:v,statement:_,options:b}=e;let k;if(R())if(typeof v=="object")k=v;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))k=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=v}const C=new URL((t=b==null?void 0:b.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in k&&k.signIn){const P=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),_?{statement:_}:null));let A;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")A=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)A=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)f=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),y=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${C.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(i=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((d=(h=b==null?void 0:b.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...b.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const P=await k.signMessage(new TextEncoder().encode(f),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=P}}try{const{data:p,error:v}=await S(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:re(y)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:L});if(v)throw v;if(!p||!p.session||!p.user){const _=new Q;return this._returnResult({data:{user:null,session:null},error:_})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:Object.assign({},p),error:v})}catch(p){if(E(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async _exchangeCodeForSession(e){const t=await X(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(t??"").split("/");try{const{data:s,error:o}=await S(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:L});if(await N(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const a=new Q;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(await N(this.storage,`${this.storageKey}-code-verifier`),E(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:t,provider:n,token:i,access_token:s,nonce:o}=e,a=await S(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:L}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const h=new Q;return this._returnResult({data:{user:null,session:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(t){if(E(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,h=null;this.flowType==="pkce"&&([c,h]=await se(this.storage,this.storageKey));const{error:d}=await S(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:h}=await S(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new ve("You must provide either an email or phone number.")}catch(a){if(await N(this.storage,`${this.storageKey}-code-verifier`),E(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var t,n;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await S(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:L});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(E(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var t,n,i,s,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await se(this.storage,this.storageKey));const c=await S(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Ks});return!((s=c.data)===null||s===void 0)&&s.url&&R()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await N(this.storage,`${this.storageKey}-code-verifier`),E(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new $;const{error:i}=await S(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(E(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:o}=await S(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:o,error:a}=await S(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new ve("You must provide either an email or phone number and a type")}catch(t){if(E(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await X(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<ot:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await X(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=lt()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=Ls(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await S(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:W}):await this._useSession(async t=>{var n,i,s;const{data:o,error:a}=t;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $}:await S(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:W})})}catch(t){if(E(t))return xr(t)&&(await this._removeSession(),await N(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new $;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await se(this.storage,this.storageKey));const{data:c,error:h}=await S(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:W});if(h)throw h;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await N(this.storage,`${this.storageKey}-code-verifier`),E(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new $;const t=Date.now()/1e3;let n=t,i=!0,s=null;const{payload:o}=at(e.access_token);if(o.exp&&(n=o.exp,i=n<=t),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(t){if(E(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new $;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(E(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!R())throw new we("No browser detected.");if(e.error||e.error_description||e.error_code)throw new we(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new St("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new we("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new St("No code detected.");const{data:_,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new we("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(a);let g=h+d;l&&(g=parseInt(l));const m=g-h;m*1e3<=le&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const f=g-d;h-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,g,h):h-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,g,h);const{data:y,error:p}=await this._getUser(s);if(p)throw p;const v={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:g,refresh_token:o,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:e.type},error:null})}catch(n){if(E(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await X(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s)return this._returnResult({error:s});const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Cr(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await N(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=Cs(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await se(this.storage,this.storageKey,!0));try{return await S(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(await N(this.storage,`${this.storageKey}-code-verifier`),E(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(E(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:i}=await this._useSession(async s=>{var o,a,l,c,h;const{data:d,error:g}=s;if(g)throw g;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await S(this.fetch,"GET",m,{headers:this.headers,jwt:(h=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return R()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(E(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:i,data:{session:s}}=t;if(i)throw i;const{options:o,provider:a,token:l,access_token:c,nonce:h}=e,d=await S(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s==null?void 0:s.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:l,access_token:c,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:L}),{data:g,error:m}=d;return m?this._returnResult({data:{user:null,session:null},error:m}):!g||!g.session||!g.user?this._returnResult({data:{user:null,session:null},error:new Q}):(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("USER_UPDATED",g.session)),this._returnResult({data:g,error:m}))}catch(i){if(await N(this.storage,`${this.storageKey}-code-verifier`),E(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,i;const{data:s,error:o}=t;if(o)throw o;return await S(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(E(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await js(async i=>(i>0&&await As(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await S(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:L})),(i,s)=>{const o=200*Math.pow(2,i);return s&&Be(s)&&Date.now()+o-n<le})}catch(n){if(this._debug(t,"error",n),E(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),R()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await X(this.storage,this.storageKey);if(i&&this.userStorage){let o=await X(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await ce(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:lt()}else if(i&&!i.user&&!i.user){const o=await X(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await N(this.storage,this.storageKey+"-user"),await ce(this.storage,this.storageKey,i)):i.user=lt()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const s=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<ot;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${ot}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Be(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new $;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Qe;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new $;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),E(s)){const o={data:null,error:s};return Be(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await N(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await ce(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const s=ln(i);await ce(this.storage,this.storageKey,s)}else{const i=ln(t);await ce(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await N(this.storage,this.storageKey),await N(this.storage,this.storageKey+"-code-verifier"),await N(this.storage,this.storageKey+"-user"),this.userStorage&&await N(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&R()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),le);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/le);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${le}ms, refresh threshold is ${Et} ticks`),i<=Et&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ft)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!R()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const i=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await se(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;return s?this._returnResult({data:null,error:s}):await S(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(E(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,i;const{data:s,error:o}=t;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await S(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(t){if(E(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?so(e.webauthn.credential_response):oo(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await S(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(t){if(E(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s)return this._returnResult({data:null,error:s});const o=await S(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:ro(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:io(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(E(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=at(n.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((t=(e=n.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(a="aal2");const c=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?await S(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new $})})}catch(t){if(E(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new $});const o=await S(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&R()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(E(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new $});const o=await S(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&R()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(E(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;return n?this._returnResult({data:null,error:n}):t?await S(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new $})})}catch(e){if(E(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?(await S(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new $})})}catch(t){if(E(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(a=>a.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+bs>i)return n;const{data:s,error:o}=await S(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,n=s.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:m,error:f}=await this.getSession();if(f||!m.session)return this._returnResult({data:null,error:f});n=m.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=at(n);t!=null&&t.allowExpired||Ds(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!c){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:s,header:i,signature:o},error:null}}const h=Bs(i.alg),d=await crypto.subtle.importKey("jwk",c,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,o,Ss(`${a}.${l}`)))throw new Ve("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(n){if(E(n))return this._returnResult({data:null,error:n});throw n}}};It.nextInstanceID={};const po=Rt,yo=It,bo=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:po,AuthApiError:Pr,AuthClient:yo,AuthError:ge,AuthImplicitGrantRedirectError:we,AuthInvalidCredentialsError:ve,AuthInvalidJwtError:Ve,AuthInvalidTokenResponseError:Q,AuthPKCEGrantCodeExchangeError:St,AuthRetryableFetchError:Ke,AuthSessionMissingError:$,AuthUnknownError:Y,AuthWeakPasswordError:Pt,CustomAuthError:z,GoTrueAdminApi:Rt,GoTrueClient:It,NavigatorLockAcquireTimeoutError:Nr,SIGN_OUT_SCOPES:Me,isAuthApiError:Cr,isAuthError:E,isAuthImplicitGrantRedirectError:Tr,isAuthRetryableFetchError:Be,isAuthSessionMissingError:xr,isAuthWeakPasswordError:vs,lockInternals:ee,navigatorLock:Rr,processLock:Ys},Symbol.toStringTag,{value:"Module"})),$r=ke(bo);var pn;function vo(){if(pn)return ye;pn=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.SupabaseAuthClient=void 0;const r=$r;let e=class extends r.AuthClient{constructor(n){super(n)}};return ye.SupabaseAuthClient=e,ye}var yn;function bn(){if(yn)return xe;yn=1,Object.defineProperty(xe,"__esModule",{value:!0});const r=Wn,e=tr(),t=cr,n=cs,i=us(),s=ds(),o=gs(),a=vo();class l{constructor(h,d,g){var m,f,y;this.supabaseUrl=h,this.supabaseKey=d;const p=(0,o.validateSupabaseUrl)(h);if(!d)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const v=`sb-${p.hostname.split(".")[0]}-auth-token`,_={db:i.DEFAULT_DB_OPTIONS,realtime:i.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},i.DEFAULT_AUTH_OPTIONS),{storageKey:v}),global:i.DEFAULT_GLOBAL_OPTIONS},b=(0,o.applySettingDefaults)(g??{},_);this.storageKey=(m=b.auth.storageKey)!==null&&m!==void 0?m:"",this.headers=(f=b.global.headers)!==null&&f!==void 0?f:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(k,C)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(C)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((y=b.auth)!==null&&y!==void 0?y:{},this.headers,b.global.fetch),this.fetch=(0,s.fetchWithAuth)(d,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.accessToken&&this.accessToken().then(k=>this.realtime.setAuth(k)).catch(k=>console.warn("Failed to set initial Realtime auth token:",k)),this.rest=new e.PostgrestClient(new URL("rest/v1",p).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new n.StorageClient(this.storageUrl.href,this.headers,this.fetch,g==null?void 0:g.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new r.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(h){return this.rest.from(h)}schema(h){return this.rest.schema(h)}rpc(h,d={},g={head:!1,get:!1,count:void 0}){return this.rest.rpc(h,d,g)}channel(h,d={config:{}}){return this.realtime.channel(h,d)}getChannels(){return this.realtime.getChannels()}removeChannel(h){return this.realtime.removeChannel(h)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var h,d;if(this.accessToken)return await this.accessToken();const{data:g}=await this.auth.getSession();return(d=(h=g.session)===null||h===void 0?void 0:h.access_token)!==null&&d!==void 0?d:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:h,persistSession:d,detectSessionInUrl:g,storage:m,userStorage:f,storageKey:y,flowType:p,lock:v,debug:_,throwOnError:b},k,C){const P={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new a.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},P),k),storageKey:y,autoRefreshToken:h,persistSession:d,detectSessionInUrl:g,storage:m,userStorage:f,flowType:p,lock:v,debug:_,throwOnError:b,fetch:C,hasCustomAuthorizationHeader:Object.keys(this.headers).some(A=>A.toLowerCase()==="authorization")})}_initRealtimeClient(h){return new t.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},h),{params:Object.assign({apikey:this.supabaseKey},h==null?void 0:h.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((d,g)=>{this._handleTokenChanged(d,"CLIENT",g==null?void 0:g.access_token)})}_handleTokenChanged(h,d,g){(h==="TOKEN_REFRESHED"||h==="SIGNED_IN")&&this.changedAccessToken!==g?(this.changedAccessToken=g,this.realtime.setAuth(g)):h==="SIGNED_OUT"&&(this.realtime.setAuth(),d=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return xe.default=l,xe}var vn;function wo(){return vn||(vn=1,(function(r){var e=V&&V.__createBinding||(Object.create?(function(h,d,g,m){m===void 0&&(m=g);var f=Object.getOwnPropertyDescriptor(d,g);(!f||("get"in f?!d.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return d[g]}}),Object.defineProperty(h,m,f)}):(function(h,d,g,m){m===void 0&&(m=g),h[m]=d[g]})),t=V&&V.__exportStar||function(h,d){for(var g in h)g!=="default"&&!Object.prototype.hasOwnProperty.call(d,g)&&e(d,h,g)},n=V&&V.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(r,"__esModule",{value:!0}),r.createClient=r.SupabaseClient=r.FunctionRegion=r.FunctionsError=r.FunctionsRelayError=r.FunctionsFetchError=r.FunctionsHttpError=r.PostgrestError=void 0;const i=n(bn());t($r,r);var s=tr();Object.defineProperty(r,"PostgrestError",{enumerable:!0,get:function(){return s.PostgrestError}});var o=Wn;Object.defineProperty(r,"FunctionsHttpError",{enumerable:!0,get:function(){return o.FunctionsHttpError}}),Object.defineProperty(r,"FunctionsFetchError",{enumerable:!0,get:function(){return o.FunctionsFetchError}}),Object.defineProperty(r,"FunctionsRelayError",{enumerable:!0,get:function(){return o.FunctionsRelayError}}),Object.defineProperty(r,"FunctionsError",{enumerable:!0,get:function(){return o.FunctionsError}}),Object.defineProperty(r,"FunctionRegion",{enumerable:!0,get:function(){return o.FunctionRegion}}),t(cr,r);var a=bn();Object.defineProperty(r,"SupabaseClient",{enumerable:!0,get:function(){return n(a).default}});const l=(h,d,g)=>new i.default(h,d,g);r.createClient=l;function c(){if(typeof window<"u"||typeof process>"u")return!1;const h=process.version;if(h==null)return!1;const d=h.match(/^v(\d+)\./);return d?parseInt(d[1],10)<=18:!1}c()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(V)),V}var Dr=wo();const Br=Hr(Dr),_o=ni({__proto__:null,default:Br},[Dr]),{PostgrestError:da,FunctionsHttpError:ga,FunctionsFetchError:ma,FunctionsRelayError:fa,FunctionsError:pa,FunctionRegion:ya,SupabaseClient:ba,createClient:Eo,GoTrueAdminApi:va,GoTrueClient:wa,AuthAdminApi:_a,AuthClient:Ea,navigatorLock:ka,NavigatorLockAcquireTimeoutError:Sa,lockInternals:Pa,processLock:Ca,SIGN_OUT_SCOPES:xa,AuthError:Ta,AuthApiError:Aa,AuthUnknownError:ja,CustomAuthError:Oa,AuthSessionMissingError:Na,AuthInvalidTokenResponseError:Ra,AuthInvalidCredentialsError:Fa,AuthImplicitGrantRedirectError:Ia,AuthPKCEGrantCodeExchangeError:$a,AuthRetryableFetchError:Da,AuthWeakPasswordError:Ba,AuthInvalidJwtError:Ma,isAuthError:La,isAuthApiError:Ua,isAuthSessionMissingError:qa,isAuthImplicitGrantRedirectError:Ha,isAuthRetryableFetchError:Ka,isAuthWeakPasswordError:Va,RealtimePresence:Ga,RealtimeChannel:za,RealtimeClient:Ya,REALTIME_LISTEN_TYPES:Wa,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:Ja,REALTIME_PRESENCE_LISTEN_EVENTS:Xa,REALTIME_SUBSCRIBE_STATES:Qa,REALTIME_CHANNEL_STATES:Za}=Br||_o,Mr="https://xmsinpmjxzwzrlufvfje.supabase.co",ko="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhtc2lucG1qeHp3enJsdWZ2ZmplIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUyODc2NjIsImV4cCI6MjA4MDg2MzY2Mn0.3z4CwG7odh6GSkqcjUfah2nUP9UQesBDaI_7Nc1zVyE";Eo(Mr,ko);const So="infographic";function Po(r){return`${Mr}/storage/v1/object/public/${So}/${r}`}const Co={"alkali-metal":"Kim loại kiềm","alkaline-earth":"Kim loại kiềm thổ","transition-metal":"Kim loại chuyển tiếp","post-transition":"Kim loại sau chuyển tiếp",metalloid:"Á kim",nonmetal:"Phi kim",halogen:"Halogen","noble-gas":"Khí hiếm",lanthanide:"Lanthanide",actinide:"Actinide",unknown:"Chưa xác định"},xo={solid:"Rắn",liquid:"Lỏng",gas:"Khí",unknown:"Chưa biết"},To=({element:r,onClose:e})=>{const t=Se[r.category],[n,i]=I.useState(!1),[s,o]=I.useState(!1);I.useEffect(()=>{const d=()=>{o(window.innerWidth<window.innerHeight)};return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);const a=r.atomicNumber,l=r.atomicNumber,c=Math.round(r.atomicMass-a),h=()=>Po(r.infographicPath);return u.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-300",onClick:e,children:[u.jsxs("div",{className:"w-full max-w-5xl max-h-[90vh] overflow-y-auto bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-3xl shadow-2xl border border-white/10",style:{boxShadow:`0 0 50px ${t.glow}, 0 0 100px ${t.glow}40`},onClick:d=>d.stopPropagation(),children:[u.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between p-4 sm:p-6 border-b border-white/10 backdrop-blur-md",style:{backgroundColor:`${t.color}10`},children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-2xl flex items-center justify-center",style:{backgroundColor:`${t.color}20`,border:`3px solid ${t.color}`,boxShadow:`0 0 20px ${t.glow}`},children:u.jsx("span",{className:"text-3xl sm:text-4xl font-bold",style:{color:t.color,textShadow:`0 0 20px ${t.glow}`},children:r.symbol})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl sm:text-3xl font-bold",style:{color:t.color},children:r.name}),u.jsxs("p",{className:"text-white/60 text-sm sm:text-base",children:[r.nameEn," • #",r.atomicNumber]})]})]}),u.jsx("button",{onClick:e,className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors text-white",children:u.jsx(ct,{size:24})})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 p-4 sm:p-6",children:[u.jsxs("div",{className:"relative h-[300px] sm:h-[400px] rounded-2xl overflow-hidden bg-black/50 border border-white/10",children:[u.jsx(I.Suspense,{fallback:u.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/50",children:u.jsx(Ze,{className:"animate-spin",size:48})}),children:u.jsx(ui,{element:r})}),u.jsxs("div",{className:"absolute top-3 left-3 flex items-center gap-2 bg-black/60 backdrop-blur-sm rounded-lg px-3 py-1.5",children:[u.jsxs("div",{className:"flex items-center gap-1",title:"Protons",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500"}),u.jsxs("span",{className:"text-red-400 text-xs font-semibold",children:[a,"p"]})]}),u.jsxs("div",{className:"flex items-center gap-1",title:"Neutrons",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"}),u.jsxs("span",{className:"text-blue-400 text-xs font-semibold",children:[c,"n"]})]}),u.jsxs("div",{className:"flex items-center gap-1",title:"Electrons",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-cyan-400"}),u.jsxs("span",{className:"text-cyan-400 text-xs font-semibold",children:[l,"e⁻"]})]})]}),u.jsx("div",{className:"absolute bottom-3 left-3 right-3 bg-black/60 backdrop-blur-sm rounded-lg px-3 py-2",children:u.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("span",{className:"text-white/50",children:"Lớp:"}),u.jsx("span",{className:"text-cyan-400 font-mono font-semibold",children:r.electronShells.join(" · ")})]}),u.jsx("span",{className:"text-white/40 font-mono hidden sm:inline",children:r.electronConfig})]})}),u.jsxs("button",{onClick:()=>i(!0),className:"absolute bottom-14 left-1/2 -translate-x-1/2 flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition-all hover:scale-105 active:scale-95 bg-black/70 backdrop-blur-sm border border-white/20 text-white/90 hover:text-white hover:border-white/40 group",children:[u.jsx(Xr,{size:18}),u.jsx("span",{className:"text-sm",children:"Xem Infographic"}),u.jsx(Qr,{size:14,className:"group-hover:translate-x-1 transition-transform"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold",style:{backgroundColor:`${t.color}20`,color:t.color,border:`1px solid ${t.color}50`},children:[u.jsx(Ze,{size:16}),Co[r.category]]}),u.jsx("p",{className:"text-white/80 text-sm sm:text-base leading-relaxed",children:r.description}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/10",children:[u.jsxs("div",{className:"flex items-center gap-2 text-white/50 text-xs mb-1",children:[u.jsx(Ut,{size:14}),"Khối lượng nguyên tử"]}),u.jsxs("p",{className:"text-white font-semibold",children:[r.atomicMass," u"]})]}),u.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/10",children:[u.jsxs("div",{className:"flex items-center gap-2 text-white/50 text-xs mb-1",children:[u.jsx(Ze,{size:14}),"Trạng thái"]}),u.jsx("p",{className:"text-white font-semibold",children:xo[r.state]})]}),r.meltingPoint!==void 0&&u.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/10",children:[u.jsxs("div",{className:"flex items-center gap-2 text-white/50 text-xs mb-1",children:[u.jsx(Lt,{size:14}),"Điểm nóng chảy"]}),u.jsxs("p",{className:"text-white font-semibold",children:[r.meltingPoint,"°C"]})]}),r.boilingPoint!==void 0&&u.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/10",children:[u.jsxs("div",{className:"flex items-center gap-2 text-white/50 text-xs mb-1",children:[u.jsx(Lt,{size:14}),"Điểm sôi"]}),u.jsxs("p",{className:"text-white font-semibold",children:[r.boilingPoint,"°C"]})]}),r.density!==void 0&&u.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/10",children:[u.jsxs("div",{className:"flex items-center gap-2 text-white/50 text-xs mb-1",children:[u.jsx(Ut,{size:14}),"Mật độ"]}),u.jsxs("p",{className:"text-white font-semibold",children:[r.density," g/cm³"]})]}),r.discoveryYear&&u.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/10",children:[u.jsxs("div",{className:"flex items-center gap-2 text-white/50 text-xs mb-1",children:[u.jsx(Zr,{size:14}),"Năm phát hiện"]}),u.jsx("p",{className:"text-white font-semibold",children:r.discoveryYear<0?`${Math.abs(r.discoveryYear)} TCN`:r.discoveryYear})]})]}),u.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[u.jsxs("h3",{className:"flex items-center gap-2 text-white font-semibold mb-3",children:[u.jsx(ei,{size:18,style:{color:t.color}}),"Bạn có biết?"]}),u.jsx("ul",{className:"space-y-2",children:r.facts.map((d,g)=>u.jsxs("li",{className:"flex items-start gap-2 text-white/70 text-sm",children:[u.jsx("span",{className:"mt-1.5 w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:t.color}}),d]},g))})]})]})]})]}),n&&u.jsxs("div",{className:"fixed inset-0 z-[200] bg-black/90 backdrop-blur-md animate-in fade-in duration-300",onClick:()=>i(!1),children:[u.jsx("button",{onClick:()=>i(!1),className:"absolute top-4 right-4 z-[210] p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all backdrop-blur-sm border border-white/20",children:u.jsx(ct,{size:24})}),u.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-[210] text-white/50 text-sm",children:"Chạm để đóng"}),u.jsx("div",{className:"absolute top-1/2 left-1/2 flex items-center justify-center pointer-events-none transition-all duration-500 ease-in-out origin-center",style:s?{width:"100vh",height:"100vw",transform:"translate(-50%, -50%) rotate(90deg)",maxWidth:"none",maxHeight:"none"}:{width:"100%",height:"100%",transform:"translate(-50%, -50%)",padding:"1rem"},children:u.jsx("img",{src:h(),alt:`${r.name} Infographic`,className:"w-full h-full object-contain pointer-events-auto",onError:d=>{const g=d.target;g.src.endsWith(".png")&&(g.src=g.src.replace(".png",".jpeg"))}})})]})]})},el=()=>{const r=Kr(),[e,t]=I.useState(null),[n,i]=I.useState(""),[s,o]=I.useState(!1),a=En.filter(c=>c.name.toLowerCase().includes(n.toLowerCase())||c.nameEn.toLowerCase().includes(n.toLowerCase())||c.symbol.toLowerCase().includes(n.toLowerCase())||c.atomicNumber.toString()===n),l=c=>{t(c),o(!1),i("")};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-indigo-950 to-slate-900 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-indigo-900/20 via-transparent to-transparent"}),u.jsxs("header",{className:"sticky top-0 z-40 flex items-center justify-between px-4 py-4 bg-black/30 backdrop-blur-md border-b border-white/10",children:[u.jsxs("button",{onClick:()=>r("/science"),className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-xl transition-colors font-semibold text-white shadow-md",children:[u.jsx(ti,{size:20}),u.jsx("span",{className:"hidden sm:inline",children:"Quay lại"})]}),u.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 via-cyan-400 to-purple-400",children:"Bảng Tuần Hoàn"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>o(!s),className:`p-2 rounded-xl transition-colors ${s?"bg-cyan-500 text-white":"bg-white/10 hover:bg-white/20 text-white"}`,children:u.jsx(qt,{size:20})}),u.jsx(Vr,{})]})]}),s&&u.jsx("div",{className:"sticky top-[72px] z-30 px-4 py-3 bg-black/50 backdrop-blur-md border-b border-white/10",children:u.jsxs("div",{className:"max-w-md mx-auto relative",children:[u.jsx(qt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/50",size:18}),u.jsx("input",{type:"text",value:n,onChange:c=>i(c.target.value),placeholder:"Tìm kiếm nguyên tố (tên, ký hiệu, số nguyên tử)...",className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-cyan-500/50",autoFocus:!0}),n&&u.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 max-h-64 overflow-y-auto bg-slate-800/95 backdrop-blur-md rounded-xl border border-white/20 shadow-2xl",children:a.length>0?a.slice(0,10).map(c=>u.jsxs("button",{onClick:()=>l(c),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-white/10 transition-colors text-left",children:[u.jsx("span",{className:"w-10 h-10 flex items-center justify-center bg-cyan-500/20 rounded-lg text-cyan-400 font-bold",children:c.symbol}),u.jsxs("div",{children:[u.jsx("p",{className:"text-white font-medium",children:c.name}),u.jsxs("p",{className:"text-white/50 text-sm",children:["#",c.atomicNumber," • ",c.nameEn]})]})]},c.atomicNumber)):u.jsx("div",{className:"px-4 py-6 text-center text-white/50",children:"Không tìm thấy nguyên tố nào"})})]})}),u.jsxs("main",{className:"py-6 sm:py-8",children:[u.jsx(ai,{onSelectElement:l}),u.jsx("div",{className:"text-center mt-6 text-white/50 text-sm",children:u.jsx("p",{children:"118 nguyên tố • Chu kỳ 1-7 • Nhóm 1-18"})})]}),e&&u.jsx(To,{element:e,onClose:()=>t(null)})]})};export{el as PeriodicTablePage};
