import{j as e,l as Ye,r as n,A as oe,T as xe,m as _e,V as Le,n as pe,M as Ue,a as Ne,b as ke,X as Ve,S as he,o as $e,p as ve,q as Te,s as Ae,W as We,B as Ke,t as Je,v as Ze,u as et}from"./index-BR52Rtky.js";import{M as we}from"./MusicControls-B3aDTWZG.js";import{s as K,p as ne}from"./sound-DvEcxKvf.js";import{T as Pe}from"./target-r3RLUy9V.js";import{C as tt}from"./clock-BIw5GLOI.js";import{P as Ce}from"./play-CPdpyT8Q.js";import{g as st,S as lt}from"./SpeedMathGame-D_tkvzeK.js";import{H as fe}from"./heart-1g7TFKtV.js";import{a as ge}from"./rewardService-Dd-pxHpI.js";import{A as at}from"./arrow-right-CZNSDgAR.js";import{H as rt}from"./house-M7UEoIGs.js";import{T as De,P as nt,E as ot,G as it}from"./timer-C5eBvWaO.js";import{L as ct}from"./lightbulb-DGauyozw.js";import{C as dt}from"./check-Ch5beXFI.js";import{S as ze}from"./settings-CMhhs7jm.js";import{B as Ee}from"./brain-W5GA7Nfr.js";import"./volume-x-CFQy3J5n.js";var V=(t=>(t[t.Easy=12]="Easy",t[t.Medium=20]="Medium",t[t.Hard=30]="Hard",t))(V||{});const xt={animals:["üê∂","üê±","üê≠","üêπ","üê∞","ü¶ä","üêª","üêº","üê®","üêØ","ü¶Å","üêÆ","üê∑","üê∏","üêµ"],fruits:["üçé","üçä","üçã","üçå","üçâ","üçá","üçì","üçë","üçí","üçç","ü•ù","ü•≠","üçê","üçà","ü••"],food:["üçï","üçî","üçü","üå≠","üçø","üßÅ","üç©","üç™","üéÇ","üç∞","üßÄ","üçñ","ü•ê","ü•®","ü•Ø"],sports:["‚öΩ","üèÄ","üèà","‚öæ","üéæ","üèê","üèâ","üé±","üèì","üè∏","ü•ä","ü•ã","‚õ≥","üèπ","üéø"],vehicles:["üöó","üöï","üöô","üöå","üöé","üèéÔ∏è","üöì","üöë","üöí","üöê","üöö","üöõ","üöú","‚úàÔ∏è","üöÅ"],nature:["üå∏","üå∫","üåª","üå∑","üåπ","üåº","üåø","‚òÄÔ∏è","‚≠ê","üåô","‚òÅÔ∏è","üåà","‚ö°","‚ùÑÔ∏è","üî•"],sea:["üê†","üêü","üê°","ü¶à","üêô","ü¶Ä","ü¶û","üêö","üê¨","üê≥","ü¶ë","üêã","ü¶≠","ü¶¶","üêä"]},Ge=["circle","square","triangle","diamond","star","heart","pentagon","hexagon","oval","cross"];function Se(t){const s=[...t];for(let l=s.length-1;l>0;l--){const r=Math.floor(Math.random()*(l+1));[s[l],s[r]]=[s[r],s[l]]}return s}function mt(t){const s=Object.values(xt).flat();return Se(s).slice(0,t)}function ut(t){return Se([...Ge]).slice(0,Math.min(t,Ge.length))}function ht(t){const s=t/2,l=[],r=Math.ceil(s*.7),o=s-r,i=mt(r),a=ut(o);return i.forEach((c,b)=>{const g=b;l.push({id:`${g}-1`,value:c,type:"emoji",pairId:g,isFlipped:!1,isMatched:!1}),l.push({id:`${g}-2`,value:c,type:"emoji",pairId:g,isFlipped:!1,isMatched:!1})}),a.forEach((c,b)=>{const g=r+b;l.push({id:`${g}-1`,value:c,type:"shape",pairId:g,isFlipped:!1,isMatched:!1}),l.push({id:`${g}-2`,value:c,type:"shape",pairId:g,isFlipped:!1,isMatched:!1})}),Se(l)}function ft(t,s){return t.pairId===s.pairId}function bt(t,s,l){return t<=s*1.5?{type:"gold",message:"Xu·∫•t s·∫Øc! Tr√≠ nh·ªõ si√™u ƒë·∫≥ng!"}:t<=s*2?{type:"silver",message:"Tuy·ªát v·ªùi! R·∫•t t·ªët!"}:{type:"bronze",message:"Gi·ªèi l·∫Øm! Ti·∫øp t·ª•c c·ªë g·∫Øng!"}}const gt=({shape:t})=>{const l={circle:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("div",{className:"rounded-full bg-white",style:{width:"80%",height:"80%"}})}),square:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("div",{className:"bg-white",style:{width:"80%",height:"80%"}})}),triangle:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("div",{style:{width:0,height:0,borderLeft:"40px solid transparent",borderRight:"40px solid transparent",borderBottom:"70px solid white"}})}),diamond:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("div",{className:"bg-white rotate-45",style:{width:"60%",height:"60%"}})}),star:e.jsx("div",{className:"w-full h-full flex items-center justify-center text-white text-6xl",children:"‚≠ê"}),heart:e.jsx("div",{className:"w-full h-full flex items-center justify-center text-white text-6xl",children:"‚ù§Ô∏è"}),pentagon:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("svg",{viewBox:"0 0 100 100",style:{width:"80%",height:"80%"},children:e.jsx("polygon",{points:"50,10 90,40 75,85 25,85 10,40",fill:"white"})})}),hexagon:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("svg",{viewBox:"0 0 100 100",style:{width:"80%",height:"80%"},children:e.jsx("polygon",{points:"50,5 95,27.5 95,72.5 50,95 5,72.5 5,27.5",fill:"white"})})}),oval:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("div",{className:"rounded-full bg-white",style:{width:"80%",height:"60%"}})}),cross:e.jsx("div",{className:"w-full h-full flex items-center justify-center text-white text-7xl font-bold",children:"+"})};return l[t]||l.circle},pt=({card:t,onClick:s,isDisabled:l})=>{const r=["from-purple-500 to-pink-500","from-blue-500 to-cyan-500","from-green-500 to-emerald-500","from-orange-500 to-red-500","from-indigo-500 to-purple-500","from-rose-500 to-pink-500","from-teal-500 to-green-500","from-yellow-500 to-orange-500"],o=r[t.pairId%r.length];return e.jsxs("div",{onClick:()=>!l&&!t.isFlipped&&!t.isMatched&&s(),className:`jsx-1536529477 card-container ${t.isMatched?"matched":""}`,children:[e.jsxs("div",{className:`jsx-1536529477 card ${t.isFlipped||t.isMatched?"flipped":""}`,children:[e.jsxs("div",{className:"jsx-1536529477 card-face card-back overflow-hidden",children:[e.jsx("div",{className:"jsx-1536529477 absolute inset-0 bg-black"}),e.jsx("img",{src:"/Genius-kids/Card.png",alt:"back",className:"jsx-1536529477 relative w-full h-full object-contain p-2 opacity-90 drop-shadow-md"})]}),e.jsxs("div",{className:`jsx-1536529477 card-face card-front bg-gradient-to-br ${o}`,children:[e.jsx("div",{className:"jsx-1536529477 card-content",children:t.type==="emoji"?e.jsx("span",{className:"jsx-1536529477 card-emoji",children:t.value}):e.jsx("div",{className:"jsx-1536529477 card-shape",children:e.jsx(gt,{shape:t.value})})}),t.isMatched&&e.jsx("div",{className:"jsx-1536529477 match-indicator",children:e.jsx("span",{className:"jsx-1536529477 checkmark",children:"‚úì"})})]})]}),e.jsx(Ye,{id:"1536529477",children:[".card-container.jsx-1536529477{-webkit-perspective:1000px;-moz-perspective:1000px;-ms-perspective:1000px;perspective:1000px;cursor:pointer;width:100%;aspect-ratio:3/4;position:relative;}",".card-container.matched.jsx-1536529477{-webkit-animation:matchPulse-jsx-1536529477 0.6s ease-out;animation:matchPulse-jsx-1536529477 0.6s ease-out;}",".card.jsx-1536529477{width:100%;height:100%;position:relative;-webkit-transform-style:preserve-3d;-ms-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-transition:-webkit-transform 0.6s cubic-bezier(0.4,0,0.2,1);-webkit-transition:transform 0.6s cubic-bezier(0.4,0,0.2,1);transition:transform 0.6s cubic-bezier(0.4,0,0.2,1);}",".card.flipped.jsx-1536529477{-webkit-transform:rotateY(180deg);-ms-transform:rotateY(180deg);transform:rotateY(180deg);}",".card-face.jsx-1536529477{position:absolute;width:100%;height:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden;border-radius:12px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;box-shadow:0 4px 12px rgba(0,0,0,0.15);-webkit-transition:box-shadow 0.3s ease;transition:box-shadow 0.3s ease;}",".card-container.jsx-1536529477:hover .card-face.jsx-1536529477{box-shadow:0 6px 16px rgba(0,0,0,0.2);}",".card-back.jsx-1536529477{-webkit-transform:rotateY(0deg);-ms-transform:rotateY(0deg);transform:rotateY(0deg);}",".card-front.jsx-1536529477{-webkit-transform:rotateY(180deg);-ms-transform:rotateY(180deg);transform:rotateY(180deg);color:white;}",".card-content.jsx-1536529477{z-index:1;width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".card-emoji.jsx-1536529477{font-size:clamp(2rem,6vw,3.5rem);text-shadow:2px 2px 4px rgba(0,0,0,0.2);}",".card-shape.jsx-1536529477{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.2));filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.2));}",".match-indicator.jsx-1536529477{position:absolute;top:6px;right:6px;width:24px;height:24px;background:rgba(255,255,255,0.95);border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-animation:checkBounce-jsx-1536529477 0.5s ease-out;animation:checkBounce-jsx-1536529477 0.5s ease-out;z-index:10;}",".checkmark.jsx-1536529477{color:#10b981;font-size:16px;font-weight:bold;}","@-webkit-keyframes matchPulse-jsx-1536529477{0%,100%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}25%{-webkit-transform:scale(1.08);-ms-transform:scale(1.08);transform:scale(1.08);}50%{-webkit-transform:scale(0.96);-ms-transform:scale(0.96);transform:scale(0.96);}75%{-webkit-transform:scale(1.04);-ms-transform:scale(1.04);transform:scale(1.04);}}","@keyframes matchPulse-jsx-1536529477{0%,100%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}25%{-webkit-transform:scale(1.08);-ms-transform:scale(1.08);transform:scale(1.08);}50%{-webkit-transform:scale(0.96);-ms-transform:scale(0.96);transform:scale(0.96);}75%{-webkit-transform:scale(1.04);-ms-transform:scale(1.04);transform:scale(1.04);}}","@-webkit-keyframes checkBounce-jsx-1536529477{0%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);opacity:0;}50%{-webkit-transform:scale(1.2);-ms-transform:scale(1.2);transform:scale(1.2);}100%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);opacity:1;}}","@keyframes checkBounce-jsx-1536529477{0%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);opacity:0;}50%{-webkit-transform:scale(1.2);-ms-transform:scale(1.2);transform:scale(1.2);}100%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);opacity:1;}}","@media (max-width:640px){.card-face.jsx-1536529477{border-radius:8px;}.card-emoji.jsx-1536529477{font-size:clamp(1.5rem,8vw,2.5rem);}.match-indicator.jsx-1536529477{width:20px;height:20px;top:4px;right:4px;}.checkmark.jsx-1536529477{font-size:14px;}}"]})]})},wt=({difficulty:t,onExit:s,onComplete:l})=>{const[r,o]=n.useState([]),[i,a]=n.useState([]),[c,b]=n.useState(0),[g,d]=n.useState(0),[f,S]=n.useState(0),[I,B]=n.useState(!1),[P,U]=n.useState(!1);n.useEffect(()=>{o(ht(t)),a([]),b(0),d(0),S(0),B(!1),U(!1)},[t]),n.useEffect(()=>{if(P)return;const z=setInterval(()=>S(m=>m+1),1e3);return()=>clearInterval(z)},[P]),n.useEffect(()=>{const z=t/2;c===z&&!P&&(U(!0),K.playComplete())},[c,t,P]);const O=z=>{if(I||i.length>=2)return;const m=r.find(y=>y.id===z);if(!m||m.isMatched)return;o(y=>y.map(N=>N.id===z?{...N,isFlipped:!0}:N));const v=[...i,z];if(a(v),K.playClick(),v.length===2){d(E=>E+1),B(!0);const y=r.find(E=>E.id===v[0]),N=r.find(E=>E.id===v[1]);ft(y,N)?(K.playCorrect(),setTimeout(()=>{o(E=>E.map(R=>R.id===y.id||R.id===N.id?{...R,isMatched:!0}:R)),b(E=>E+1),a([]),B(!1)},600)):(K.playWrong(),setTimeout(()=>{o(E=>E.map(R=>R.id===y.id||R.id===N.id?{...R,isFlipped:!1}:R)),a([]),B(!1)},1200))}},C=z=>{const m=Math.floor(z/60),v=z%60;return`${m}:${v.toString().padStart(2,"0")}`},A=t/2,T=bt(g,A);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 via-pink-50 to-blue-50 p-4",children:[e.jsx("div",{className:"max-w-6xl mx-auto mb-6",children:e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-2xl p-4 shadow-lg",children:[e.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-xl transition-colors font-semibold text-slate-700",children:[e.jsx(oe,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Tho√°t"})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"text-yellow-500",size:24}),e.jsxs("span",{className:"font-bold text-lg",children:[c,"/",A]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"text-blue-500",size:24}),e.jsx("span",{className:"font-bold text-lg",children:g})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"text-green-500",size:24}),e.jsx("span",{className:"font-bold text-lg",children:C(f)})]})]}),e.jsx(we,{})]})}),e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsx("div",{className:`grid gap-3 ${t===V.Easy?"grid-cols-4 sm:grid-cols-6":t===V.Medium?"grid-cols-5 sm:grid-cols-7":"grid-cols-6 sm:grid-cols-8"}`,children:r.map(z=>e.jsx(pt,{card:z,onClick:()=>O(z.id),isDisabled:I},z.id))})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 animate-in fade-in duration-300",children:e.jsx("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full mx-4 shadow-2xl animate-in zoom-in duration-500",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-6xl mb-4 animate-bounce",children:[T.type==="gold"&&"ü•á",T.type==="silver"&&"ü•à",T.type==="bronze"&&"ü•â",!T.type&&"‚≠ê"]}),e.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:T.message}),e.jsxs("div",{className:"flex items-center justify-center gap-2 my-4 bg-yellow-50 px-6 py-3 rounded-full",children:[e.jsx("span",{className:"text-lg font-semibold text-slate-700",children:"Nh·∫≠n ƒë∆∞·ª£c:"}),e.jsx("div",{className:"flex",children:[...Array(T.type==="gold"?3:T.type==="silver"?2:T.type==="bronze"?1:0)].map((z,m)=>e.jsx("span",{className:"text-2xl",children:"‚≠ê"},m))}),e.jsxs("span",{className:"text-lg font-bold text-yellow-600",children:["+",T.type==="gold"?3:T.type==="silver"?2:T.type==="bronze"?1:0," sao"]})]}),e.jsxs("div",{className:"space-y-3 my-6",children:[e.jsxs("div",{className:"flex justify-between text-lg",children:[e.jsx("span",{className:"text-slate-600",children:"S·ªë n∆∞·ªõc:"}),e.jsx("span",{className:"font-bold text-slate-800",children:g})]}),e.jsxs("div",{className:"flex justify-between text-lg",children:[e.jsx("span",{className:"text-slate-600",children:"Th·ªùi gian:"}),e.jsx("span",{className:"font-bold text-slate-800",children:C(f)})]}),e.jsxs("div",{className:"flex justify-between text-lg",children:[e.jsx("span",{className:"text-slate-600",children:"C·∫∑p gh√©p:"}),e.jsxs("span",{className:"font-bold text-slate-800",children:[A,"/",A]})]})]}),e.jsx("button",{onClick:()=>{const m=Math.max(0,1e3-g*10);l(m,1e3,T.type)},className:"w-full px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-bold text-lg hover:shadow-lg transform hover:scale-105 transition-all",children:"Ho√†n th√†nh"})]})})})]})},jt=({color:t,isActive:s,isDisabled:l,onClick:r,isHardMode:o})=>{const i=o?s?"bg-blue-400 shadow-[0_0_30px_rgba(96,165,250,0.8)]":"bg-blue-700":s?`${t} brightness-125 shadow-[0_0_30px_rgba(255,255,255,0.6)] scale-105`:t;return e.jsxs("button",{onClick:r,disabled:l,className:`
                relative w-full aspect-square rounded-2xl transition-all duration-200
                ${i}
                ${l?"cursor-default":"cursor-pointer hover:brightness-110 active:scale-95"}
                border-4 border-black/10
                flex items-center justify-center
            `,children:[e.jsx("div",{className:"absolute inset-2 rounded-xl bg-gradient-to-br from-white/30 to-transparent pointer-events-none"}),s&&e.jsx("div",{className:"absolute -inset-2 rounded-3xl border-4 border-white/50 animate-pulse pointer-events-none"})]})},vt={easy:{gridSize:4,sequenceLength:{min:3,max:5},sameColor:!1,totalQuestions:5},medium:{gridSize:6,sequenceLength:{min:4,max:6},sameColor:!1,totalQuestions:8},hard:{gridSize:9,sequenceLength:{min:5,max:10},sameColor:!0,totalQuestions:10}},Re=[261.63,293.66,329.63,349.23,392,440,493.88,523.25,587.33],yt=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-teal-500","bg-orange-500","bg-indigo-500"],Nt=(t,s)=>Array.from({length:t},()=>Math.floor(Math.random()*s)),Ie=t=>{const s=Re[t%Re.length];K.playNote(s,.6)},kt=({difficulty:t,onExit:s,onComplete:l})=>{const{playTrack:r,resumeRouteMusic:o}=_e();n.useEffect(()=>(r(null),()=>o()),[]);const i=vt[t],[a,c]=n.useState("idle"),[b,g]=n.useState([]),[d,f]=n.useState([]),[S,I]=n.useState(null),[B,P]=n.useState(0),[U,O]=n.useState(0),[C,A]=n.useState(0),[T,z]=n.useState(null),[m,v]=n.useState("S·∫µn s√†ng th·ª≠ th√°ch tr√≠ nh·ªõ?"),y=n.useRef([]),N=n.useRef([]);n.useEffect(()=>()=>E(),[]);const E=()=>{N.current.forEach(H=>clearTimeout(H)),N.current=[]},R=()=>{if(B>=i.totalQuestions){c("complete"),K.playComplete();return}P(a==="idle"?1:x=>x+1),c("ready"),v("B·∫•m n√∫t ƒë·ªÉ nghe giai ƒëi·ªáu"),f([]);const _=(a==="idle"?1:B+1)/i.totalQuestions,Y=i.sequenceLength.max-i.sequenceLength.min,u=i.sequenceLength.min+Math.floor(_*Y),h=Nt(u,i.gridSize);g(h),y.current=h},Q=()=>{c("demo"),v("L·∫Øng nghe nh√©..."),W(b)},W=H=>{let _=500;const Y=600,u=200;H.forEach((x,M)=>{const j=setTimeout(()=>{I(x),Ie(x)},_),p=setTimeout(()=>{I(null)},_+Y);N.current.push(j,p),_+=Y+u});const h=setTimeout(()=>{c("input"),v("ƒê·∫øn l∆∞·ª£t b·∫°n!")},_);N.current.push(h)},ee=H=>{if(a!=="input")return;Ie(H),I(H),setTimeout(()=>I(null),300);const _=[...d,H];f(_);const Y=_.length-1;_[Y]!==b[Y]?re():_.length===b.length&&te()},te=()=>{const H=C+100,_=U+1;A(H),O(_),c("success"),v("Ch√≠nh x√°c! üéâ"),K.playCorrect();const Y=setTimeout(()=>{if(B>=i.totalQuestions){const u=_/i.totalQuestions*100;let h=null;u===100?h="gold":u>=80?h="silver":u>=50&&(h="bronze"),z(h),c("complete"),console.log("üéØ GAME COMPLETED - State:","complete","Medal:",h,"Score:",H),K.playComplete()}else R()},1500);N.current.push(Y)},re=()=>{c("fail"),v("Sai r·ªìi! M·∫•t l∆∞·ª£t üò¢"),K.playWrong();const H=setTimeout(()=>{R()},2e3);N.current.push(H)},Z=()=>i.gridSize===4?"grid-cols-2 max-w-xs":i.gridSize===6?"grid-cols-3 max-w-md":"grid-cols-3 max-w-xs";return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 via-pink-50 to-blue-50 p-4",children:[e.jsx("div",{className:"max-w-4xl mx-auto mb-8",children:e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-2xl p-4 shadow-lg",children:[e.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-xl transition-colors font-semibold text-slate-700",children:[e.jsx(oe,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Tho√°t"})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"text-blue-500",size:24}),e.jsxs("span",{className:"font-bold text-lg text-slate-700",children:["C√¢u ",B>0?B:1,"/",i.totalQuestions]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"text-yellow-500",size:24}),e.jsx("span",{className:"font-bold text-lg text-slate-700",children:C})]})]}),e.jsx(we,{})]})}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"h-16 mb-8 flex items-center justify-center",children:e.jsx("div",{className:`text-2xl font-bold transition-all duration-300 ${a==="success"?"text-green-600 scale-110":a==="fail"?"text-red-500 scale-110":"text-slate-700"}`,children:m})}),e.jsx("div",{className:`grid gap-4 w-full ${Z()}`,children:Array.from({length:i.gridSize}).map((H,_)=>e.jsx(jt,{id:_,color:yt[_],isActive:S===_,isDisabled:a!=="input",onClick:()=>ee(_),isHardMode:i.sameColor},_))}),a==="idle"&&e.jsxs("button",{onClick:R,className:"mt-12 px-8 py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-2xl text-2xl font-bold shadow-lg hover:shadow-xl hover:scale-105 transition-all flex items-center gap-3",children:[e.jsx(Ce,{fill:"currentColor"}),"B·∫Øt ƒë·∫ßu"]}),a==="ready"&&e.jsxs("button",{onClick:Q,className:"mt-12 px-8 py-4 bg-blue-500 hover:bg-blue-600 text-white rounded-2xl text-2xl font-bold shadow-lg hover:shadow-xl hover:scale-105 transition-all flex items-center gap-3 animate-bounce",children:[e.jsx(Le,{}),"Nghe Giai ƒêi·ªáu"]}),a==="complete"&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full mx-4 shadow-2xl animate-in zoom-in duration-500 text-center",children:[e.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:"üèÜ"}),e.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Ho√†n th√†nh!"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"B·∫°n ƒë√£ ho√†n th√†nh xu·∫•t s·∫Øc ph·∫ßn ch∆°i."}),T&&e.jsxs("div",{className:"flex items-center justify-center gap-2 my-4 bg-yellow-50 px-6 py-3 rounded-full",children:[e.jsx("span",{className:"text-lg font-semibold text-slate-700",children:"Nh·∫≠n ƒë∆∞·ª£c:"}),e.jsx("div",{className:"flex",children:[...Array(T==="gold"?3:T==="silver"?2:1)].map((H,_)=>e.jsx("span",{className:"text-2xl",children:"‚≠ê"},_))}),e.jsxs("span",{className:"text-lg font-bold text-yellow-600",children:["+",T==="gold"?3:T==="silver"?2:1," sao"]})]}),e.jsxs("div",{className:"text-4xl font-bold text-yellow-500 mb-8",children:[C," ƒëi·ªÉm"]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>{const H=i.totalQuestions*100;l(C,H,T),s()},className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors",children:"Tho√°t"}),e.jsxs("button",{onClick:()=>{c("idle"),P(0),O(0),A(0),z(null),v("S·∫µn s√†ng th·ª≠ th√°ch tr√≠ nh·ªõ?")},className:"flex-1 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-bold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(pe,{size:20}),"Ch∆°i l·∫°i"]})]})]})})]})]})};var J=(t=>(t.Normal="normal",t.Combat="combat",t.Buff="buff",t.Teleport="teleport",t.Boss="boss",t))(J||{}),de=(t=>(t.HolySword="holySword",t.HolyGrail="holyGrail",t.FlyingCloak="flyingCloak",t))(de||{});const Ct=["Mu·ªën ƒëi qua ƒë√¢y ∆∞? Tr·∫£ l·ªùi c√¢u h·ªèi c·ªßa ta tr∆∞·ªõc ƒë√£!","Ng∆∞∆°i nghƒ© d·ªÖ v∆∞·ª£t qua √†? H√£y ch·ª©ng minh ƒëi!","Tr·∫£ l·ªùi sai l√† ta ƒÉn th·ªãt ng∆∞∆°i ƒë√≥ nh√©!","H·ª´! Xem n√†o, ng∆∞∆°i c√≥ th√¥ng minh kh√¥ng?","Ta s·∫Ω ch·∫∑n ƒë∆∞·ªùng ng∆∞∆°i t·∫°i ƒë√¢y!"],St=["N·∫øu ng∆∞∆°i tr·∫£ l·ªùi ƒë√∫ng, ta s·∫Ω ban cho ng∆∞∆°i m·ªôt ƒëi·ªÅu ∆∞·ªõc.","H√£y ch·ª©ng t·ªè b·∫£n lƒ©nh, ph·∫ßn th∆∞·ªüng ƒëang ch·ªù!","M·ªôt c√¢u h·ªèi nh·ªè, ph·∫ßn th∆∞·ªüng l·ªõn.","Ng∆∞∆°i mu·ªën s·ª©c m·∫°nh? Tr·∫£ l·ªùi c√¢u h·ªèi n√†y ƒëi!","Ta th·∫•y ng∆∞∆°i c√≥ duy√™n, h√£y nh·∫≠n ph√©p thu·∫≠t c·ªßa ta!"],Mt=["Ng∆∞∆°i th·∫≠t to gan khi d√°m ƒë·∫øn ƒë√¢y!","Ta s·∫Ω thi√™u r·ª•i ng∆∞∆°i b·∫±ng ng·ªçn l·ª≠a tri th·ª©c!","Mu·ªën ƒë√°nh b·∫°i ta? Tr·∫£ l·ªùi h·∫øt c√¢u h·ªèi n√†y ƒëi!","Sai m·ªôt c√¢u th√¥i‚Ä¶ v√† ng∆∞∆°i s·∫Ω ch√°y th√†nh tro!","Cu·ªëi c√πng ng∆∞∆°i c≈©ng t·ªõi! Chu·∫©n b·ªã chi·∫øn ƒë·∫•u!","ƒê√¢y l√† tr·∫≠n chi·∫øn cu·ªëi c√πng c·ªßa ng∆∞∆°i!"],Tt=()=>{const s=[],r=Math.floor(19.6),o=Math.floor(49*.2),i=Math.floor(49*.15),a=[];for(let c=0;c<r;c++)a.push("combat");for(let c=0;c<o;c++)a.push("buff");for(let c=0;c<i;c++)a.push("teleport");for(;a.length<49;)a.push("normal");for(let c=a.length-1;c>0;c--){const b=Math.floor(Math.random()*(c+1));[a[c],a[b]]=[a[b],a[c]]}for(let c=0;c<49;c++)s.push({id:c,type:a[c],position:c});return s.push({id:49,type:"boss",position:49}),s},zt=()=>Math.floor(Math.random()*6)+1,Et=(t,s)=>{const l=Math.floor(Math.random()*17)-8,r=Math.max(0,Math.min(t+l,s-1));return{distance:l,newPosition:r,isBackward:l<0}},Gt=()=>{const t=["holySword","holyGrail","flyingCloak"];return t[Math.floor(Math.random()*t.length)]},Rt=t=>Math.max(3,5-t),ye=t=>t[Math.floor(Math.random()*t.length)],ue=t=>st(t),Be=t=>{switch(t){case"holySword":return"üó°Ô∏è";case"holyGrail":return"üèÜ";case"flyingCloak":return"ü¶∏‚Äç‚ôÇÔ∏è"}},He="/Genius-kids/assets/dragon-CsyCLrDC.png",It=({tiles:t,playerPosition:s,isMoving:l})=>{const r=n.useRef(null),[o,i]=n.useState(400);n.useEffect(()=>{if(!r.current)return;const d=new ResizeObserver(f=>{for(const S of f)i(S.contentRect.width)});return d.observe(r.current),()=>d.disconnect()},[]);const a=n.useMemo(()=>Bt(t.length,o),[t.length,o]),c=d=>{switch(d){case J.Combat:return"‚öîÔ∏è";case J.Buff:return"üçÄ";case J.Teleport:return"üåÄ";case J.Boss:return null;default:return null}},b=d=>{switch(d){case J.Combat:return"from-red-400 to-red-600";case J.Buff:return"from-green-400 to-emerald-600";case J.Teleport:return"from-blue-400 to-yellow-300";case J.Boss:return"from-orange-500 to-red-700";default:return"from-slate-200 to-slate-400"}},g=a.length>0?Math.max(...a.map(d=>d.y))+150:500;return e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsxs("div",{ref:r,className:"relative p-4 md:p-6 lg:p-8 rounded-3xl bg-gradient-to-br from-amber-100 via-orange-50 to-yellow-100 shadow-2xl w-full max-w-7xl border-4 border-amber-200/50",style:{minHeight:`${g}px`},children:[e.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none mix-blend-multiply rounded-3xl",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`,backgroundSize:"200px 200px"}}),e.jsx("div",{className:"absolute inset-0 pointer-events-none rounded-3xl",children:e.jsx("div",{className:"absolute inset-2 border-2 border-yellow-600/20 rounded-2xl"})}),e.jsxs("div",{className:"absolute inset-0 opacity-15 pointer-events-none",children:[e.jsx("div",{className:"absolute top-4 left-4 text-5xl md:text-6xl",children:"üè∞"}),e.jsx("div",{className:"absolute top-16 left-2 text-2xl md:text-3xl rotate-12",children:"‚öîÔ∏è"}),e.jsx("div",{className:"absolute top-4 right-4 text-5xl md:text-6xl",children:"üêâ"}),e.jsx("div",{className:"absolute top-16 right-2 text-2xl md:text-3xl -rotate-12",children:"üî•"}),e.jsx("div",{className:"absolute bottom-4 left-4 text-4xl md:text-5xl",children:"üó°Ô∏è"}),e.jsx("div",{className:"absolute bottom-16 left-6 text-2xl md:text-3xl",children:"üíé"}),e.jsx("div",{className:"absolute bottom-4 right-4 text-4xl md:text-5xl",children:"üëë"}),e.jsx("div",{className:"absolute bottom-16 right-6 text-2xl md:text-3xl",children:"üèÜ"})]}),e.jsx("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{zIndex:1},children:t.map((d,f)=>{if(f===t.length-1)return null;const S=a[f],I=a[f+1];return e.jsx("line",{x1:S.x+40,y1:S.y+40,x2:I.x+40,y2:I.y+40,stroke:"#d97706",strokeWidth:"6",strokeDasharray:"8,4",strokeLinecap:"round",opacity:"0.5"},`connector-${f}`)})}),e.jsx("div",{className:"relative",style:{zIndex:2},children:t.map((d,f)=>{const S=f===s,I=c(d.type),B=b(d.type),P=a[f];return e.jsxs("div",{className:`
                                    absolute transition-all duration-500
                                    ${S?"z-30":"z-10"}
                                `,style:{left:`${P.x}px`,top:`${P.y}px`},children:[e.jsxs("div",{className:`
                                        relative w-10 h-10 md:w-20 md:h-20 rounded-xl md:rounded-2xl bg-gradient-to-br ${B}
                                        shadow-lg border-2 md:border-4 border-white
                                        flex items-center justify-center
                                        transition-all duration-300
                                        ${S?"scale-125 shadow-2xl ring-2 md:ring-4 ring-yellow-400":""}
                                    `,style:{transform:S?"translateY(-8px)":"translateY(0)"},children:[e.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-white px-2 py-1 rounded-full shadow-md border-2 border-slate-300",children:e.jsx("span",{className:"text-xs font-black text-slate-700",children:f+1})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:d.type===J.Boss?e.jsx("img",{src:He,alt:"Dragon Boss",className:"w-8 h-8 md:w-16 md:h-16 object-contain drop-shadow-2xl"}):I?e.jsx("span",{className:"text-2xl md:text-4xl filter drop-shadow-lg",children:I}):null}),e.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-16 h-3 bg-black/20 rounded-full blur-md"})]}),S&&e.jsxs("div",{className:"absolute -top-8 md:-top-16 left-1/2 -translate-x-1/2 z-40",children:[e.jsx("div",{className:`text-3xl md:text-5xl ${l?"animate-bounce":""}`,children:"üèá"}),e.jsx("div",{className:"absolute -bottom-2 md:-bottom-3 left-1/2 -translate-x-1/2 w-6 h-2 md:w-10 md:h-3 bg-black/30 rounded-full blur-sm"})]})]},d.id)})})]})})};function Bt(t,s){const l=[],r=s<768,o=r?20:50,i=r?25:50,a=r?75:90,c=r?55:100,b=s-o*2,g=Math.max(4,Math.min(10,Math.floor(b/a)));for(let d=0;d<t;d++){const f=Math.floor(d/g),S=d%g,I=f%2===0?S:g-1-S,B=o+I*a,P=i+f*c;l.push({x:B,y:P})}return l}const _t=({onRoll:t,value:s,disabled:l})=>{const[r,o]=n.useState(!1),[i,a]=n.useState(null),[c,b]=n.useState(0);n.useEffect(()=>{if(r){const d=setInterval(()=>{a(Math.floor(Math.random()*6)+1),b(f=>f+1)},100);return()=>clearInterval(d)}else s!==null&&a(s)},[r,s]);const g=()=>{l||r||(o(!0),b(0),setTimeout(()=>{t()},100),setTimeout(()=>{o(!1)},1500))};return e.jsxs("div",{className:"flex flex-col items-center gap-2 md:gap-3",children:[e.jsx("div",{className:`
                    w-16 h-16 md:w-24 md:h-24
                    bg-white
                    rounded-xl md:rounded-2xl
                    shadow-xl md:shadow-2xl
                    flex items-center justify-center
                    border-2 md:border-4 border-slate-800
                    transition-all duration-300
                    ${r?"animate-spin":""}
                    ${l?"opacity-50 cursor-not-allowed":"cursor-pointer hover:scale-105 md:hover:scale-110"}
                `,onClick:g,children:e.jsx("div",{className:"text-3xl md:text-6xl font-bold text-slate-800",children:i||"?"})}),e.jsx("button",{onClick:g,disabled:l||r,className:`
                    px-2 py-1 md:px-6 md:py-3
                    bg-gradient-to-r from-amber-500 to-orange-500
                    text-white font-bold text-xs md:text-lg
                    rounded-lg md:rounded-xl
                    shadow-md md:shadow-lg
                    transition-all duration-200
                    ${l||r?"opacity-50 cursor-not-allowed":"hover:scale-105 hover:shadow-xl active:scale-95"}
                `,children:r?"Gieo...":"Gieo x√∫c x·∫Øc"})]})},Lt="/Genius-kids/assets/demon-kEETUbNe.png",$t=({question:t,dialogue:s,onAnswer:l})=>{const[r,o]=n.useState(""),i=n.useRef(null),a=d=>{const f=d.toLowerCase().trim()===t.correctAnswer.toLowerCase().trim();l(f)},c=d=>{d.preventDefault(),a(r)},b=()=>t.type==="color"&&t.color?e.jsx("div",{className:"w-32 h-32 rounded-2xl shadow-lg mx-auto mb-6 border-4 border-white",style:{backgroundColor:t.color}}):(t.type==="shape"||t.type==="clock")&&t.visual?e.jsx("div",{className:"w-48 h-48 mx-auto mb-6",dangerouslySetInnerHTML:{__html:`<svg viewBox="0 0 120 120" width="100%" height="100%">${t.visual}</svg>`}}):null,g=()=>{var d;return t.type==="typing"?e.jsxs("form",{onSubmit:c,className:"w-full",children:[e.jsx("input",{ref:i,type:"text",value:r,onChange:f=>o(f.target.value),className:"w-full text-center text-2xl p-4 rounded-xl border-4 border-red-200 focus:border-red-500 focus:outline-none mb-4",placeholder:"G√µ c√¢u tr·∫£ l·ªùi...",autoFocus:!0}),e.jsx("button",{type:"submit",className:"w-full bg-red-500 text-white font-bold py-3 rounded-xl hover:bg-red-600 transition-colors",children:"G·ª≠i"})]}):e.jsx("div",{className:"grid grid-cols-2 gap-4 w-full",children:(d=t.options)==null?void 0:d.map((f,S)=>e.jsx("button",{onClick:()=>a(f),className:"bg-white hover:bg-red-50 border-b-4 border-red-200 hover:border-red-500 text-slate-700 font-bold text-xl py-6 rounded-2xl shadow-sm transition-all active:scale-95",children:f},S))})};return e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsx("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-2xl w-full animate-in zoom-in-95 duration-300",style:{maxHeight:"calc(100vh - 4rem)"},children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-black text-slate-800 mb-6 leading-tight",children:t.content}),b()]}),e.jsx("div",{className:"mt-auto",children:g()})]}),e.jsx("div",{className:"lg:w-72 flex-shrink-0 flex items-center",children:e.jsxs("div",{className:"text-center w-full",children:[e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx("img",{src:Lt,alt:"Demon",className:"w-40 h-40 object-contain drop-shadow-2xl animate-bounce"})}),e.jsx("div",{className:"bg-red-50 rounded-2xl p-4 border-2 border-red-200",children:e.jsxs("p",{className:"text-lg font-bold text-red-800 italic",children:['"',s,'"']})})]})})]})})})},At="/Genius-kids/assets/fairy-DYgWEkwG.png",Pt=({question:t,dialogue:s,onAnswer:l})=>{const[r,o]=n.useState(""),i=n.useRef(null),a=d=>{const f=d.toLowerCase().trim()===t.correctAnswer.toLowerCase().trim();l(f)},c=d=>{d.preventDefault(),a(r)},b=()=>t.type==="color"&&t.color?e.jsx("div",{className:"w-32 h-32 rounded-2xl shadow-lg mx-auto mb-6 border-4 border-white",style:{backgroundColor:t.color}}):(t.type==="shape"||t.type==="clock")&&t.visual?e.jsx("div",{className:"w-48 h-48 mx-auto mb-6",dangerouslySetInnerHTML:{__html:`<svg viewBox="0 0 120 120" width="100%" height="100%">${t.visual}</svg>`}}):null,g=()=>{var d;return t.type==="typing"?e.jsxs("form",{onSubmit:c,className:"w-full",children:[e.jsx("input",{ref:i,type:"text",value:r,onChange:f=>o(f.target.value),className:"w-full text-center text-xl p-3 rounded-xl border-4 border-green-200 focus:border-green-500 focus:outline-none mb-3",placeholder:"G√µ c√¢u tr·∫£ l·ªùi...",autoFocus:!0}),e.jsx("button",{type:"submit",className:"w-full bg-green-500 text-white font-bold py-2 rounded-xl hover:bg-green-600 transition-colors",children:"G·ª≠i"})]}):e.jsx("div",{className:"grid grid-cols-2 gap-3 w-full",children:(d=t.options)==null?void 0:d.map((f,S)=>e.jsx("button",{onClick:()=>a(f),className:"bg-white hover:bg-green-50 border-b-4 border-green-200 hover:border-green-500 text-slate-700 font-bold text-lg py-4 rounded-2xl shadow-sm transition-all active:scale-95",children:f},S))})};return e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-2xl w-full animate-in zoom-in-95 duration-300 relative",style:{maxHeight:"calc(100vh - 4rem)"},children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-6 left-6 text-3xl animate-ping",children:"‚ú®"}),e.jsx("div",{className:"absolute top-12 right-6 text-2xl animate-pulse",children:"‚≠ê"}),e.jsx("div",{className:"absolute bottom-6 left-12 text-xl animate-bounce",children:"üí´"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 relative z-10",children:[e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-black text-slate-800 mb-4 leading-tight",children:t.content}),b()]}),e.jsx("div",{className:"mt-auto",children:g()})]}),e.jsx("div",{className:"lg:w-64 flex-shrink-0 flex items-center",children:e.jsxs("div",{className:"text-center w-full",children:[e.jsx("div",{className:"mb-3 flex justify-center",children:e.jsx("img",{src:At,alt:"Fairy",className:"w-32 h-32 object-contain drop-shadow-2xl animate-bounce"})}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-3 border-2 border-green-200",children:e.jsxs("p",{className:"text-base font-bold text-green-800 italic",children:['"',s,'"']})})]})})]})]})})},Dt=({question:t,dialogue:s,questionsRemaining:l,onAnswer:r})=>{const[o,i]=n.useState(""),[a,c]=n.useState(t.timeLimit),[b]=n.useState(t.timeLimit),g=n.useRef(null),d=n.useRef(null),f=n.useRef(!1);n.useEffect(()=>(f.current=!1,c(t.timeLimit),d.current=setInterval(()=>{c(C=>C<=.1?(f.current||(f.current=!0,S()),0):C-.1)},100),()=>{d.current&&clearInterval(d.current)}),[t]);const S=()=>{d.current&&clearInterval(d.current),r(!1,!0)},I=C=>{if(f.current)return;f.current=!0,d.current&&clearInterval(d.current);const A=C.toLowerCase().trim()===t.correctAnswer.toLowerCase().trim();r(A,!1)},B=C=>{C.preventDefault(),I(o)},P=()=>{const C=a/b;return C>.6?"bg-green-500":C>.3?"bg-yellow-500":"bg-red-500"},U=()=>t.type==="color"&&t.color?e.jsx("div",{className:"w-32 h-32 rounded-2xl shadow-lg mx-auto mb-6 border-4 border-white",style:{backgroundColor:t.color}}):(t.type==="shape"||t.type==="clock")&&t.visual?e.jsx("div",{className:"w-48 h-48 mx-auto mb-6",dangerouslySetInnerHTML:{__html:`<svg viewBox="0 0 120 120" width="100%" height="100%">${t.visual}</svg>`}}):null,O=()=>{var C;return t.type==="typing"?e.jsxs("form",{onSubmit:B,className:"w-full",children:[e.jsx("input",{ref:g,type:"text",value:o,onChange:A=>i(A.target.value),className:"w-full text-center text-2xl p-4 rounded-xl border-4 border-orange-200 focus:border-orange-500 focus:outline-none mb-4",placeholder:"G√µ c√¢u tr·∫£ l·ªùi...",autoFocus:!0,disabled:f.current}),e.jsx("button",{type:"submit",disabled:f.current,className:"w-full bg-orange-500 text-white font-bold py-3 rounded-xl hover:bg-orange-600 transition-colors disabled:opacity-50",children:"G·ª≠i"})]}):e.jsx("div",{className:"grid grid-cols-2 gap-4 w-full",children:(C=t.options)==null?void 0:C.map((A,T)=>e.jsx("button",{onClick:()=>I(A),disabled:f.current,className:"bg-white hover:bg-orange-50 border-b-4 border-orange-200 hover:border-orange-500 text-slate-700 font-bold text-xl py-6 rounded-2xl shadow-sm transition-all active:scale-95 disabled:opacity-50",children:A},T))})};return e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 animate-in fade-in duration-300",children:e.jsx("div",{className:"bg-gradient-to-br from-red-900 via-orange-800 to-red-900 rounded-3xl shadow-2xl p-2 max-w-2xl w-full animate-in zoom-in-95 duration-500",style:{maxHeight:"calc(100vh - 2rem)"},children:e.jsx("div",{className:"bg-white rounded-2xl p-6 max-h-[calc(100vh-3rem)] overflow-y-auto",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-black text-slate-800 mb-6 leading-tight",children:t.content}),U()]}),e.jsx("div",{className:"mt-auto",children:O()})]}),e.jsx("div",{className:"lg:w-80 flex-shrink-0 flex items-center",children:e.jsxs("div",{className:"text-center w-full",children:[e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx("img",{src:He,alt:"Dragon Boss",className:"w-32 h-32 object-contain animate-pulse"})}),e.jsx("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 rounded-2xl p-4 mb-4 border-2 border-red-300",children:e.jsxs("p",{className:"text-lg font-bold text-red-900 italic",children:['"',s,'"']})}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("span",{className:"text-sm font-bold text-slate-600",children:"C√¢u h·ªèi c√≤n l·∫°i:"}),e.jsx("span",{className:"text-3xl font-black text-red-600",children:l})]}),e.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 mb-4 overflow-hidden shadow-inner",children:e.jsx("div",{className:`h-full transition-all duration-100 ease-linear ${P()}`,style:{width:`${a/b*100}%`}})}),e.jsxs("div",{className:"text-2xl font-black text-slate-600",children:["‚è±Ô∏è ",Math.ceil(a),"s"]})]})})]})})})})},Ht=({distance:t,isBackward:s,hasProtection:l,onComplete:r})=>{n.useEffect(()=>{const i=setTimeout(()=>{r()},2500);return()=>clearTimeout(i)},[r]);const o=s&&l;return e.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-xl w-full text-center animate-in zoom-in-95 duration-300",children:[e.jsx("div",{className:"text-9xl mb-6 animate-spin",children:"üåÄ"}),e.jsx("h2",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-cyan-500 mb-4",children:"D·ªäCH CHUY·ªÇN!"}),o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:"ü¶∏‚Äç‚ôÇÔ∏è"}),e.jsxs("div",{className:"bg-blue-50 rounded-2xl p-6 border-2 border-blue-300",children:[e.jsx("p",{className:"text-xl font-bold text-blue-800 mb-2",children:"√Åo Cho√†ng Bay b·∫£o v·ªá b·∫°n!"}),e.jsx("p",{className:"text-lg text-blue-600",children:"Mi·ªÖn nhi·ªÖm d·ªãch chuy·ªÉn l√πi ‚ú®"})]})]}):e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-2xl p-6 border-2 border-blue-200",children:[e.jsx("p",{className:"text-3xl font-black mb-2",children:s?"‚¨ÖÔ∏è":"‚û°Ô∏è"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-800",children:[s?"L√πi":"Ti·∫øn"," ",Math.abs(t)," √¥"]})]}),e.jsxs("div",{className:"mt-6 flex gap-2 justify-center",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-cyan-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})})},Ft=({difficulty:t,onBack:s,onComplete:l})=>{const{playTrack:r,resumeRouteMusic:o}=_e();n.useEffect(()=>(r(Ue.DRAGON_QUEST),()=>o()),[]);const[i,a]=n.useState("intro"),[c,b]=n.useState(3),[g,d]=n.useState(0),[f,S]=n.useState({holySword:0,holyGrail:0,flyingCloak:!1}),[I,B]=n.useState([]),[P,U]=n.useState(null),[O,C]=n.useState(null),[A,T]=n.useState(""),[z,m]=n.useState(0),[v,y]=n.useState(0),[N,E]=n.useState(null),R=n.useRef(!1),Q=()=>{const x=Tt();B(x),b(3),d(0),S({holySword:0,holyGrail:0,flyingCloak:!1}),y(0),U(null),a("playing")},W=()=>{if(R.current||i!=="playing")return;const x=zt();U(x),a("moving"),R.current=!0,setTimeout(()=>{const M=Math.min(g+x,I.length-1),j=M-g;if(j===0){R.current=!1,ee(M);return}let p=0;const L=setInterval(()=>{p++,d(D=>D+1),p>=j&&(clearInterval(L),setTimeout(()=>{R.current=!1,ee(M)},400))},350)},1700)},ee=x=>{switch(I[x].type){case J.Combat:const j=ue(t);C(j),T(ye(Ct)),a("combat");break;case J.Buff:const p=ue(t);C(p),T(ye(St)),a("buff");break;case J.Teleport:const L=Et(x,I.length);E(L),a("teleport");break;case J.Boss:const D=Rt(f.holySword);m(D);const G=ue(t);C(G),T(ye(Mt)),a("boss");break;default:a("playing")}},te=x=>{x?(K.playCorrect(),y(M=>M+10),a("playing")):(K.playWrong(),_())},re=x=>{if(x){K.playCorrect();const M=Gt();Y(M),y(j=>j+15)}else K.playWrong();a("playing")},Z=(x,M)=>{if(x){K.playCorrect(),y(p=>p+20);const j=z-1;if(j<=0)u();else{m(j);const p=ue(t);C(p)}}else if(K.playWrong(),_(),c>1){const j=z-1;if(j<=0)u();else{m(j);const p=ue(t);C(p)}}},H=()=>{N&&(N.isBackward&&f.flyingCloak?a("playing"):(d(N.newPosition),setTimeout(()=>{ee(N.newPosition)},500)),E(null))},_=()=>{const x=c-1;b(x),x<=0?u():(i==="combat"||i==="buff")&&a("playing")},Y=x=>{S(M=>{const j={...M};switch(x){case de.HolySword:j.holySword<2&&j.holySword++;break;case de.HolyGrail:j.holyGrail<3&&(j.holyGrail++,b(p=>Math.min(3,p+1)));break;case de.FlyingCloak:j.flyingCloak=!0;break}return j})},u=x=>{a("gameover"),K.playComplete()},h=()=>i!=="gameover"||c<=0?null:c===3?"gold":c===2?"silver":c===1?"bronze":null;if(i==="intro")return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-600 via-orange-500 to-yellow-400 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center animate-in zoom-in duration-300",children:[e.jsx("div",{className:"text-8xl mb-6",children:"üêâ"}),e.jsx("h1",{className:"text-4xl font-black text-slate-800 mb-2",children:"ƒê·∫°i Chi·∫øn R·ªìng Th·∫ßn"}),e.jsx("p",{className:"text-slate-500 text-lg mb-8",children:"Phi√™u l∆∞u, thu th·∫≠p buff v√† ƒë√°nh b·∫°i r·ªìng th·∫ßn!"}),e.jsxs("div",{className:"space-y-4 mb-8 text-left bg-slate-50 p-4 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{className:"text-red-500 fill-red-500"}),e.jsx("span",{className:"font-bold text-slate-700",children:"3 M·∫°ng"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xe,{className:"text-yellow-500"}),e.jsx("span",{className:"font-bold text-slate-700",children:"Thu th·∫≠p Buff"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üêâ"}),e.jsx("span",{className:"font-bold text-slate-700",children:"ƒê√°nh Boss cu·ªëi"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:s,className:"flex-1 py-3 font-bold text-slate-500 hover:bg-slate-100 rounded-xl transition-colors",children:"Quay l·∫°i"}),e.jsxs("button",{onClick:Q,className:"flex-[2] py-3 bg-gradient-to-r from-red-600 to-orange-500 text-white font-bold rounded-xl shadow-lg flex items-center justify-center gap-2 transition-transform hover:scale-105",children:[e.jsx(Ce,{size:20,fill:"currentColor"})," B·∫Øt ƒë·∫ßu"]})]})]})});if(i==="gameover"){const x=h(),M=c>0;return e.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center animate-in zoom-in duration-300",children:[e.jsx("div",{className:"mb-6",children:M?e.jsx(xe,{size:80,className:"text-yellow-400 mx-auto animate-bounce"}):e.jsx(fe,{size:80,className:"text-red-500 mx-auto fill-red-500"})}),e.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-2",children:M?"Chi·∫øn th·∫Øng!":"Th·∫•t b·∫°i!"}),e.jsx("p",{className:"text-slate-500 mb-4 text-lg",children:M?"B·∫°n ƒë√£ ƒë√°nh b·∫°i r·ªìng th·∫ßn!":"B·∫°n ƒë√£ h·∫øt m·∫°ng."}),M&&x&&e.jsxs("div",{className:"flex items-center justify-center gap-2 my-4 bg-yellow-50 px-6 py-3 rounded-full",children:[e.jsx("span",{className:"text-lg font-semibold text-slate-700",children:"Nh·∫≠n ƒë∆∞·ª£c:"}),e.jsx("div",{className:"flex",children:[...Array(c)].map((j,p)=>e.jsx("span",{className:"text-2xl",children:"‚≠ê"},p))}),e.jsxs("span",{className:"text-lg font-bold text-yellow-600",children:["+",c," sao"]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 mb-8",children:[e.jsx("div",{className:"text-sm text-slate-500 mb-1",children:"T·ªïng ƒëi·ªÉm"}),e.jsx("div",{className:"text-5xl font-black text-brand-600",children:v})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>{l(v,300,x),s()},className:"flex-1 py-3 font-bold text-slate-500 hover:bg-slate-100 rounded-xl transition-colors",children:"Tho√°t"}),e.jsxs("button",{onClick:Q,className:"flex-[2] py-3 bg-gradient-to-r from-red-600 to-orange-500 text-white font-bold rounded-xl shadow-lg flex items-center justify-center gap-2 transition-transform hover:scale-105",children:[e.jsx(pe,{size:20})," Ch∆°i l·∫°i"]})]})]})})}return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 via-pink-50 to-orange-50 flex flex-col",children:[e.jsxs("div",{className:"bg-white p-4 shadow-sm flex justify-between items-center",children:[e.jsx("button",{onClick:s,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500",children:e.jsx(oe,{})}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-red-50 px-4 py-2 rounded-full border border-red-100",children:[e.jsx(fe,{className:"text-red-500 fill-red-500",size:20}),e.jsx("span",{className:"font-black text-red-700 text-xl",children:c})]}),f.holySword>0&&e.jsxs("div",{className:"flex items-center gap-1 bg-yellow-50 px-3 py-2 rounded-full border border-yellow-100",children:[e.jsx("span",{className:"text-xl",children:Be(de.HolySword)}),e.jsx("span",{className:"font-bold text-yellow-700",children:f.holySword})]}),f.flyingCloak&&e.jsx("div",{className:"bg-blue-50 px-3 py-2 rounded-full border border-blue-100",children:e.jsx("span",{className:"text-xl",children:Be(de.FlyingCloak)})}),e.jsxs("div",{className:"flex items-center gap-2 bg-purple-50 px-4 py-2 rounded-full border border-purple-100",children:[e.jsx(xe,{className:"text-purple-500",size:20}),e.jsx("span",{className:"font-black text-purple-700 text-xl",children:v})]})]}),e.jsx(we,{})]}),e.jsxs("div",{className:"flex-1 flex items-center justify-center p-4 relative",children:[e.jsx(It,{tiles:I,playerPosition:g,isMoving:i==="moving"}),e.jsx("div",{className:"fixed bottom-2 right-2 z-50 w-24 lg:w-60",children:e.jsx("div",{className:"bg-white rounded-lg lg:rounded-2xl shadow-xl lg:shadow-2xl p-1.5 lg:p-4 border-2 lg:border-4 border-amber-400",children:e.jsx(_t,{onRoll:W,value:P,disabled:R.current||i!=="playing"})})})]}),i==="combat"&&O&&e.jsx($t,{question:O,dialogue:A,onAnswer:te}),i==="buff"&&O&&e.jsx(Pt,{question:O,dialogue:A,onAnswer:re}),i==="boss"&&O&&e.jsx(Dt,{question:O,dialogue:A,questionsRemaining:z,onAnswer:Z}),i==="teleport"&&N&&e.jsx(Ht,{distance:N.distance,isBackward:N.isBackward,hasProtection:f.flyingCloak,onComplete:H})]})},Qt=({children:t})=>e.jsxs("div",{className:"relative w-full h-full overflow-hidden bg-sky-300",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-1/3 bg-gradient-to-b from-sky-400 to-sky-200 z-0",children:[e.jsx("div",{className:"absolute top-4 right-8 w-16 h-16 bg-yellow-400 rounded-full shadow-[0_0_40px_rgba(250,204,21,0.6)] animate-pulse"}),e.jsx("div",{className:"absolute top-10 left-10 w-24 h-8 bg-white/80 rounded-full blur-sm opacity-80 animate-[float_20s_linear_infinite]"}),e.jsx("div",{className:"absolute top-20 right-1/3 w-32 h-10 bg-white/60 rounded-full blur-sm opacity-60 animate-[float_25s_linear_infinite_reverse]"})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-2/3 z-10",style:{perspective:"1000px",perspectiveOrigin:"50% 0%"},children:e.jsxs("div",{className:"relative w-full h-[200%] bg-emerald-600 origin-top",style:{transform:"rotateX(60deg)",background:"linear-gradient(to bottom, #10b981, #059669)"},children:[e.jsxs("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[60%] h-full bg-slate-700 border-l-8 border-r-8 border-white/50",children:[e.jsx("div",{className:"absolute top-0 left-1/3 w-2 h-full bg-dashed-line opacity-50"}),e.jsx("div",{className:"absolute top-0 right-1/3 w-2 h-full bg-dashed-line opacity-50"}),e.jsx("div",{className:"absolute inset-0 bg-road-texture animate-road-scroll opacity-30"})]}),e.jsx("div",{className:"absolute top-0 left-[10%] w-4 h-4 bg-red-400 rounded-full"})]})}),e.jsx("div",{className:"absolute inset-0 z-20 pointer-events-none",children:t}),e.jsx("style",{children:`
                .bg-dashed-line {
                    background-image: linear-gradient(to bottom, white 50%, transparent 50%);
                    background-size: 10px 100px;
                }
                @keyframes road-scroll {
                    from { background-position: 0 0; }
                    to { background-position: 0 100px; }
                }
                .animate-road-scroll {
                    animation: road-scroll 0.5s linear infinite;
                }
                @keyframes float {
                    0% { transform: translateX(0px); }
                    50% { transform: translateX(20px); }
                    100% { transform: translateX(0px); }
                }
            `})]}),Ot="/Genius-kids/assets/Car-BzTTxEud.png",qt=({lane:t})=>{const s=l=>{switch(l){case 0:return"16.66%";case 1:return"50%";case 2:return"83.33%";default:return"50%"}};return e.jsxs("div",{className:"absolute bottom-4 transition-all duration-200 ease-out z-30",style:{left:s(t),transform:"translateX(-50%)",width:"100px",height:"100px"},children:[e.jsxs("div",{className:"relative w-full h-full animate-bounce-slight",children:[e.jsx("img",{src:Ot,alt:"Player Car",className:"w-full h-full object-contain drop-shadow-2xl filter brightness-110"}),e.jsxs("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-full flex justify-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-[ping_1s_linear_infinite]"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-[ping_1s_linear_infinite_0.5s]"})]})]}),e.jsx("style",{children:`
                @keyframes bounce-slight {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-2px); }
                }
                .animate-bounce-slight {
                    animation: bounce-slight 0.5s ease-in-out infinite;
                }
            `})]})},Xt=({lane:t,yPosition:s,content:l,type:r})=>{const o=b=>{switch(b){case 0:return"16.66%";case 1:return"50%";case 2:return"83.33%";default:return"50%"}},i=.5+s/100*.5,a=Math.max(0,Math.min(1,s/10)),c=()=>{switch(r){case"question":return"bg-blue-600 border-blue-400";case"answer":return"bg-white border-slate-200 text-slate-800";case"obstacle":return"bg-red-600 border-red-800 text-white";default:return"bg-gray-500"}};return e.jsx("div",{className:"absolute z-20 transition-transform duration-75 ease-linear will-change-transform",style:{left:o(t),top:`${s}%`,transform:`translateX(-50%) scale(${i})`,opacity:a},children:e.jsx("div",{className:`
                px-4 py-2 rounded-xl border-b-4 shadow-lg font-bold text-center min-w-[80px]
                ${c()}
                ${r==="question"?"text-white text-xl":"text-2xl"}
            `,children:l})})},Yt=({difficulty:t,onExit:s})=>{const{currentStudent:l}=Ne(),{addGameResult:r}=ke(),[o,i]=n.useState("menu"),[a,c]=n.useState(0),[b,g]=n.useState(3),[d,f]=n.useState(1),[S,I]=n.useState([]),[B,P]=n.useState(0),[U,O]=n.useState(""),[C,A]=n.useState(0),[T,z]=n.useState(null),[m,v]=n.useState(!1),[y,N]=n.useState(null),E=n.useRef(0),R=n.useRef(0),Q=n.useRef([]),W=n.useRef(1),ee=n.useRef(0),te=n.useRef(3),re=n.useRef(.3),Z=n.useRef(0),H=n.useRef("menu"),_=n.useRef(null),Y=t==="easy"?10:t==="medium"?15:20,u=t==="easy"?.3:t==="medium"?.4:.5,h=40;n.useEffect(()=>{H.current=o},[o]);const x=()=>{let w,k,$,q;if(t==="easy")$=Math.random()<.5?"+":"-",$==="+"?(w=Math.floor(Math.random()*10)+1,k=Math.floor(Math.random()*10)+1,q=w+k):(w=Math.floor(Math.random()*10)+5,k=Math.floor(Math.random()*w),q=w-k);else if(t==="medium")if(Math.random()<.6)if($=Math.random()<.5?"+":"-",w=Math.floor(Math.random()*40)+10,k=Math.floor(Math.random()*20)+1,$==="-"){const se=Math.max(w,k);k=Math.min(w,k),w=se,q=w-k}else q=w+k;else $="x",k=[2,5,10][Math.floor(Math.random()*3)],w=Math.floor(Math.random()*10)+1,q=w*k;else if(Math.random()<.4)if($=Math.random()<.5?"+":"-",w=Math.floor(Math.random()*80)+10,k=Math.floor(Math.random()*50)+10,$==="-"){const se=Math.max(w,k);k=Math.min(w,k),w=se,q=w-k}else q=w+k;else $="x",w=Math.floor(Math.random()*9)+2,k=Math.floor(Math.random()*9)+2,q=w*k;return{text:`${w} ${$} ${k} = ?`,answer:q}},M=()=>{if(Z.current>=Y)return;const w=x();_.current=w;const k=Date.now(),$=Math.floor(Math.random()*3),q=[];for(let ae=0;ae<3;ae++){let se=w.answer,be=ae===$;if(!be)do se=w.answer+Math.floor(Math.random()*10)-5;while(se===w.answer||se<0);q.push({id:k+ae+1,lane:ae,yPosition:-20,content:se.toString(),type:"answer",value:se,isCorrect:be,questionText:w.text})}Q.current=[...Q.current,...q],Z.current+=1,P(Z.current)},j=w=>{i(w?"victory":"gameover"),E.current&&cancelAnimationFrame(E.current);let k=null,$=0;if(w&&(te.current>=3?k="gold":te.current===2?k="silver":k="bronze",t==="easy"?k==="bronze"?$=1:k==="silver"?$=2:k==="gold"&&($=3):t==="medium"?k==="bronze"?$=2:k==="silver"?$=3:k==="gold"&&($=5):t==="hard"&&(k==="bronze"?$=3:k==="silver"?$=5:k==="gold"&&($=7))),l){const{reward:q}=ge(l,k,$);if(A(q.stars),r({id:Date.now().toString(),date:new Date().toISOString(),gameType:"math_racing",difficulty:t,score:ee.current,maxScore:Y*10,starsEarned:q.stars,durationSeconds:0},q.image||void 0),q.image){const ae=!l.ownedImageIds.includes(q.image.id);z({image:q.image,isNew:ae})}else z(null)}ne(w?"complete":"buzz")},p=w=>{T?(N(w),i("menu"),v(!0)):w==="restart"?je():s()},L=()=>{v(!1),z(null),y==="restart"?je():s(),N(null)},D=w=>{R.current||(R.current=w);const k=w-R.current;R.current=w;const $=Q.current[Q.current.length-1];if((!$||$.yPosition>h)&&Z.current<Y)M();else if(Z.current>=Y&&Q.current.length===0){j(!0);return}const ae=re.current*(k/16);Q.current=Q.current.map(X=>({...X,yPosition:X.yPosition+ae}));const se=Q.current.filter(X=>!X.passed&&X.questionText);if(se.length>0){const X=se.reduce((me,Me)=>me.yPosition>Me.yPosition?me:Me);X.questionText&&X.questionText!==U&&O(X.questionText)}const be=80,Xe=95;Q.current.forEach(X=>{if(!X.passed&&X.yPosition>be&&X.yPosition<Xe&&X.lane===W.current&&X.type==="answer"){if(X.passed=!0,X.isCorrect)ee.current+=10,c(ee.current),ne("ding"),Q.current.forEach(me=>{me.questionText===X.questionText&&(me.passed=!0)});else if(te.current-=1,g(te.current),ne("buzz"),te.current<=0){j(!1);return}}}),Q.current=Q.current.filter(X=>X.yPosition<120),I([...Q.current]),H.current==="playing"&&(E.current=requestAnimationFrame(D))},G=n.useCallback(()=>{W.current>0&&(W.current-=1,f(W.current))},[]),F=n.useCallback(()=>{W.current<2&&(W.current+=1,f(W.current))},[]),le=n.useCallback(w=>{H.current==="playing"&&(w.key==="ArrowLeft"&&G(),w.key==="ArrowRight"&&F())},[G,F]);n.useEffect(()=>(window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)),[le]);const ie=n.useRef(null),ce=w=>{ie.current=w.touches[0].clientX},qe=w=>{if(!ie.current)return;const $=w.changedTouches[0].clientX-ie.current;Math.abs($)>50&&($>0?F():G()),ie.current=null},je=()=>{i("playing"),c(0),g(3),P(0),O(""),Q.current=[],W.current=1,f(1),ee.current=0,te.current=3,Z.current=0,re.current=u,A(0),z(null),v(!1),N(null),R.current=performance.now(),E.current=requestAnimationFrame(D)};return n.useEffect(()=>()=>{E.current&&cancelAnimationFrame(E.current)},[]),e.jsx("div",{className:"fixed inset-0 bg-slate-900 z-50 flex justify-center items-center",children:e.jsxs("div",{className:"relative w-full max-w-[480px] h-full bg-slate-900 flex flex-col shadow-2xl overflow-hidden",onTouchStart:ce,onTouchEnd:qe,children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full z-50 p-4 flex justify-between items-start pointer-events-none",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"bg-white/90 backdrop-blur px-4 py-2 rounded-xl shadow-lg border-2 border-slate-200",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:"ƒêi·ªÉm s·ªë"}),e.jsx("p",{className:"text-2xl font-black text-brand-600",children:a})]}),e.jsxs("div",{className:"bg-white/90 backdrop-blur px-4 py-2 rounded-xl shadow-lg border-2 border-slate-200",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:"Ti·∫øn ƒë·ªô"}),e.jsxs("p",{className:"text-lg font-bold text-slate-700",children:[B," / ",Y]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 pointer-events-auto",children:[e.jsx("div",{className:"flex gap-1 mt-1",children:[...Array(3)].map((w,k)=>e.jsx(fe,{className:`w-8 h-8 ${k<b?"text-red-500 fill-red-500":"text-slate-400 fill-slate-800/20"}`},k))}),e.jsx("button",{onClick:s,className:"bg-white/90 backdrop-blur p-2 rounded-xl shadow-lg border-2 border-slate-200 text-slate-600 hover:bg-red-50 hover:text-red-500 transition-colors",children:e.jsx(Ve,{size:24})})]})]}),e.jsx("div",{className:"flex-1 relative",children:e.jsxs(Qt,{children:[o==="playing"&&U&&e.jsx("div",{className:"absolute top-36 left-1/2 -translate-x-1/2 z-30 animate-in fade-in zoom-in duration-300 w-full px-4 flex justify-center",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-md px-8 py-4 rounded-2xl shadow-2xl border-4 border-brand-400 transform hover:scale-105 transition-transform",children:e.jsx("p",{className:"text-4xl md:text-5xl font-black text-slate-800 tracking-wider drop-shadow-sm whitespace-nowrap",children:U})})}),S.map(w=>e.jsx(Xt,{lane:w.lane,yPosition:w.yPosition,content:w.content,type:w.type},w.id)),e.jsx(qt,{lane:d})]})}),e.jsxs("div",{className:"absolute bottom-4 left-0 w-full flex justify-between px-8 pointer-events-auto z-50 md:hidden",children:[e.jsx("button",{onClick:G,className:"p-4 bg-white/20 backdrop-blur rounded-full active:bg-white/40",children:e.jsx(oe,{className:"text-white w-8 h-8"})}),e.jsx("button",{onClick:F,className:"p-4 bg-white/20 backdrop-blur rounded-full active:bg-white/40",children:e.jsx(at,{className:"text-white w-8 h-8"})})]}),o==="menu"&&!m&&e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-sm w-full text-center shadow-2xl animate-in zoom-in",children:[e.jsx("h1",{className:"text-3xl font-black text-brand-600 mb-2",children:"ƒê∆∞·ªùng ƒêua Th·∫ßn T·ªëc"}),e.jsx("p",{className:"text-slate-500 mb-8",children:"L√°i xe ch·ªçn ƒë√°p √°n ƒë√∫ng ƒë·ªÉ v·ªÅ ƒë√≠ch!"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:je,className:"w-full py-4 bg-brand-500 hover:bg-brand-600 text-white rounded-xl font-bold text-xl shadow-lg shadow-brand-200 flex items-center justify-center gap-2",children:[e.jsx(Ce,{fill:"currentColor"})," B·∫Øt ƒë·∫ßu"]}),e.jsx("button",{onClick:s,className:"w-full py-4 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-xl font-bold",children:"Tho√°t"})]})]})}),(o==="gameover"||o==="victory")&&!m&&e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-md z-[60] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-sm w-full text-center shadow-2xl animate-in zoom-in border-4 border-brand-100",children:[o==="victory"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-24 h-24 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:e.jsx(he,{size:48,className:"text-yellow-500 fill-yellow-500 animate-spin-slow"})}),e.jsx("h2",{className:"text-4xl font-black text-slate-800 mb-2",children:"V·ªÅ ƒê√≠ch!"}),e.jsx("p",{className:"text-slate-500 mb-6 font-medium",children:"B·∫°n ƒë√£ ho√†n th√†nh ch·∫∑ng ƒëua xu·∫•t s·∫Øc."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:e.jsx(fe,{size:48,className:"text-red-500 fill-red-500 animate-pulse"})}),e.jsx("h2",{className:"text-4xl font-black text-slate-800 mb-2",children:"H·∫øt XƒÉng!"}),e.jsx("p",{className:"text-slate-500 mb-6 font-medium",children:"ƒê·ª´ng n·∫£n ch√≠, h√£y th·ª≠ l·∫°i nh√©."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:"ƒêi·ªÉm s·ªë"}),e.jsx("p",{className:"text-3xl font-black text-brand-600",children:a})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-2xl border border-yellow-100",children:[e.jsx("p",{className:"text-xs text-yellow-600 uppercase font-bold mb-1",children:"Sao th∆∞·ªüng"}),e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("p",{className:"text-3xl font-black text-yellow-500",children:C}),e.jsx(he,{size:24,className:"text-yellow-500 fill-yellow-500"})]})]})]}),T&&e.jsx("div",{className:"mb-6 p-3 bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl border border-purple-200 animate-pulse",children:e.jsxs("p",{className:"text-purple-700 font-bold flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üéÅ"})," C√≥ qu√† b√≠ m·∫≠t ƒëang ch·ªù!"]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>p("restart"),className:"w-full py-4 bg-brand-500 hover:bg-brand-600 text-white rounded-xl font-bold text-xl shadow-lg shadow-brand-200 flex items-center justify-center gap-2 transition-transform active:scale-95",children:[e.jsx(pe,{})," Ch∆°i l·∫°i"]}),e.jsxs("button",{onClick:()=>p("exit"),className:"w-full py-4 bg-white hover:bg-slate-50 text-slate-600 border-2 border-slate-200 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-colors",children:[e.jsx(rt,{size:20})," Tho√°t"]})]})]})}),m&&T&&e.jsx($e,{image:T.image,isNew:T.isNew,onClose:L})]})})},Ut=t=>{const s=Array.from({length:9},()=>Array(9).fill(0));Vt(s),Qe(s);const l=s.map(o=>[...o]);let r=0;switch(t){case"easy":r=45;break;case"medium":r=35;break;case"hard":r=28;break}return Jt(s,r),{initialGrid:s,solvedGrid:l}},Vt=t=>{for(let s=0;s<9;s=s+3)Wt(t,s,s)},Wt=(t,s,l)=>{let r;for(let o=0;o<3;o++)for(let i=0;i<3;i++){do r=Math.floor(Math.random()*9)+1;while(!Kt(t,s,l,r));t[s+o][l+i]=r}},Kt=(t,s,l,r)=>{for(let o=0;o<3;o++)for(let i=0;i<3;i++)if(t[s+o][l+i]===r)return!1;return!0},Fe=(t,s,l,r)=>{for(let a=0;a<9;a++)if(t[s][a]===r)return!1;for(let a=0;a<9;a++)if(t[a][l]===r)return!1;const o=s-s%3,i=l-l%3;for(let a=0;a<3;a++)for(let c=0;c<3;c++)if(t[a+o][c+i]===r)return!1;return!0},Qe=t=>{let s=-1,l=-1,r=!0;for(let i=0;i<9;i++){for(let a=0;a<9;a++)if(t[i][a]===0){s=i,l=a,r=!1;break}if(!r)break}if(r)return!0;const o=[1,2,3,4,5,6,7,8,9];for(let i of o)if(Fe(t,s,l,i)){if(t[s][l]=i,Qe(t))return!0;t[s][l]=0}return!1},Oe=(t,s={val:0})=>{let l=-1,r=-1,o=!0;for(let i=0;i<9;i++){for(let a=0;a<9;a++)if(t[i][a]===0){l=i,r=a,o=!1;break}if(!o)break}if(o)return s.val++,!0;for(let i=1;i<=9;i++){if(s.val>1)return!1;Fe(t,l,r,i)&&(t[l][r]=i,Oe(t,s),t[l][r]=0)}return!1},Jt=(t,s)=>{let l=[];for(let o=0;o<81;o++)l.push(o);for(let o=l.length-1;o>0;o--){const i=Math.floor(Math.random()*(o+1));[l[o],l[i]]=[l[i],l[o]]}let r=81;for(let o=0;o<81&&!(r<=s);o++){let i=l[o],a=Math.floor(i/9),c=i%9;if(t[a][c]!==0){let b=t[a][c];t[a][c]=0;let g={val:0};Oe(t,g),g.val!==1?t[a][c]=b:r--}}},Zt=({onExit:t})=>{const{currentStudent:s}=Ne(),{addGameResult:l,updateStudent:r}=ke(),[o,i]=n.useState(null),[a,c]=n.useState([]),[b,g]=n.useState([]),[d,f]=n.useState(null),[S,I]=n.useState(!1),[B,P]=n.useState(0),[U,O]=n.useState(!1),[C,A]=n.useState("menu"),[T,z]=n.useState(0),[m,v]=n.useState(null),[y,N]=n.useState(!1),E=n.useRef(null),R=u=>{const{initialGrid:h,solvedGrid:x}=Ut(u),M=h.map(j=>j.map(p=>({value:p,isInitial:p!==0,notes:[],isError:!1})));c(M),g(x),i(u),P(0),A("playing"),O(!1),f(null),z(0),v(null),N(!1)};n.useEffect(()=>(C==="playing"&&!U?E.current=setInterval(()=>{P(u=>u+1)},1e3):E.current&&clearInterval(E.current),()=>{E.current&&clearInterval(E.current)}),[C,U]);const Q=(u,h)=>{C==="playing"&&(f({r:u,c:h}),ne("click"))},W=u=>{var x,M,j;const h=u.map(p=>p.map(L=>({...L,isError:!1})));for(let p=0;p<9;p++){const L=new Map,D=new Map;for(let G=0;G<9;G++){const F=h[p][G].value;F!==0&&(L.has(F)||L.set(F,[]),(x=L.get(F))==null||x.push(G));const le=h[G][p].value;le!==0&&(D.has(le)||D.set(le,[]),(M=D.get(le))==null||M.push(G))}L.forEach(G=>{G.length>1&&G.forEach(F=>h[p][F].isError=!0)}),D.forEach(G=>{G.length>1&&G.forEach(F=>h[F][p].isError=!0)})}for(let p=0;p<3;p++)for(let L=0;L<3;L++){const D=new Map;for(let G=0;G<3;G++)for(let F=0;F<3;F++){const le=p*3+G,ie=L*3+F,ce=h[le][ie].value;ce!==0&&(D.has(ce)||D.set(ce,[]),(j=D.get(ce))==null||j.push({r:le,c:ie}))}D.forEach(G=>{G.length>1&&G.forEach(F=>h[F.r][F.c].isError=!0)})}return h},ee=u=>{if(C!=="playing"||!d)return;const{r:h,c:x}=d;if(a[h][x].isInitial)return;let j=a.map(L=>L.map(D=>({...D})));const p=j[h][x];if(S)p.notes.includes(u)?p.notes=p.notes.filter(L=>L!==u):p.notes=[...p.notes,u],c(j);else{if(p.value===u)return;p.value=u,p.notes=[],j=W(j),c(j),ne("click"),Z(j)}},te=()=>{if(C!=="playing"||!d)return;const{r:u,c:h}=d;if(a[u][h].isInitial)return;let x=a.map(M=>M.map(j=>({...j})));x[u][h]={...x[u][h],value:0,notes:[]},x=W(x),c(x),ne("click")},re=()=>{if(C!=="playing"||!d)return;const{r:u,c:h}=d;if(a[u][h].value!==0&&!a[u][h].isError)return;if(!s||s.stars<5){alert("B·∫°n c·∫ßn 5 sao ƒë·ªÉ d√πng g·ª£i √Ω!");return}r({...s,stars:s.stars-5});let x=a.map(M=>M.map(j=>({...j})));x[u][h]={...x[u][h],value:b[u][h],isInitial:!1,notes:[]},x=W(x),c(x),ne("ding"),Z(x)},Z=u=>{for(let h=0;h<9;h++)for(let x=0;x<9;x++)if(u[h][x].value===0)return;for(let h=0;h<9;h++)for(let x=0;x<9;x++)if(u[h][x].isError)return;for(let h=0;h<9;h++)for(let x=0;x<9;x++)if(u[h][x].value!==b[h][x])return;H()},H=()=>{if(A("won"),ne("complete"),E.current&&clearInterval(E.current),!s||!o)return;let u=0,h=0,x=0,M=0;switch(o){case"easy":h=300,x=480,M=.2;break;case"medium":h=600,x=900,M=.3;break;case"hard":h=900,x=1200,M=.5;break}B<h?u=3:B<x?u=2:u=1,ge(s,u===3?"gold":u===2?"silver":"bronze",u);let p=0;o==="easy"&&(p=u),o==="medium"&&(p=u===3?5:u===2?3:2),o==="hard"&&(p=u===3?10:u===2?6:4);const L=s.stars+p;let D=null;if(u===3&&Math.random()<M){const G=ge(s,"gold",0);G.reward.image&&(D=G.reward.image)}if(r({...s,stars:L}),z(p),D){const G=!s.ownedImageIds.includes(D.id);v({image:D,isNew:G})}l({id:Date.now().toString(),date:new Date().toISOString(),gameType:"sudoku",difficulty:o,score:810-B,maxScore:810,starsEarned:p,durationSeconds:B},D||void 0)},_=u=>{const h=Math.floor(u/60),x=u%60;return`${h}:${x.toString().padStart(2,"0")}`},Y=(u,h)=>{const x=a[u][h],M=(d==null?void 0:d.r)===u&&(d==null?void 0:d.c)===h,j=d&&(d.r===u||d.c===h||Math.floor(d.r/3)===Math.floor(u/3)&&Math.floor(d.c/3)===Math.floor(h/3)),p=d&&a[d.r][d.c].value!==0&&a[d.r][d.c].value===x.value;let L="bg-[#fdf6e3]";x.isError?L="bg-red-200":M?L="bg-brand-300":p?L="bg-brand-200":j&&(L="bg-[#eee8d5]");const D=(h+1)%3===0&&h!==8?"border-r-2 border-r-[#8b4513]":"border-r border-r-[#d2b48c]",G=(u+1)%3===0&&u!==8?"border-b-2 border-b-[#8b4513]":"border-b border-b-[#d2b48c]";return e.jsx("div",{className:`w-full h-full flex items-center justify-center text-xl md:text-2xl font-bold cursor-pointer select-none transition-colors duration-100
                    ${L} ${D} ${G}
                    ${x.isInitial?"text-[#5d4037]":"text-brand-600"}
                `,onClick:()=>Q(u,h),children:x.value!==0?x.value:e.jsx("div",{className:"grid grid-cols-3 gap-[1px] w-full h-full p-[2px]",children:x.notes.map(F=>e.jsx("div",{className:"flex items-center justify-center text-[8px] md:text-[10px] text-slate-500 leading-none",children:F},F))})},`${u}-${h}`)};return C==="menu"?e.jsx("div",{className:"fixed inset-0 bg-[#fdf6e3] z-50 flex flex-col items-center justify-center p-4 bg-wood-pattern",children:e.jsxs("div",{className:"max-w-md w-full bg-[#deb887] rounded-3xl p-8 shadow-[0_10px_30px_rgba(0,0,0,0.3)] border-4 border-[#8b4513] text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none bg-[url('https://www.transparenttextures.com/patterns/wood-pattern.png')]"}),e.jsx("h1",{className:"text-4xl font-black text-[#5d4037] mb-2 drop-shadow-sm",children:"Sudoku Logic"}),e.jsx("p",{className:"text-[#8b4513] mb-8 font-medium",children:"R√®n luy·ªán t∆∞ duy logic"}),e.jsxs("div",{className:"space-y-4 relative z-10",children:[e.jsx("button",{onClick:()=>R("easy"),className:"w-full py-4 bg-green-500 hover:bg-green-600 text-white rounded-xl font-bold text-xl shadow-[0_4px_0_#15803d] active:shadow-none active:translate-y-1 transition-all border-2 border-[#14532d]",children:"D·ªÖ (Easy)"}),e.jsx("button",{onClick:()=>R("medium"),className:"w-full py-4 bg-yellow-500 hover:bg-yellow-600 text-white rounded-xl font-bold text-xl shadow-[0_4px_0_#a16207] active:shadow-none active:translate-y-1 transition-all border-2 border-[#713f12]",children:"Trung B√¨nh (Medium)"}),e.jsx("button",{onClick:()=>R("hard"),className:"w-full py-4 bg-red-500 hover:bg-red-600 text-white rounded-xl font-bold text-xl shadow-[0_4px_0_#b91c1c] active:shadow-none active:translate-y-1 transition-all border-2 border-[#7f1d1d]",children:"Kh√≥ (Hard)"}),e.jsx("button",{onClick:t,className:"w-full py-4 bg-[#fdf6e3] hover:bg-[#eee8d5] text-[#8b4513] rounded-xl font-bold text-xl shadow-[0_4px_0_#d2b48c] active:shadow-none active:translate-y-1 transition-all border-2 border-[#8b4513]",children:"Tho√°t"})]})]})}):e.jsxs("div",{className:"fixed inset-0 bg-[#fdf6e3] z-50 flex flex-col items-center p-2 sm:p-4 bg-wood-pattern overflow-hidden h-screen w-screen",children:[e.jsxs("div",{className:"w-full max-w-lg flex justify-between items-center mb-2 shrink-0 bg-[#deb887] p-2 rounded-xl border-2 border-[#8b4513] shadow-lg",children:[e.jsx("button",{onClick:t,className:"p-2 bg-[#fdf6e3] rounded-lg text-[#8b4513] hover:bg-white border border-[#d2b48c]",children:e.jsx(oe,{size:20})}),e.jsxs("div",{className:"flex items-center gap-2 bg-[#5d4037] px-3 py-1 rounded-lg border border-[#3e2723]",children:[e.jsx(De,{className:"text-white w-4 h-4"}),e.jsx("span",{className:"text-lg font-mono font-bold text-white",children:_(B)})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-yellow-100 px-2 py-1 rounded-lg border border-yellow-300",children:[e.jsx("span",{className:"font-bold text-yellow-600",children:(s==null?void 0:s.stars)||0}),e.jsx(he,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"})]})]}),e.jsx("div",{className:"flex-1 w-full min-h-0 flex items-center justify-center py-2",children:e.jsx("div",{className:"aspect-square max-h-full max-w-full portrait:w-full portrait:h-auto landscape:h-full landscape:w-auto bg-[#8b4513] p-2 rounded-lg shadow-2xl",children:e.jsx("div",{className:"w-full h-full bg-[#deb887] grid grid-cols-9 grid-rows-9 border-2 border-[#8b4513]",children:a.map((u,h)=>u.map((x,M)=>Y(h,M)))})})}),e.jsxs("div",{className:"w-full max-w-lg flex flex-col gap-2 shrink-0 mt-2",children:[e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsxs("button",{onClick:()=>I(!S),className:`flex-1 py-2 rounded-xl font-bold flex flex-col items-center justify-center gap-1 border-b-4 transition-all
                            ${S?"bg-brand-500 text-white border-brand-700":"bg-[#fdf6e3] text-[#8b4513] border-[#d2b48c]"}
                        `,children:[e.jsx(nt,{size:18}),e.jsx("span",{className:"text-[10px] sm:text-xs",children:"Ghi ch√∫"})]}),e.jsxs("button",{onClick:te,className:"flex-1 py-2 bg-[#fdf6e3] text-[#8b4513] rounded-xl font-bold flex flex-col items-center justify-center gap-1 border-b-4 border-[#d2b48c] active:border-b-0 active:translate-y-1",children:[e.jsx(ot,{size:18}),e.jsx("span",{className:"text-[10px] sm:text-xs",children:"X√≥a"})]}),e.jsxs("button",{onClick:re,className:"flex-1 py-2 bg-yellow-100 text-yellow-700 rounded-xl font-bold flex flex-col items-center justify-center gap-1 border-b-4 border-yellow-300 active:border-b-0 active:translate-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ct,{size:18}),e.jsxs("span",{className:"text-[10px] sm:text-xs bg-yellow-500 text-white px-1.5 rounded-full flex items-center gap-0.5",children:["-5 ",e.jsx(he,{size:8,className:"fill-white"})]})]}),e.jsx("span",{className:"text-[10px] sm:text-xs",children:"G·ª£i √Ω"})]})]}),e.jsx("div",{className:"grid grid-cols-9 gap-1 h-12 sm:h-14",children:[1,2,3,4,5,6,7,8,9].map(u=>e.jsx("button",{onClick:()=>ee(u),className:"h-full bg-[#deb887] text-[#5d4037] rounded-lg font-black text-xl sm:text-2xl shadow-[0_3px_0_#8b4513] active:shadow-none active:translate-y-[3px] border border-[#d2b48c] transition-all flex items-center justify-center",children:u},u))})]}),C==="won"&&!y&&e.jsx("div",{className:"absolute inset-0 bg-black/60 z-[60] flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-[#fdf6e3] rounded-3xl p-8 max-w-sm w-full text-center shadow-2xl border-4 border-[#8b4513] animate-in zoom-in",children:[e.jsx(xe,{className:"w-20 h-20 text-yellow-500 mx-auto mb-4 drop-shadow-md"}),e.jsx("h2",{className:"text-3xl font-black text-[#5d4037] mb-2",children:"Ho√†n Th√†nh!"}),e.jsx("p",{className:"text-[#8b4513] mb-6",children:"B·∫°n ƒë√£ gi·∫£i m√£ th√†nh c√¥ng."}),e.jsxs("div",{className:"bg-[#deb887] p-4 rounded-xl mb-6 border-2 border-[#d2b48c]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-[#5d4037] font-bold",children:"Th·ªùi gian:"}),e.jsx("span",{className:"text-[#5d4037] font-mono text-xl",children:_(B)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[#5d4037] font-bold",children:"Ph·∫ßn th∆∞·ªüng:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-2xl font-black text-yellow-600",children:["+",T]}),e.jsx(he,{className:"fill-yellow-500 text-yellow-500"})]})]})]}),m&&e.jsx("div",{className:"mb-6 p-3 bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl border border-purple-200 animate-pulse",children:e.jsxs("p",{className:"text-purple-700 font-bold flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üéÅ"})," C√≥ qu√† b√≠ m·∫≠t!"]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>{m?N(!0):R(o)},className:"w-full py-3 bg-brand-500 hover:bg-brand-600 text-white rounded-xl font-bold shadow-lg flex items-center justify-center gap-2",children:m?"M·ªü qu√†":"Ch∆°i l·∫°i"}),e.jsx("button",{onClick:t,className:"w-full py-3 bg-white text-[#8b4513] border-2 border-[#d2b48c] rounded-xl font-bold",children:"Tho√°t"})]})]})}),y&&m&&e.jsx($e,{image:m.image,isNew:m.isNew,onClose:()=>{N(!1),v(null),A("menu")}}),e.jsx("style",{children:`
                .bg-wood-pattern {
                    background-color: #fdf6e3;
                    background-image: radial-gradient(#d2b48c 1px, transparent 1px);
                    background-size: 20px 20px;
                }
             `})]})},es=800,ts=({difficulty:t,onBack:s})=>{const[l,r]=n.useState(()=>ve(t)),[o,i]=n.useState([]),[a,c]=n.useState(new Map),[b,g]=n.useState(!1),[d,f]=n.useState(new Map),[S,I]=n.useState(!0),[B,P]=n.useState(!0);n.useEffect(()=>{i([...l.gears]),c(new Map),g(!1),f(new Map)},[l]),n.useEffect(()=>{if(!b)return;const m=Te(o.map(v=>v.id===l.motorId?{...v,speed:5,direction:1}:v),l.belts,l.motorId);i(m)},[b,l]);const U=m=>{b||c(v=>{const y=new Map(v),N=y.get(m);return N?N===1?y.set(m,-1):y.delete(m):y.set(m,1),y})},O=()=>{const m=Te(o.map(y=>y.id===l.motorId?{...y,speed:5,direction:1}:y),l.belts,l.motorId),v=new Map;l.gearsToGuess.forEach(y=>{const N=m.find(R=>R.id===y),E=a.get(y);N&&E&&v.set(y,N.direction===E)}),f(v),g(!0)},C=()=>r(ve(t)),A=()=>r(ve(t)),T=l.gearsToGuess.every(m=>a.has(m)),z=b&&l.gearsToGuess.every(m=>d.get(m)===!0);return e.jsxs("div",{className:"w-full h-screen bg-gradient-to-b from-sky-50 to-sky-100 flex flex-col font-sans select-none overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-amber-100 via-orange-100 to-amber-100 px-4 py-3 border-b border-amber-200 shadow-sm z-50 relative",children:[e.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-400 to-orange-400 text-white rounded-full font-medium shadow hover:shadow-md transition-all",children:[e.jsx(oe,{size:18}),"Menu"]}),e.jsx("h1",{className:"text-xl font-bold text-amber-800",children:"üîÑ ƒêo√°n Chi·ªÅu Quay"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>I(!S),className:`p-2 rounded-full ${S?"bg-amber-200 text-amber-700":"bg-gray-200 text-gray-400"}`,children:e.jsx(Ae,{size:20})}),e.jsx("button",{onClick:()=>P(!B),className:`p-2 rounded-full ${B?"bg-amber-200 text-amber-700":"bg-gray-200 text-gray-400"}`,children:e.jsx(Le,{size:20})})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"w-full px-4 py-3 flex items-center justify-between bg-white/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-sm px-3 py-1 rounded-full font-medium ${l.difficulty==="easy"?"bg-green-100 text-green-700 border border-green-300":l.difficulty==="medium"?"bg-yellow-100 text-yellow-700 border border-yellow-300":"bg-red-100 text-red-700 border border-red-300"}`,children:l.difficulty==="easy"?"D·ªÖ":l.difficulty==="medium"?"Trung b√¨nh":"Kh√≥"}),e.jsx("span",{className:"text-gray-600",children:'ƒêo√°n chi·ªÅu quay c·ªßa c√°c b√°nh rƒÉng c√≥ d·∫•u "?"'})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-sky-600 font-medium bg-sky-100 px-3 py-1 rounded-full",children:[a.size,"/",l.gearsToGuess.length," ƒë√£ ch·ªçn"]}),e.jsxs("button",{onClick:C,className:"flex items-center gap-1 px-3 py-1.5 bg-white hover:bg-gray-50 rounded-lg border border-gray-300 text-gray-600 text-sm shadow-sm",children:[e.jsx(pe,{size:14}),"L√†m m·ªõi"]})]})]}),e.jsx("div",{className:"flex-1 w-full px-4 pb-2",children:e.jsx("div",{className:"relative w-full h-full bg-white rounded-2xl shadow-lg border border-sky-200 overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 flex justify-center",children:e.jsxs("div",{className:"relative",style:{width:es,height:"100%"},children:[e.jsxs("svg",{className:"absolute inset-0 w-full h-full z-0",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"guess-grid",width:"25",height:"25",patternUnits:"userSpaceOnUse",children:e.jsx("circle",{cx:"12.5",cy:"12.5",r:"1",fill:"rgba(14, 165, 233, 0.1)"})})}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#guess-grid)"}),l.waterZones.map(m=>e.jsx(We,{x:m.x,y:m.y,width:m.width,height:m.height},m.id)),l.belts.map(m=>{const v=o.find(N=>N.id===m.sourceId),y=o.find(N=>N.id===m.targetId);return!v||!y?null:e.jsx(Ke,{x1:v.x,y1:v.y,r1:v.radius,x2:y.x,y2:y.y,r2:y.radius,speed:b?Math.abs(v.speed):0},m.id)})]}),o.map(m=>{const v=l.gearsToGuess.includes(m.id),y=a.get(m.id),N=d.get(m.id);return e.jsxs("div",{className:"absolute z-10",style:{left:m.x-m.radius,top:m.y-m.radius},children:[m.id==="motor"&&e.jsx("div",{className:"absolute -left-16 top-1/2 -translate-y-1/2 text-emerald-600 font-bold text-xs bg-white px-2 py-1 rounded shadow border-2 border-emerald-300",children:"‚ö° MOTOR"}),m.id==="target"&&e.jsx("div",{className:"absolute -right-12 top-1/2 -translate-y-1/2 text-rose-600 font-bold text-xs bg-white px-2 py-1 rounded shadow border-2 border-rose-300",children:"üéØ ƒê√çCH"}),v&&!b&&e.jsx("button",{onClick:()=>U(m.id),className:`absolute z-30 w-8 h-8 rounded-full flex items-center justify-center font-bold shadow-lg border-2 ${y===1?"bg-emerald-500 text-white border-emerald-300":y===-1?"bg-rose-500 text-white border-rose-300":"bg-white text-gray-500 border-gray-300 hover:border-sky-400"}`,style:{left:m.radius-16,top:-28},children:y===1?"‚Üª":y===-1?"‚Ü∫":"?"}),b&&v&&e.jsx("div",{className:`absolute z-30 w-8 h-8 rounded-full flex items-center justify-center text-white font-bold shadow-lg ${N?"bg-emerald-500":"bg-red-500"}`,style:{left:m.radius-16,top:-28},children:N?"‚úì":"‚úó"}),m.id==="motor"&&e.jsx("div",{className:"absolute z-30 bg-emerald-500 text-white font-bold text-lg w-8 h-8 rounded-full flex items-center justify-center border-2 border-emerald-300 shadow-lg animate-pulse",style:{left:m.radius-16,top:m.radius*2+8},children:"‚Üª"}),e.jsx(Je,{x:m.radius,y:m.radius,teeth:m.teeth,radius:m.radius,color:m.id==="motor"?"#22c55e":m.id==="target"?"#f43f5e":m.isFixed?"#94a3b8":"#facc15",speed:b?m.speed:0,direction:m.direction,isFixed:m.isFixed})]},m.id)})]})})})}),e.jsx("div",{className:"w-full py-4 flex items-center justify-center gap-4 border-t border-sky-200 bg-white",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`px-5 py-3 rounded-xl font-bold text-lg ${z?"bg-emerald-100 text-emerald-700 border-2 border-emerald-300":"bg-amber-100 text-amber-700 border-2 border-amber-300"}`,children:z?"üéâ Tuy·ªát v·ªùi!":"üí° Th·ª≠ l·∫°i nh√©!"}),e.jsx("button",{onClick:A,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-sky-400 to-blue-500 text-white rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-all",children:"Ti·∫øp t·ª•c ‚Üí"})]}):e.jsxs("button",{onClick:O,disabled:!T,className:`flex items-center gap-2 px-8 py-3 rounded-xl font-bold text-lg shadow-lg ${T?"bg-gradient-to-r from-emerald-400 to-green-500 text-white hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(dt,{size:24}),"Ki·ªÉm tra"]})})]})]})},ss="/Genius-kids/assets/CarIcon-_ng2odGq.png",ls=({onBack:t,onGameComplete:s})=>{const[l,r]=n.useState(null),[o,i]=n.useState(V.Easy);if(l==="memory")return e.jsx(wt,{difficulty:o,onExit:()=>r(null),onComplete:(c,b,g)=>{s("memory",c,b,g),r(null)}});const a=c=>{switch(c){case V.Easy:return"easy";case V.Medium:return"medium";case V.Hard:return"hard";default:return"easy"}};if(l==="sound-memory")return e.jsx(kt,{difficulty:a(o),onExit:()=>r(null),onComplete:(c,b,g)=>{s("sound-memory",c,b,g),r(null)}});if(l==="speed-math")return e.jsx(lt,{difficulty:a(o),onBack:()=>r(null),onComplete:(c,b,g)=>{s("speed-math",c,b,g),r(null)}});if(l==="dragon-quest")return e.jsx(Ft,{difficulty:a(o),onBack:()=>r(null),onComplete:(c,b,g)=>{s("dragon-quest",c,b,g),r(null)}});if(l==="math-racing")return e.jsx(Yt,{difficulty:a(o),onExit:()=>r(null)});if(l==="sudoku")return e.jsx(Zt,{onExit:()=>r(null)});if(l==="gears-menu")return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-800 to-slate-900 flex items-center justify-center",children:[e.jsx("button",{onClick:()=>r(null),className:"absolute top-4 left-4 z-50 bg-white/80 p-2 rounded-full shadow-lg hover:bg-white",children:e.jsx(oe,{size:24,className:"text-gray-800"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"K·ªπ S∆∞ M√°y M√≥c"}),e.jsx("p",{className:"text-gray-400 mb-8",children:"Ch·ªçn ch·∫ø ƒë·ªô ch∆°i"}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("button",{onClick:()=>r("gears-build"),className:"bg-gradient-to-br from-yellow-400 to-orange-500 text-white px-8 py-6 rounded-2xl shadow-lg hover:scale-105 transition-transform",children:[e.jsx(ze,{size:48,className:"mx-auto mb-3"}),e.jsx("div",{className:"text-xl font-bold",children:"L·∫Øp B√°nh RƒÉng"}),e.jsx("p",{className:"text-sm opacity-80 mt-1",children:"K·∫øt n·ªëi Ngu·ªìn ‚Üí ƒê√≠ch"})]}),e.jsxs("button",{onClick:()=>r("gears-guess"),className:"bg-gradient-to-br from-cyan-400 to-blue-500 text-white px-8 py-6 rounded-2xl shadow-lg hover:scale-105 transition-transform",children:[e.jsx(Ee,{size:48,className:"mx-auto mb-3"}),e.jsx("div",{className:"text-xl font-bold",children:"ƒêo√°n Chi·ªÅu Quay"}),e.jsx("p",{className:"text-sm opacity-80 mt-1",children:"D·ª± ƒëo√°n h∆∞·ªõng chuy·ªÉn ƒë·ªông"})]})]})]})]});if(l==="gears-build"){const c=o===V.Easy?"easy":o===V.Medium?"medium":"hard";return e.jsx(Ze,{difficulty:c,onBack:()=>r("gears-menu")})}if(l==="gears-guess"){const c=o===V.Easy?"easy":o===V.Medium?"medium":"hard";return e.jsx(ts,{difficulty:c,onBack:()=>r("gears-menu")})}return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 via-pink-50 to-blue-50 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 bg-white hover:bg-slate-50 rounded-xl transition-colors font-semibold text-slate-700 shadow-md",children:[e.jsx(oe,{size:20}),"Quay l·∫°i"]}),e.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600",children:"Games"}),e.jsx(we,{})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Ch·ªçn ƒë·ªô kh√≥:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>i(V.Easy),className:`px-6 py-4 rounded-xl font-bold transition-all ${o===V.Easy?"bg-green-500 text-white shadow-lg scale-105":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:"üòä"}),e.jsx("div",{children:"D·ªÖ"}),e.jsx("div",{className:"text-sm opacity-75",children:"C∆° b·∫£n"})]}),e.jsxs("button",{onClick:()=>i(V.Medium),className:`px-6 py-4 rounded-xl font-bold transition-all ${o===V.Medium?"bg-yellow-500 text-white shadow-lg scale-105":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:"üòé"}),e.jsx("div",{children:"Trung b√¨nh"}),e.jsx("div",{className:"text-sm opacity-75",children:"N√¢ng cao"})]}),e.jsxs("button",{onClick:()=>i(V.Hard),className:`px-6 py-4 rounded-xl font-bold transition-all ${o===V.Hard?"bg-red-500 text-white shadow-lg scale-105":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:"üî•"}),e.jsx("div",{children:"Kh√≥"}),e.jsx("div",{className:"text-sm opacity-75",children:"Th·ª≠ th√°ch"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-shadow",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-purple-500 to-pink-500 rounded-3xl flex items-center justify-center shadow-lg transform hover:rotate-6 transition-transform",children:e.jsx(Ee,{size:64,className:"text-white"})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h3",{className:"text-3xl font-bold text-slate-800 mb-3",children:"Gh√©p Th·∫ª H√¨nh ·∫¢nh"}),e.jsx("p",{className:"text-slate-600 text-lg mb-6",children:"L·∫≠t th·∫ª t√¨m c·∫∑p h√¨nh ·∫£nh ho·∫∑c bi·ªÉu t∆∞·ª£ng gi·ªëng nhau. R√®n luy·ªán tr√≠ nh·ªõ v√† s·ª± tinh m·∫Øt!"}),e.jsx("button",{onClick:()=>r("memory"),className:"px-8 py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-bold text-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all",children:"üéÆ Ch∆°i ngay!"})]})]})}),e.jsx("div",{className:"bg-white rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-shadow",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-3xl flex items-center justify-center shadow-lg transform hover:-rotate-6 transition-transform",children:e.jsx(Ae,{size:64,className:"text-white"})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h3",{className:"text-3xl font-bold text-slate-800 mb-3",children:"Giai ƒêi·ªáu Vui Nh·ªôn"}),e.jsx("p",{className:"text-slate-600 text-lg mb-6",children:"L·∫Øng nghe v√† ghi nh·ªõ chu·ªói √¢m thanh. Th·ª≠ th√°ch tr√≠ nh·ªõ th√≠nh gi√°c c·ªßa b·∫°n!"}),e.jsx("button",{onClick:()=>r("sound-memory"),className:"px-8 py-4 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-xl font-bold text-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all",children:"üéµ Ch∆°i ngay!"})]})]})}),e.jsx("div",{className:"bg-white rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-shadow",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-orange-400 to-red-500 rounded-3xl flex items-center justify-center shadow-lg transform hover:rotate-6 transition-transform",children:e.jsx(De,{size:64,className:"text-white"})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h3",{className:"text-3xl font-bold text-slate-800 mb-3",children:"ƒêua T·ªëc ƒê·ªô"}),e.jsx("p",{className:"text-slate-600 text-lg mb-6",children:"Tr·∫£ l·ªùi nhanh c√°c c√¢u h·ªèi To√°n, Ti·∫øng Vi·ªát v√† T·ª± nhi√™n x√£ h·ªôi tr∆∞·ªõc khi h·∫øt gi·ªù!"}),e.jsx("button",{onClick:()=>r("speed-math"),className:"px-8 py-4 bg-gradient-to-r from-orange-400 to-red-500 text-white rounded-xl font-bold text-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all",children:"üèéÔ∏è Ch∆°i ngay!"})]})]})}),e.jsx("div",{className:"bg-white rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-shadow mt-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-red-600 to-orange-500 rounded-3xl flex items-center justify-center shadow-lg transform hover:rotate-6 transition-transform",children:e.jsx("span",{className:"text-6xl",children:"üêâ"})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h3",{className:"text-3xl font-bold text-slate-800 mb-3",children:"ƒê·∫°i Chi·∫øn R·ªìng Th·∫ßn"}),e.jsx("p",{className:"text-slate-600 text-lg mb-6",children:"Phi√™u l∆∞u tr√™n b·∫£n ƒë·ªì, thu th·∫≠p buff v√† ƒë√°nh b·∫°i r·ªìng th·∫ßn!"}),e.jsx("button",{onClick:()=>r("dragon-quest"),className:"px-8 py-4 bg-gradient-to-r from-red-600 to-orange-500 text-white rounded-xl font-bold text-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all",children:"üêâ Ch∆°i ngay!"})]})]})}),e.jsx("div",{className:"bg-white rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-shadow",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-3xl flex items-center justify-center shadow-lg transform hover:rotate-6 transition-transform overflow-hidden p-4",children:e.jsx("img",{src:ss,alt:"Math Racing",className:"w-full h-full object-contain"})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h3",{className:"text-3xl font-bold text-slate-800 mb-3",children:"ƒê∆∞·ªùng ƒêua Th·∫ßn T·ªëc"}),e.jsx("p",{className:"text-slate-600 text-lg mb-6",children:"L√°i xe tr√°nh ch∆∞·ªõng ng·∫°i v·∫≠t v√† ch·ªçn ƒë√°p √°n ƒë√∫ng. R√®n luy·ªán ph·∫£n x·∫° v√† t√≠nh nh·∫©m nhanh!"}),e.jsx("button",{onClick:()=>r("math-racing"),className:"px-8 py-4 bg-gradient-to-r from-emerald-400 to-teal-500 text-white rounded-xl font-bold text-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all",children:"üèéÔ∏è Ch∆°i ngay!"})]})]})}),e.jsx("div",{className:"bg-white rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-shadow",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-[#8b4513] to-[#d2b48c] rounded-3xl flex items-center justify-center shadow-lg transform hover:-rotate-6 transition-transform",children:e.jsx(it,{size:64,className:"text-white"})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h3",{className:"text-3xl font-bold text-slate-800 mb-3",children:"Sudoku Logic"}),e.jsx("p",{className:"text-slate-600 text-lg mb-6",children:"ƒêi·ªÅn s·ªë v√†o √¥ tr·ªëng sao cho m·ªói h√†ng, c·ªôt v√† √¥ vu√¥ng 3x3 ƒë·ªÅu ch·ª©a ƒë·ªß c√°c s·ªë t·ª´ 1 ƒë·∫øn 9."}),e.jsx("button",{onClick:()=>r("sudoku"),className:"px-8 py-4 bg-gradient-to-r from-[#8b4513] to-[#d2b48c] text-white rounded-xl font-bold text-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all",children:"üß© Ch∆°i ngay!"})]})]})}),e.jsx("div",{className:"bg-white rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-shadow",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-gray-700 to-gray-900 rounded-3xl flex items-center justify-center shadow-lg transform hover:rotate-6 transition-transform",children:e.jsx(ze,{size:64,className:"text-white animate-spin-slow"})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h3",{className:"text-3xl font-bold text-slate-800 mb-3",children:"K·ªπ S∆∞ M√°y M√≥c"}),e.jsx("p",{className:"text-slate-600 text-lg mb-6",children:"L·∫Øp r√°p b√°nh rƒÉng, d√¢y ƒëai ƒë·ªÉ v·∫≠n h√†nh c·ªó m√°y. Tr·ªü th√†nh k·ªπ s∆∞ t√†i ba!"}),e.jsx("button",{onClick:()=>r("gears-menu"),className:"px-8 py-4 bg-gradient-to-r from-gray-700 to-gray-900 text-white rounded-xl font-bold text-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all",children:"‚öôÔ∏è Ch∆°i ngay!"})]})]})})]})]})})};function vs(){const t=et(),{currentStudent:s}=Ne(),{addGameResult:l,setGachaResult:r}=ke();if(!s)return t("/"),null;const o=(a,c,b,g)=>{const{reward:d}=ge(s,g),f={id:Date.now().toString(),date:new Date().toISOString(),gameType:a,score:c,maxScore:b,starsEarned:d.stars,durationSeconds:0,difficulty:"easy"};let S;if(d.image){const I=!s.ownedImageIds.includes(d.image.id);S=d.image,r({image:d.image,isNew:I})}l(f,S)},i=()=>{t("/mode")};return e.jsx(ls,{onBack:i,onGameComplete:o})}export{vs as GamePage};
