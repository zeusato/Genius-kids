import{r as i,o as z,p as I,g as B,q as E,s as H,t as M,j as e,T as D,v as O,u as L,a as X,b as F}from"./index-C-THNmJn.js";import{M as G}from"./MusicControls-DpWluwNo.js";import{A as $}from"./arrow-left-DsRYSmBr.js";import{I as q,P as K,A as Q,a as R}from"./pen-DEj0-CkO.js";import{I as w}from"./info-BBpHBDJh.js";import{L as V}from"./log-out-Dqu5d4I9.js";import{T as J}from"./triangle-alert-Bzs3bPVk.js";import"./volume-x-eOlCYDwA.js";const U=({student:t,onUpdateProfile:a,onBack:d,onOpenAlbum:c,onDelete:o,onNavigateToHallOfFame:x})=>{const[k,m]=i.useState(!1),[h,b]=i.useState(t.name),[j,u]=i.useState(!1),[f,N]=i.useState(!1),[C,g]=i.useState(!1),r=z(t),S=I(t),l=B(t.currentAvatarId),n=E(t.currentThemeId),v=H().filter(s=>t.ownedAvatarIds.includes(s.id)),y=M().filter(s=>t.ownedThemeIds.includes(s.id)),T=()=>{h.trim()&&(a({...t,name:h.trim()}),m(!1))},A=s=>{a({...t,currentAvatarId:s}),u(!1)},P=s=>{O(s),a({...t,currentThemeId:s}),N(!1)};return e.jsxs("div",{className:"min-h-screen p-4 pb-20 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-all",children:[e.jsx($,{size:20}),e.jsx("span",{children:"Quay láº¡i"})]}),e.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Há»“ sÆ¡ cá»§a báº¡n"}),e.jsx(G,{})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Avatar"}),e.jsxs("button",{onClick:()=>u(!j),className:"flex items-center gap-2 px-4 py-2 bg-brand-100 hover:bg-brand-200 text-brand-800 rounded-lg transition-all text-sm font-semibold",children:[e.jsx(q,{size:16}),"Äá»•i avatar"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[l&&(l.isEmoji?e.jsx("div",{className:"text-6xl bg-brand-50 p-4 rounded-2xl",children:l.imagePath}):e.jsx("img",{src:l.imagePath,alt:l.name,className:"w-24 h-24 rounded-2xl object-cover border-4 border-brand-200"})),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-slate-700",children:l==null?void 0:l.name}),e.jsxs("p",{className:"text-sm text-slate-500",children:["ÄÃ£ sá»Ÿ há»¯u ",v.length," avatar"]})]})]}),j&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-xl",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-600 mb-3",children:"Chá»n avatar:"}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 gap-3",children:v.map(s=>e.jsx("button",{onClick:()=>A(s.id),className:`p-2 rounded-lg transition-all ${s.id===t.currentAvatarId?"bg-brand-500 ring-2 ring-brand-300":"bg-white hover:bg-gray-100"}`,children:s.isEmoji?e.jsx("span",{className:"text-2xl",children:s.imagePath}):e.jsx("img",{src:s.imagePath,alt:s.name,className:"w-full h-auto rounded"})},s.id))})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"TÃªn"}),k?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:h,onChange:s=>b(s.target.value),className:"flex-1 px-4 py-2 border-2 border-brand-300 rounded-lg focus:border-brand-500 focus:outline-none",autoFocus:!0}),e.jsx("button",{onClick:T,className:"px-4 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 font-semibold",children:"LÆ°u"}),e.jsx("button",{onClick:()=>{b(t.name),m(!1)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Há»§y"})]}):e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("p",{className:"text-2xl font-bold text-brand-600",children:t.name}),e.jsx("button",{onClick:()=>m(!0),className:"p-2 text-gray-400 hover:text-brand-500 hover:bg-brand-50 rounded-lg transition-all",children:e.jsx(K,{size:18})})]})]}),e.jsx("div",{className:"w-full md:w-auto border-t md:border-t-0 md:border-l border-gray-100 pt-4 md:pt-0 md:pl-6 flex justify-center md:justify-end",children:e.jsxs("button",{onClick:x,className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-yellow-400 to-orange-500 text-white rounded-xl shadow-lg shadow-orange-200 hover:shadow-xl hover:scale-105 transition-all group",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg group-hover:rotate-12 transition-transform",children:e.jsx(D,{size:24,className:"text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs font-medium text-yellow-100 uppercase tracking-wider",children:"ThÃ nh tÃ­ch"}),e.jsx("p",{className:"text-lg font-bold",children:"Báº£ng VÃ ng"})]})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-yellow-100 to-orange-100 rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-yellow-800",children:"Sá»‘ sao sá»Ÿ há»¯u"}),e.jsxs("div",{className:"group relative",children:[e.jsx(w,{size:20,className:"text-yellow-700 cursor-help"}),e.jsxs("div",{className:"absolute right-0 top-8 w-64 bg-gradient-to-br from-yellow-400 to-orange-400 text-gray-900 text-xs rounded-lg p-3 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10 shadow-xl border-2 border-yellow-500",children:[e.jsx("p",{className:"font-bold mb-1",children:"ðŸ’¡ CÃ¡ch kiáº¿m sao:"}),e.jsx("p",{children:"â€¢ HoÃ n thÃ nh bÃ i test/game"}),e.jsx("p",{children:"â€¢ Nháº­n huy chÆ°Æ¡ng (ðŸ¥‰ðŸ¥ˆðŸ¥‡)"}),e.jsx("p",{children:"â€¢ Bronze = 1â­, Silver = 2â­, Gold = 3â­"}),e.jsx("p",{children:"â€¢ Nháº­n 10â­ khi kiáº¿m Ä‘Æ°á»£c áº£nh trÃ¹ng láº·p"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-6xl",children:"â­"}),e.jsx("span",{className:"text-5xl font-black text-yellow-600",children:t.stars})]}),e.jsxs("p",{className:"text-sm text-yellow-700 mt-2",children:["Tá»•ng kiáº¿m Ä‘Æ°á»£c trong ngÃ y: ",S," â­"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-pink-100 rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-purple-800",children:"Album sÆ°u táº­p"}),e.jsxs("div",{className:"group relative",children:[e.jsx(w,{size:20,className:"text-purple-700 cursor-help"}),e.jsxs("div",{className:"absolute right-0 top-8 w-64 bg-gradient-to-br from-purple-400 to-pink-400 text-gray-900 text-xs rounded-lg p-3 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10 shadow-xl border-2 border-purple-500",children:[e.jsx("p",{className:"font-bold mb-1",children:"ðŸŽ CÃ¡ch nháº­n áº£nh:"}),e.jsx("p",{children:"â€¢ Kiáº¿m Ä‘Æ°á»£c sao tá»« test/game"}),e.jsx("p",{children:"â€¢ CÃ³ 50% cÆ¡ há»™i nháº­n áº£nh ngáº«u nhiÃªn"}),e.jsx("p",{children:"â€¢ Äá»™ hiáº¿m: Phá»• thÃ´ng â†’ Huyá»n thoáº¡i"}),e.jsx("p",{children:"â€¢ Má»™t sá»‘ cÃ³ thá»ƒ mua táº¡i cá»­a hÃ ng"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:r.totalImagesCollected}),e.jsx("p",{className:"text-sm text-purple-700",children:"áº£nh Ä‘Ã£ sÆ°u táº­p"})]}),e.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg transition-all font-semibold",children:[e.jsx(Q,{size:20}),"Xem"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Thá»‘ng kÃª Ã´n luyá»‡n"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:r.totalTests}),e.jsx("p",{className:"text-sm text-blue-700",children:"BÃ i thi Ä‘Ã£ lÃ m"})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl",children:[e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[r.averageTestScore,"%"]}),e.jsx("p",{className:"text-sm text-green-700",children:"Äiá»ƒm trung bÃ¬nh"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Thá»‘ng kÃª game"}),Object.keys(r.gamesByType).length>0?e.jsx("div",{className:"space-y-3",children:Object.entries(r.gamesByType).map(([s,p])=>e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-slate-700 capitalize mb-2",children:s}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Sá»‘ láº§n chÆ¡i"}),e.jsx("p",{className:"font-bold text-slate-800",children:p.count})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Äiá»ƒm TB"}),e.jsxs("p",{className:"font-bold text-slate-800",children:[p.avgScore,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Sao TB"}),e.jsxs("p",{className:"font-bold text-yellow-600",children:[p.avgStars,"â­"]})]})]})]},s))}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"ChÆ°a chÆ¡i game nÃ o"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Giao diá»‡n"}),e.jsxs("button",{onClick:()=>N(!f),className:"flex items-center gap-2 px-4 py-2 bg-purple-100 hover:bg-purple-200 text-purple-800 rounded-lg transition-all text-sm font-semibold",children:[e.jsx(R,{size:16}),"Äá»•i theme"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:n==null?void 0:n.thumbnailPath}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-slate-700",children:n==null?void 0:n.name}),e.jsxs("p",{className:"text-sm text-slate-500",children:["ÄÃ£ sá»Ÿ há»¯u ",y.length," theme"]})]})]}),f&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-xl",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-600 mb-3",children:"Chá»n giao diá»‡n:"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:y.map(s=>e.jsx("button",{onClick:()=>P(s.id),className:`p-4 rounded-lg transition-all text-left ${s.id===t.currentThemeId?"bg-purple-500 text-white ring-2 ring-purple-300":"bg-white hover:bg-gray-100 text-slate-700"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:s.thumbnailPath}),e.jsx("span",{className:"font-semibold",children:s.name})]})},s.id))})]})]}),e.jsx("div",{className:"mt-8 pt-8 border-t border-slate-200 text-center",children:e.jsxs("button",{onClick:()=>g(!0),className:"text-red-500 hover:text-red-700 font-semibold flex items-center gap-2 mx-auto px-4 py-2 hover:bg-red-50 rounded-lg transition-all",children:[e.jsx(V,{size:18}),"XÃ³a tÃ i khoáº£n vÄ©nh viá»…n"]})}),C&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 max-w-md w-full animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(J,{size:32,className:"text-red-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:"XÃ³a tÃ i khoáº£n?"}),e.jsxs("p",{className:"text-slate-600",children:["Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a há»“ sÆ¡ cá»§a ",e.jsx("strong",{children:t.name})," khÃ´ng?"]}),e.jsxs("div",{className:"mt-4 p-4 bg-red-50 rounded-xl text-left text-sm text-red-700 border border-red-100",children:[e.jsx("p",{className:"font-bold mb-1",children:"Cáº£nh bÃ¡o:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsxs("li",{children:["Máº¥t toÃ n bá»™ ",t.stars," sao Ä‘Ã£ tÃ­ch lÅ©y"]}),e.jsx("li",{children:"Máº¥t táº¥t cáº£ avatar vÃ  theme Ä‘Ã£ mua"}),e.jsx("li",{children:"Máº¥t bá»™ sÆ°u táº­p áº£nh vÃ  lá»‹ch sá»­ há»c táº­p"}),e.jsxs("li",{children:["HÃ nh Ä‘á»™ng nÃ y ",e.jsx("strong",{children:"khÃ´ng thá»ƒ hoÃ n tÃ¡c"})]})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-slate-700 rounded-xl font-semibold transition-all",children:"Há»§y bá»"}),e.jsx("button",{onClick:()=>{o(),g(!1)},className:"flex-1 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-semibold shadow-lg shadow-red-200 transition-all",children:"XÃ³a vÄ©nh viá»…n"})]})]})})]})};function ae(){const t=L(),{currentStudent:a}=X(),{updateStudent:d,deleteStudent:c}=F();if(!a)return t("/"),null;const o=()=>{t("/mode")},x=()=>{c(a.id),t("/")};return e.jsx(U,{student:a,onUpdateProfile:d,onBack:o,onOpenAlbum:()=>t("/album"),onDelete:x,onNavigateToHallOfFame:()=>t("/hall-of-fame")})}export{ae as ProfilePage};
