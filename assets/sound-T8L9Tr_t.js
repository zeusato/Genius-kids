import{a2 as c}from"./index-DvBuJBKP.js";class d{constructor(){this.audioCtx=null,this.isMuted=!1,this.isUnlocked=!1;try{const e=window.AudioContext||window.webkitAudioContext;this.audioCtx=new e}catch(e){console.error("Web Audio API not supported",e)}this.setupAutoUnlock()}setupAutoUnlock(){const e=()=>{this.isUnlocked||(this.unlockAudio(),document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0))};document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0)}unlockAudio(){if(!this.audioCtx||this.isUnlocked)return;const e=this.audioCtx.createBuffer(1,1,22050),n=this.audioCtx.createBufferSource();n.buffer=e,n.connect(this.audioCtx.destination),n.start(0),this.audioCtx.state==="suspended"&&this.audioCtx.resume(),this.isUnlocked=!0,console.log("ðŸ”Š Audio unlocked for iOS/Safari")}getContext(){return this.audioCtx?(this.audioCtx.state==="suspended"&&this.audioCtx.resume().catch(e=>{console.warn("Failed to resume AudioContext:",e)}),this.audioCtx):null}setMute(e){this.isMuted=e}toggleMute(){return this.isMuted=!this.isMuted,this.isMuted}playNote(e,n=.3){this.playTone(e,"sine",n,0)}playTone(e,n,r,o=0){const t=this.getContext();if(!t||this.isMuted||!c.isSoundEnabled())return;const i=t.createOscillator(),s=t.createGain();i.type=n,i.frequency.setValueAtTime(e,t.currentTime+o),s.gain.setValueAtTime(.5,t.currentTime+o),s.gain.exponentialRampToValueAtTime(.001,t.currentTime+o+r),i.connect(s),s.connect(t.destination),i.start(t.currentTime+o),i.stop(t.currentTime+o+r)}playCorrect(){this.playTone(880,"sine",.15,0),this.playTone(1760,"sine",.45,.1)}playWrong(){this.playTone(150,"sawtooth",.45,0)}playClick(){this.playTone(800,"sine",.05,0)}playComplete(){this.playTone(523.25,"sine",.3,0),this.playTone(659.25,"sine",.3,0+.15),this.playTone(783.99,"sine",.3,0+.3),this.playTone(1046.5,"sine",.6,0+.45)}}const u=new d,h=a=>{switch(a){case"ding":u.playCorrect();break;case"buzz":u.playWrong();break;case"click":u.playClick();break;case"complete":u.playComplete();break}};export{h as p,u as s};
